/** layuiAdmin.std-v1.0.0 LPPL License By http://www.layui.com/admin/ */
 ;"use strict";layui.config({base:"../../../layuiadmin/"}).extend({index:"lib/index"}).use(["index","table","layer","common","consts","z_treeConfig"],function(){var e=layui.$,t=layui.form,n=(layui.table,layui.layer),a=(layui.tree,layui.common);layui.z_treeConfig;t.on("submit(DepartmentFrom)",function(e){return console.log(e.field,"新增部门"),delete e.field.topName,o.baseData.editFalge?(console.log("执行编辑命令"),o.server.eidtOrgan(e.field,"/api/Role","department")):(o.server.addOrgan(e.field,"/api/Role","department"),console.log("执行添加命令")),!1});var o={init:function(){this.server.getTreeData(),this.render.showtips(),this.event()},baseData:{treeObj:{},id:"",nodeData:{},sunNodeFalge:!1,editFalge:!1},event:function(){e("#refresh").click(function(){e("#treeOrgan").html(""),o.server.getTreeData(),a.isDisableButton("#delet",!0),a.isDisableButton("#delet",!0)}),e("#showDepartment").click(function(){o.currData.getcheckedData()}),e("#showStaff").click(function(){}),e("#delet").click(function(){o.render.openDeleteConfirm(o.baseData.nodeData)})},server:{getTreeData:function(){console.log("获取数据信息"),a.ajaxFun("get","/api/Organ/treeview").then(function(e){if(a.appResult.isSucceeded(e)){var t=o.currData.addIcon(e.Result.TreeNodes);o.render.renderTree(t)}else a.appResult.loadErrorText(e)}).fail(function(e){console.log(e)})},getNodedata:function(a,i){var r="";if("roleCatalog"===a)r="/api/Role/"+i,o.render.showForm("#DepartmentFrom");else{if("roleInfo"!==a)return;r="/api/Role/"+i,o.render.showForm("#staffFrom")}n.load(2),e.ajax({type:"get",url:layui.setter.baseUrl+r,dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json"},success:function(e){if(n.closeAll(),e.IsSucceed){o.baseData.nodeData=e.Result;var i=e.Result;"roleCatalog"===a?t.val("DepartmentFrom",{Name:i.Name,Code:i.Code,Message:i.Message}):"roleInfo"===a&&t.val("staffFrom",{Name:i.Name,Code:i.Code,Message:i.Message})}else n.msg("获取节点数据失败! "+e.Errors[0].Message,{icon:5})},error:function(e){n.closeAll(),n.msg("数据操作失败",{icon:5})}})}},render:{renderTree:function(e){o.baseData.treeObj=layui.z_treeConfig.renderTree(e,"treeRegion",{callback:{onClick:o.currData.treeOnClick},check:{enable:!0}})},showtips:function(){a.showtips(".layui-btn-group button")},openDeleteConfirm:function(e){n.confirm("你确定要删除<span style='font-weight:bolder'>"+e.Title+"</span>的节点吗?",{btn:["确定","取消"],icon:3},function(){o.server.delet(e.Flag,e.Id)},function(){console.log("取消")})}},currData:{addIcon:function(e){if(console.log(e,"数据"),e.length>0)for(var t=0;t<e.length;t++)"organ"===e[t].Flag?(e[t].icon="../../../layuiadmin/style/img/ztreeImg/company.png",e[t].iconOpen="../../../layuiadmin/style/img/ztreeImg/companyOp.png"):"department"===e[t].Flag?(e[t].icon="../../../layuiadmin/style/img/ztreeImg/department.png",e[t].iconOpen="../../../layuiadmin/style/img/ztreeImg/departmentOp.png"):"position"===e[t].Flag?(e[t].icon="../../../layuiadmin/style/img/ztreeImg/position.png",e[t].iconOpen="../../../layuiadmin/style/img/ztreeImg/positionOp.png"):"staff"===e[t].Flag&&(delete e[t].Children,e[t].icon="../../../layuiadmin/style/img/ztreeImg/staff.png",e[t].iconOpen="../../../layuiadmin/style/img/ztreeImg/staffOp.png"),e[t].Children&&e[t].Children.length>0&&o.currData.addIcon(e[t].Children);return e},getTreeNodeName:function(t,n){var o=a.getTreeNodeName(t,n,"name");e(".topName").val(o),e(".submit").html("立即修改")},treeOnClick:function(e,t,n){console.log(n),a.isDisableButton("#delet",!1),a.isDisableButton("#showStaff",!1),o.baseData.nodeData=n},getcheckedData:function(){var e=o.baseData.treeObj.getCheckedNodes(!0);console.log(e,"打印节点")}}};o.init()});
//# sourceMappingURL=../../src/maps/tpl/tree/organTree.js.map
