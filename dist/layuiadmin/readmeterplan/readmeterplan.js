/** layuiAdmin.std-v1.0.0 LPPL License By http://www.layui.com/admin/ */
 ;"use strict";layui.config({base:"../../../layuiadmin/"}).extend({index:"lib/index"}).use(["index","table","layer","common","consts","haderSerch"],function(){var e=layui.$,t=layui.form,a=layui.common,n=layui.table,i=layui.consts,l=layui.layer;layui.haderSerch("#readmeterplan-search",{data:[{key:"查询关键字"}]});var r={baseUrl:layui.setter.revenueUrl},o={renderTable:function(){n.render({elem:"#ReadMeterPlan",id:"ReadMeterPlan",url:layui.setter.revenueUrl+"/api/ReadMeterPlan/query/list",where:{Method:"list"},parseData:layui.setter.parseData,request:layui.setter.request,page:!0,cols:[[{field:"ReadMeterPlanZTBZ",title:"计划代码",templet:function(e){return""}},{field:"ReadMeterPlanName",title:"计划名称",templet:function(e){return e.Me.Name}},{field:"ReadMeterPlanName",title:"抄表周期",templet:function(e){return""}},{field:"ReadMeterPlanKsrq",title:"计划开始时间",templet:function(e){return e.Me.ksrq}},{field:"ReadMeterPlanJsrq",title:"计划结束时间",templet:function(e){return e.Me.jsrq}},{field:"ReadMeterPlanZTBZNAME",title:"当前状态",templet:function(e){return e.Me.ReadMeterPlanZTBZNAME}},{field:"ReadMeterPlanModifyDate",title:"修改时间",templet:function(e){return layui.util.toDateString(e.Me.ModifyDate)}}]],loading:!0,limit:10,text:{none:i.tabelNoneText}})},add:function(t){l.closeAll();var i=layui.consts.basePostData();i.Data=t,i.Method="insert";var o=JSON.stringify(i);console.log(o),a.ajaxFun("post","/api/ReadMeterPlan/insert",o,r).then(function(t){a.appResult.isSucceeded(t)?(e("#lock-from").find("input[type=text],select,input[type=hidden]").each(function(){e(this).val("")}),n.reload("table-ReadMeterPlan"),l.msg("数据添加成功!",{icon:6})):a.appResult.loadErrorText(t)}).fail(function(e){console.log(e)})}},u={add:function(){l.open({type:1,title:"添加地址",content:e("#lock-from"),maxmin:!0,area:["800px","500px"],btn:["确定","取消"],yes:function(n,i){var l=e("#LAY-chaobiaojihua-add-submit");t.on("submit(LAY-chaobiaojihua-add-submit)",function(e){var t=e.field;console.log(t),a.ajaxFun("get","/api/Common/GetInsertGuid","",r).then(function(e){a.appResult.isSucceeded(e)?(t.Idd=e.Result,console.info(t),o.add(t)):a.appResult.loadErrorText(e)}).fail(function(e){console.log(e)})}),l.trigger("click")}})}};t.on("submit(searchbtn)",function(e){var t=e.field;console.log(t,"搜索数据");a.formatRequertDate(t.Datetime.split("~")[0]),a.formatRequertDate(t.Datetime.split("~")[1]);n.reload("LAY-user-manage",{where:{"Data.Key":t.key,"Data.PageIndex":1,"Data.PageSize":10}})}),o.renderTable(),e(".layui-btn.layuiadmin-btn-useradmin").on("click",function(){var t=e(this).data("type");u[t]?u[t].call(this):""})});
//# sourceMappingURL=../src/maps/readmeterplan/readmeterplan.js.map
