{"version":3,"sources":["danganguanli/dizhiguanli.js"],"names":["layui","config","base","extend","index","use","$","table","form","common","option","laypage","baseUrl","setter","revenueUrl","village","building","areaStatus","addType","readPtStatus","dizhiSeverEvent","getAllAvailableArea","data","ajaxFun","type","status","then","res","appResult","isSucceeded","result","element","name","items","Result","render","renderSelect","loadErrorText","fail","err","console","log","getAllAvailableReadPt","info","id","getAddtype","renderAddSelect","getAreaTypeObj","areaAbleStatus","findObjectByKeyVal","villageSelPara","Value","bulSelPara","getAllAvailableRsd_Bld","getAllAvailableReadPtByRsd","readPAbleStatus","add","layer","closeAll","dataBean","consts","basePostData","Data","Method","str1","JSON","stringify","reload","find","each","this","val","msg","icon","delete","para","load","shade","Me","Id","CompanyId","edit","open","title","content","maxmin","area","btn","yes","layero","submit","on","field","AddressStatus","AddressType","Number","AccountDay","Area_Id_Building","Area_Id_ReadingPoint","Area_Id_Village","close","trigger","Area_Id_ReadingPointName","removeAttr","append","attr","AddressStatusName","UnitNo","FloorNo","RoomNo","Address","SortNum","Description","active","batchdel","checkStatus","checkData","length","confirm","Idd","html","i","Name","Text","renderTable","elem","url","where","parseData","request","page","cols","templet","d","Area_Id_VillageName","Area_Id_BuildingName","AddressTypeName","fixed","align","width","toolbar","loading","limit","text","init","call","offset","zIndex","shebeiPar","BusinessHall_Name","value","obj","layEvent","event","tr"],"mappings":"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","file":"../../../danganguanli/dizhiguanli.js","sourcesContent":["layui\r\n  .config({\r\n    base: \"../../../layuiadmin/\" //静态资源所在路径\r\n  })\r\n  .extend({\r\n    index: \"lib/index\" //主入口模块\r\n  })\r\n  .use([\"index\", \"table\", \"form\",\"consts\",\"common\",], function() {\r\n    \r\n    var $ = layui.$,\r\n    table = layui.table,\r\n    form = layui.form,\r\n    common = layui.common;\r\n    var laypage = layui.laypage;\r\n    var option = {\r\n          baseUrl:layui.setter.revenueUrl\r\n        }\r\n    var villageType = {}\r\n   // var areaStatus = {}\r\n    //用户管理表格渲染\r\n    var village = {}\r\n    var building = {}\r\n    var areaStatus = {}\r\n    var addType = {}\r\n    var readPtStatus = {}\r\n    //服务交互  /api/Area/query/all?Data.AreaType=\r\n    var dizhiSeverEvent = {\r\n      getAllAvailableArea: function(data){\r\n        common.ajaxFun(\"get\", \"/api/Area/query/all?Data.AreaType=\"+data.type+\"&Data.Status=\"+data.status+\"&Method=all\",'',option).then(function(res) {\r\n          if (common.appResult.isSucceeded(res)) {\r\n            var result = {element:data.name,items:res.Result}\r\n\r\n            render.renderSelect(result)\r\n          } else {\r\n            common.appResult.loadErrorText(res);\r\n          }\r\n        })\r\n        .fail(err => {\r\n          console.log(err);\r\n        });\r\n      },\r\n      getAllAvailableReadPt: function(data){\r\n        console.info(data)\r\n        common.ajaxFun(\"get\", \"/api/ReadingPoint/query/all?Data.Area_Id_Village=\"+data.id+\"&Data.Status=\"+data.status+\"&Method=all\",'',option).then(function(res) {\r\n          if (common.appResult.isSucceeded(res)) {\r\n            var result = {element:\"#Area_Id_ReadingPoint\",items:res.Result}\r\n\r\n            render.renderSelect(result)\r\n          } else {\r\n            common.appResult.loadErrorText(res);\r\n          }\r\n        })\r\n        .fail(err => {\r\n          console.log(err);\r\n        });\r\n      },\r\n      getAddtype: function(data){\r\n        common.ajaxFun(\"get\", \"/api/Address/addresstype?Method=addresstype\",'',option).then(function(res) {\r\n          if (common.appResult.isSucceeded(res)) {\r\n            addType = res\r\n            var result = {element:\"#AddressType\",items:res.Result}\r\n            render.renderAddSelect(result)\r\n          } else {\r\n            common.appResult.loadErrorText(res);\r\n          }\r\n        })\r\n        .fail(err => {\r\n          console.log(err);\r\n        });\r\n      },\r\n      getAreaTypeObj: function(){\r\n        common.ajaxFun(\"get\", \"/api/Area/areatype?Method=areatype\",'',option).then(function(res) {\r\n          if (common.appResult.isSucceeded(res)) {\r\n            var areaAbleStatus = common.findObjectByKeyVal(areaStatus,\"Text\",'启用')\r\n            village = common.findObjectByKeyVal(res,\"Text\",'小区')\r\n            building = common.findObjectByKeyVal(res,\"Text\",'楼栋')\r\n            var villageSelPara = {name:\"#Area_Id_Village\", status:areaAbleStatus.Value, type:village.Value}\r\n            var bulSelPara = {name:\"#Area_Id_Building\", status:areaAbleStatus.Value, type:building.Value}\r\n            //console.info(village)\r\n            //console.info(villageSelPara)\r\n            dizhiSeverEvent.getAllAvailableArea(villageSelPara)\r\n            dizhiSeverEvent.getAllAvailableArea(bulSelPara)\r\n            //render.renderSelect(villageSelPara)\r\n            //render.renderSelect(bulSelPara)\r\n            \r\n          } else {\r\n            common.appResult.loadErrorText(res);\r\n          }\r\n        })\r\n        .fail(err => {\r\n          console.log(err);\r\n        });\r\n      },\r\n      getAllAvailableRsd_Bld: function() {\r\n        common.ajaxFun(\"get\", \"/api/Area/areastatus?Method=areastatus\",'',option).then(function(res) {\r\n          if (common.appResult.isSucceeded(res)) {\r\n\r\n            areaStatus  = res\r\n            dizhiSeverEvent.getAreaTypeObj()\r\n          } else {\r\n            common.appResult.loadErrorText(res);\r\n          }\r\n        })\r\n        .fail(err => {\r\n          console.log(err);\r\n        });\r\n      },\r\n      getAllAvailableReadPtByRsd: function(id) {\r\n        common.ajaxFun(\"get\", \"/api/ReadingPoint/readingpointstatus?Method=readingpointstatus\",'',option).then(function(res) {\r\n          if (common.appResult.isSucceeded(res)) {\r\n            readPtStatus = res\r\n            var readPAbleStatus  = common.findObjectByKeyVal(readPtStatus,\"Text\",'启用')\r\n            var data = {id : id, status:readPAbleStatus.Value}\r\n            dizhiSeverEvent.getAllAvailableReadPt(data)\r\n          } else {\r\n            common.appResult.loadErrorText(res);\r\n          }\r\n        })\r\n        .fail(err => {\r\n          console.log(err);\r\n        });\r\n      },\r\n      add: function(data) {\r\n        layer.closeAll();\r\n        var dataBean = layui.consts.basePostData();\r\n        dataBean.Data = data;\r\n        dataBean.Method=\"insert\";\r\n        var str1 = JSON.stringify(dataBean);\r\n        //console.log(str1);\r\n        common\r\n          .ajaxFun(\"post\", \"/api/address/insert\", str1,option)\r\n          .then(function(res) {\r\n            if (common.appResult.isSucceeded(res)) {\r\n              table.reload(\"LAY-dizhiTable\");\r\n              $(\"#lock-from\").find('input[type=text],select,input[type=hidden]').each(function() {\r\n                   $(this).val('');\r\n              });\r\n              layer.msg(\"数据添加成功!\", { icon: 6 });\r\n            } else {\r\n              common.appResult.loadErrorText(res);\r\n            }\r\n          })\r\n          .fail(err => {\r\n            console.log(err);\r\n          });\r\n      },\r\n      delete: function(para) {\r\n        layer.closeAll();\r\n        layer.load(0, { shade: false });\r\n        var dataBean = layui.consts.basePostData();\r\n        console.info(para.Me)\r\n        dataBean.Data = {Id:para.Me.Id,CompanyId:\"\"}\r\n        dataBean.Method = \"remove\"\r\n        var str1 = JSON.stringify(dataBean);\r\n        console.info(str1)\r\n        common\r\n          .ajaxFun(\"delete\", \"/api/Address/remove\", str1,option)\r\n          .then(function(res) {\r\n            if (common.appResult.isSucceeded(res)) {\r\n              table.reload(\"LAY-dizhiTable\");\r\n              layer.msg(\"数据删除成功!\", { icon: 6 });\r\n            } else {\r\n              common.appResult.loadErrorText(res);\r\n            }\r\n          })\r\n          .fail(err => {\r\n            console.log(err);\r\n          });\r\n      },\r\n      edit: function(para) {\r\n        var dataBean = layui.consts.basePostData();\r\n       \r\n        common\r\n          .ajaxFun(\"get\", \"/api/Address/query/key?Data.Id=\"+para.Id+\"&Method=key\",\"\",option)\r\n          .then(function(res) {\r\n            if (common.appResult.isSucceeded(res)) {\r\n              var res = res.Result\r\n              layer.open({\r\n                type: 1,\r\n                title: \"修改地址档案\",\r\n                content: $('#lock-from'),\r\n                maxmin: true,\r\n                area: [\"800px\", \"500px\"],\r\n                btn: [\"确定\", \"取消\"],\r\n                yes: function(index, layero) {\r\n                  var submit = $(\"#LAY-dizhi-add-submit\");\r\n                   //获取提交的字段\r\n                  //监听提交\r\n                  form.on('submit(LAY-dizhi-add-submit)', function (data) {\r\n                    var field = data.field; //获取提交的字段\r\n                    console.info(field)\r\n                    field.AddressStatus = field.AddressStatus ==\"on\" ? 1 : 2;\r\n                    field.AddressType = Number(field.AddressType);\r\n                    field.AccountDay = Number(field.AccountDay);\r\n                    field.Area_Id_Building = field.Area_Id_Building == \"全部\" ? \"\" : field.Area_Id_Building\r\n                    field.Area_Id_ReadingPoint = field.Area_Id_ReadingPoint == \"全部\" ? \"\" : field.Area_Id_ReadingPoint\r\n                    console.info(field)\r\n                    if(field.AddressType == \"全部\"  ){\r\n                      layer.msg(\"请选择地址类型\", { icon: 5 });\r\n                      \r\n                    }\r\n                    if(field.Area_Id_Village == \"全部\"){\r\n                      layer.msg(\"请选择小区\", { icon: 5 });\r\n                      \r\n                    }\r\n                    //提交 Ajax 成功后，静态更新表格中的数据 \r\n                    var dataBean = layui.consts.basePostData();\r\n                    \r\n                    dataBean.Data = field;\r\n                    dataBean.Data.Id = para.Id;\r\n\r\n                    dataBean.Method=\"update\";\r\n                    var str1 = JSON.stringify(dataBean);\r\n                    console.info(\"data\", str1)\r\n                    common.ajaxFun(\"put\", \"/api/Address/update\", str1,option).then(function(res) {\r\n                      if (common.appResult.isSucceeded(res)) {\r\n                        table.reload(\"LAY-dizhiTable\");\r\n                        $(\"#lock-from\").find('input[type=text],select,input[type=hidden]').each(function() {\r\n                               $(this).val('');\r\n                        });\r\n                        layer.msg(\"数据更新成功!\", { icon: 6 });\r\n                      } else {\r\n                        common.appResult.loadErrorText(res);\r\n                      }\r\n                    })\r\n                    .fail(err => {\r\n                      console.log(err);\r\n                    });\r\n                    \r\n                    });\r\n                    layer.close(index); //关闭弹层\r\n                    submit.trigger(\"click\");\r\n                }\r\n              });\r\n              \r\n              if(res.Area_Id_ReadingPointName){\r\n                $(\"#Area_Id_ReadingPoint\").removeAttr(\"disabled\"); \r\n                $(Area_Id_ReadingPoint).append('<option &nbsp; value='+res.Me.Area_Id_ReadingPoint+'>'+res.Area_Id_ReadingPointName+'</option>');\r\n              }\r\n              console.info(\"res\",res)\r\n              if(res.Me.AddressType == \"2\" ){\r\n                console.info(\"AddressType: \",res.Me.AddressType )\r\n                 $(\"#Area_Id_Building\").attr(\"disabled\",\"disabled\");\r\n                 $(\"#Area_Id_Building\").attr(\"class\",\"layui-btn-disabled\");\r\n                 $(\"#UnitNo\").attr(\"disabled\",\"disabled\");\r\n                 $(\"#FloorNo\").attr(\"disabled\",\"disabled\");\r\n                 $(\"#RoomNo\").attr(\"disabled\",\"disabled\");\r\n                 form.render();\r\n              }else{\r\n                $(\"#Area_Id_Building\").removeAttr(\"disabled\"); \r\n                $(\"#Area_Id_Building\").removeAttr(\"class\",\"layui-btn-disabled\");\r\n                $(\"#RoomNo\").removeAttr(\"disabled\"); \r\n                $(\"#FloorNo\").removeAttr(\"disabled\"); \r\n                $(\"#UnitNo\").removeAttr(\"disabled\");\r\n                form.render();\r\n              }\r\n              form.val(\"lock-from\", {\r\n                \"AddressStatus\": res.Me.AddressStatusName == \"正常\"? \"on\": \"off\"\r\n                ,\"AddressType\": res.Me.AddressType\r\n                ,\"Area_Id_Village\": res.Me.Area_Id_Village\r\n                ,\"Area_Id_ReadingPoint\": res.Me.Area_Id_ReadingPoint\r\n                ,\"Area_Id_Building\": res.Me.Area_Id_Building\r\n                ,\"UnitNo\": res.Me.UnitNo\r\n                ,\"FloorNo\": res.Me.FloorNo\r\n                ,\"RoomNo\": res.Me.RoomNo\r\n                ,\"Address\": res.Me.Address\r\n                ,\"AccountDay\": res.Me.AccountDay\r\n\r\n                ,\"SortNum\": res.Me.SortNum\r\n                ,\"Description\": res.Me.Description\r\n              })\r\n               /*\r\n              $(AddressType).find(\"option:contains(\"+res.AddressTypeName+\")\").removeAttr('selected');\r\n              $(AddressType).find(\"option:contains(\"+res.AddressTypeName+\")\").attr('selected', true);\r\n              $(Area_Id_Village).find(\"option:contains(\"+res.Area_Id_VillageName+\")\").removeAttr('selected');\r\n              $(Area_Id_Village).find(\"option:contains(\"+res.Area_Id_VillageName+\")\").attr('selected', true);\r\n             \r\n              if(res.Area_Id_BuildingName){\r\n                $(Area_Id_Building).find(\"option:contains(\"+res.Area_Id_BuildingName+\")\").attr('selected', true);\r\n              }\r\n              if(res.Area_Id_ReadingPointName){\r\n                $(\"#Area_Id_ReadingPoint\").removeAttr(\"disabled\"); \r\n                $(Area_Id_ReadingPoint).find(\"option:contains(\"+res.Area_Id_ReadingPointName+\")\").attr('selected', true);\r\n              }\r\n              */\r\n              form.render('select');\r\n              \r\n            } else {\r\n              common.appResult.loadErrorText(res);\r\n            }\r\n          })\r\n          .fail(err => {\r\n            console.log(err);\r\n          });\r\n      }\r\n    }\r\n    //事件\r\n    var active = {\r\n      batchdel: function() {\r\n        var checkStatus = table.checkStatus(\"LAY-user-manage\"),\r\n          checkData = checkStatus.data; //得到选中的数据\r\n        if (checkData.length === 0) {\r\n          return layer.msg(\"请选择数据\");\r\n        }\r\n        layer.close(index);\r\n        layer.confirm(\"确定删除吗？\", function(index) {\r\n          table.reload(\"LAY-user-manage\");\r\n          layer.msg(\"已删除\");\r\n        });\r\n      },\r\n      add: function() {\r\n        $(\"#lock-from\").find('input[type=text],select,input[type=hidden]').each(function() {\r\n             $(this).val('');\r\n        });\r\n        layer.open({\r\n          type: 1,\r\n          title: \"添加地址\",\r\n          content: $('#lock-from'),\r\n          maxmin: true,\r\n          area: [\"800px\", \"500px\"],\r\n          btn: [\"确定\", \"取消\"],\r\n          yes: function(index, layero) {\r\n            var submit = $(\"#LAY-dizhi-add-submit\");\r\n            form.on('submit(LAY-dizhi-add-submit)', function (data) {\r\n              var field = data.field;\r\n\r\n              common.ajaxFun(\"get\", \"/api/Common/GetInsertGuid\",\"\",option).then(function(res) {\r\n                if (common.appResult.isSucceeded(res)) {\r\n                  field.Idd = res.Result;\r\n                  field.AddressStatus = field.AddressStatus ==\"on\" ? 1 : 2;\r\n                  field.Area_Id_Building = field.Area_Id_Building == \"全部\" ? \"\" : field.Area_Id_Building\r\n                  field.Area_Id_ReadingPoint = field.Area_Id_ReadingPoint == \"全部\" ? \"\" : field.Area_Id_ReadingPoint\r\n                  //console.info(field)\r\n                  if(field.AddressType == \"全部\"  ){\r\n                      layer.msg(\"请选择地址类型\", { icon: 5 });\r\n                  }else if(field.Area_Id_Village == \"全部\"){\r\n                      layer.msg(\"请选择小区\", { icon: 5 });\r\n                  }else{\r\n                    dizhiSeverEvent.add(field);\r\n                  }\r\n                } else {\r\n                  common.appResult.loadErrorText(res);\r\n                }\r\n              })\r\n              .fail(err => {\r\n                console.log(err);\r\n              });\r\n            });\r\n            submit.trigger(\"click\");\r\n            \r\n          }\r\n        });\r\n      }\r\n    };\r\n    var render = {\r\n      renderSelect: function(data) {\r\n        //console.info(data)\r\n        $(data.element).html('');\r\n        $(data.element).append('<option selected>全部</option>');\r\n        var content\r\n        for(var i in data.items){\r\n          //content += '<option  &nbsp; id='+data.items[i].Me.Id+' &nbsp; value='+data.items[i].Me.Name+'>'+data.items[i].Me.Name+'</option>';\r\n          content += '<option  &nbsp; value='+data.items[i].Me.Id+'>'+data.items[i].Me.Name+'</option>';\r\n        }\r\n\r\n        $(data.element).append(content);\r\n        form.render('select');\r\n      },\r\n      renderAddSelect: function(data) {\r\n        //console.info(data)\r\n        $(data.element).html('');\r\n        $(data.element).append('<option selected>全部</option>');\r\n        var content\r\n        for(var i in data.items){\r\n          content += '<option  &nbsp; value='+data.items[i].Value+'>'+data.items[i].Text+'</option>';\r\n        }\r\n\r\n        $(data.element).append(content);\r\n        form.render('select');\r\n      },\r\n      renderTable: function(){\r\n        table.render({\r\n            elem: \"#LAY-dizhiTable\",\r\n            id:\"LAY-dizhiTable\",\r\n            url: layui.setter.revenueUrl + \"/api/Address/query/list\", //接口\r\n            where:{\"Method\":\"list\"},\r\n            parseData:layui.setter.parseData,\r\n            request: layui.setter.request,\r\n            page:true,\r\n            cols: [\r\n              [ \r\n                { field: \"Address\", title: \"地址\",templet: function(d) {\r\n                    return d.Me.Address;\r\n                  } },\r\n                { field: \"Area_Id_ReadingPoint\",  title: \"抄表点\" ,templet: function(d) {\r\n                    return d.Area_Id_ReadingPointName\r\n                  }},\r\n                { field: \"Area_Id_Village\",  title: \"小区\" ,templet: function(d) {\r\n                    return d.Area_Id_VillageName;\r\n                  }}, \r\n                { field: \"Area_Id_Building\",  title: \"楼栋\" ,templet: function(d) {\r\n                    return d.Area_Id_BuildingName;\r\n                  }},  \r\n                { field: \"AddressStatus\",  title: \"地址状态\" ,templet: function(d) {\r\n                    return d.AddressStatusName\r\n                  }},\r\n                { field: \"AddressType\",  title: \"地址类型\" ,templet: function(d) {\r\n                    return d.AddressTypeName\r\n                    \r\n                  }},\r\n                { field: \"AccountDay\", title: \"帐期\",templet: function(d) {\r\n                    return d.Me.AccountDay;\r\n                  } },\r\n                { field: \"RoomNo\", title: \"房号\",templet: function(d) {\r\n                    return d.Me.RoomNo;\r\n                  } },\r\n                { field: \"UnitNo\", title: \"单元号\",templet: function(d) {\r\n                    return d.Me.UnitNo;\r\n                  } },\r\n                { field: \"FloorNo\", title: \"楼层\",templet: function(d) {\r\n                    return d.Me.FloorNo;\r\n                  } },\r\n                {title: \"操作\",fixed: 'right', align:'center', width:160,toolbar: '#LAY-dizhiTable-barOperation'}\r\n              ]\r\n            ],\r\n            loading: true,\r\n            limit: 10,\r\n            text: \"对不起，加载出现异常！\"\r\n          });\r\n      },\r\n      init: function() {\r\n        dizhiSeverEvent.getAllAvailableRsd_Bld()\r\n        dizhiSeverEvent.getAddtype()\r\n        render.renderTable()\r\n      },\r\n\r\n    }\r\n\r\n\r\n    $(\".layui-btn.layuiadmin-btn-useradmin\").on(\"click\", function() {\r\n      var type = $(this).data(\"type\");\r\n      active[type] ? active[type].call(this) : \"\";\r\n    });\r\n\r\n    $(\".layui-btn.LAY-xiaoqu-search-submit\").on(\"click\", function(data){\r\n      layer.open({\r\n          type: 1,\r\n          title: \"查询营业网点\",\r\n          content: $('#lock-from-xiaoqu'),\r\n          maxmin: true,\r\n          offset: 'auto',\r\n          zIndex :999999999,\r\n          area: [\"800px\", \"500px\"],\r\n          btn: [\"确定\", \"取消\"],\r\n          yes: function(index, layero) {\r\n            console.info(shebeiPar.BusinessHall_Name)\r\n            //$(\"#BusinessHall_Name\").attr({value:shebeiPar.BusinessHall_Name});\r\n            form.val(\"lock-from\", {\r\n              \"BusinessHall_Name\": shebeiPar.BusinessHall_Name // \"name\": \"value\"\r\n            })\r\n            layer.close(index);\r\n          }\r\n      });\r\n    });\r\n    \r\n    form.on('select(Area_Id_Village)', function(data){\r\n      //conole.info(data)\r\n      if(data.value === \"全部\" ){\r\n         $(\"#Area_Id_ReadingPoint\").attr(\"disabled\",\"disabled\");\r\n      }else{\r\n        $(\"#Area_Id_ReadingPoint\").removeAttr(\"disabled\"); \r\n        dizhiSeverEvent.getAllAvailableReadPtByRsd(data.value)\r\n      }\r\n      form.render('select');\r\n      \r\n    });\r\n\r\n    form.on('select(AddressType)', function(data){\r\n      //conole.info(data)\r\n      //2 零散户 , 1 楼栋户\r\n      if(data.value === \"2\" ){\r\n         $(\"#Area_Id_Building\").attr(\"disabled\",\"disabled\");\r\n         $(\"#UnitNo\").attr(\"disabled\",\"disabled\");\r\n         $(\"#FloorNo\").attr(\"disabled\",\"disabled\");\r\n         $(\"#RoomNo\").attr(\"disabled\",\"disabled\");\r\n      }else{\r\n        $(\"#Area_Id_Building\").removeAttr(\"disabled\"); \r\n        $(\"#RoomNo\").removeAttr(\"disabled\"); \r\n        $(\"#FloorNo\").removeAttr(\"disabled\"); \r\n        $(\"#UnitNo\").removeAttr(\"disabled\"); \r\n      }\r\n      form.render('select');\r\n      \r\n    });\r\n\r\n    table.on('tool()', function(obj){ //注：tool是工具条事件名，test是table原始容器的属性 lay-filter=\"对应的值\"\r\n      var data = obj.data; //获得当前行数据\r\n      var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）\r\n      var tr = obj.tr; //获得当前行 tr 的DOM对象\r\n      if(layEvent === 'del'){ //删除\r\n        layer.confirm('真的删除行么', function(index){\r\n          dizhiSeverEvent.delete(data); //删除对应行（tr）的DOM结构，并更新缓存\r\n          layer.close(index);\r\n          //向服务端发送删除指令\r\n        });\r\n      } else if(layEvent === 'edit'){ //编辑\r\n        //do something\r\n        \r\n        //同步更新缓存对应的值\r\n        dizhiSeverEvent.edit(data.Me)\r\n      }\r\n    });\r\n    render.init();\r\n  });\r\n"]}