{"version":3,"sources":["danganguanli/dizhiguanli.js"],"names":["layui","config","base","extend","index","use","$","table","form","common","option","laypage","baseUrl","setter","revenueUrl","village","building","areaStatus","addType","readPtStatus","dizhiSeverEvent","getReadPoint","id","ajaxFun","then","res","appResult","isSucceeded","Result","Me","Name","loadErrorText","fail","err","console","log","getArea","getAllAvailableArea","data","type","status","result","element","name","items","render","renderSelect","getAllAvailableReadPt","info","getAddtype","renderAddSelect","getAreaTypeObj","areaAbleStatus","findObjectByKeyVal","villageSelPara","Value","bulSelPara","getAllAvailableRsd_Bld","getAllAvailableReadPtByRsd","readPAbleStatus","add","layer","closeAll","dataBean","consts","basePostData","Data","Method","str1","JSON","stringify","reload","find","each","this","val","msg","icon","delete","para","load","shade","Id","CompanyId","edit","open","title","content","maxmin","area","btn","yes","layero","submit","on","field","AddressStatus","AddressType","Number","AccountDay","Area_Id_Building","Area_Id_ReadingPoint","Area_Id_Village","close","trigger","Area_Id_ReadingPointName","removeAttr","append","attr","AddressStatusName","UnitNo","FloorNo","RoomNo","Address","SortNum","Description","active","batchdel","checkStatus","checkData","length","confirm","Idd","html","i","Text","renderTable","elem","url","where","parseData","request","page","cols","templet","d","Area_Id_VillageName","Area_Id_BuildingName","AddressTypeName","fixed","align","width","toolbar","loading","limit","text","init","call","offset","zIndex","shebeiPar","BusinessHall_Name","value","obj","layEvent","event","tr"],"mappings":"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","file":"../../../danganguanli/dizhiguanli.js","sourcesContent":["layui\r\n  .config({\r\n    base: \"../../../layuiadmin/\" //静态资源所在路径\r\n  })\r\n  .extend({\r\n    index: \"lib/index\" //主入口模块\r\n  })\r\n  .use([\"index\", \"table\", \"form\",\"consts\",\"common\",], function() {\r\n    \r\n    var $ = layui.$,\r\n    table = layui.table,\r\n    form = layui.form,\r\n    common = layui.common;\r\n    var laypage = layui.laypage;\r\n    var option = {\r\n          baseUrl:layui.setter.revenueUrl\r\n        }\r\n    var villageType = {}\r\n   // var areaStatus = {}\r\n    //用户管理表格渲染\r\n    var village = {}\r\n    var building = {}\r\n    var areaStatus = {}\r\n    var addType = {}\r\n    var readPtStatus = {}\r\n    //服务交互  /api/Area/query/all?Data.AreaType=\r\n    var dizhiSeverEvent = {\r\n      getReadPoint: function(id){\r\n        common.ajaxFun(\"get\", \"/api/ReadingPoint/query/key?Data.id=\"+id+\"&Method=key\",'',option).then(function(res) {\r\n          if (common.appResult.isSucceeded(res)) {\r\n            \r\n            res.Result.Me.Name\r\n          } else {\r\n            common.appResult.loadErrorText(res);\r\n          }\r\n        })\r\n        .fail(err => {\r\n          console.log(err);\r\n        });\r\n      },\r\n      getArea: function(id){\r\n        common.ajaxFun(\"get\", \"/api/Area/query/key?Data.id=\"+id+\"&Method=key\",'',option).then(function(res) {\r\n          if (common.appResult.isSucceeded(res)) {\r\n            \r\n            res.Result.Me.Name\r\n          } else {\r\n            common.appResult.loadErrorText(res);\r\n          }\r\n        })\r\n        .fail(err => {\r\n          console.log(err);\r\n        });\r\n      },\r\n      getAllAvailableArea: function(data){\r\n        common.ajaxFun(\"get\", \"/api/Area/query/all?Data.AreaType=\"+data.type+\"&Data.Status=\"+data.status+\"&Method=all\",'',option).then(function(res) {\r\n          if (common.appResult.isSucceeded(res)) {\r\n            var result = {element:data.name,items:res.Result}\r\n\r\n            render.renderSelect(result)\r\n          } else {\r\n            common.appResult.loadErrorText(res);\r\n          }\r\n        })\r\n        .fail(err => {\r\n          console.log(err);\r\n        });\r\n      },\r\n      getAllAvailableReadPt: function(data){\r\n        console.info(data)\r\n        common.ajaxFun(\"get\", \"/api/ReadingPoint/query/all?Data.Area_Id_Village=\"+data.id+\"&Data.Status=\"+data.status+\"&Method=all\",'',option).then(function(res) {\r\n          if (common.appResult.isSucceeded(res)) {\r\n            var result = {element:\"#Area_Id_ReadingPoint\",items:res.Result}\r\n\r\n            render.renderSelect(result)\r\n          } else {\r\n            common.appResult.loadErrorText(res);\r\n          }\r\n        })\r\n        .fail(err => {\r\n          console.log(err);\r\n        });\r\n      },\r\n      getAddtype: function(data){\r\n        common.ajaxFun(\"get\", \"/api/Address/addresstype?Method=addresstype\",'',option).then(function(res) {\r\n          if (common.appResult.isSucceeded(res)) {\r\n            addType = res\r\n            var result = {element:\"#AddressType\",items:res.Result}\r\n            render.renderAddSelect(result)\r\n          } else {\r\n            common.appResult.loadErrorText(res);\r\n          }\r\n        })\r\n        .fail(err => {\r\n          console.log(err);\r\n        });\r\n      },\r\n      getAreaTypeObj: function(){\r\n        common.ajaxFun(\"get\", \"/api/Area/areatype?Method=areatype\",'',option).then(function(res) {\r\n          if (common.appResult.isSucceeded(res)) {\r\n            var areaAbleStatus = common.findObjectByKeyVal(areaStatus,\"Text\",'启用')\r\n            village = common.findObjectByKeyVal(res,\"Text\",'小区')\r\n            building = common.findObjectByKeyVal(res,\"Text\",'楼栋')\r\n            var villageSelPara = {name:\"#Area_Id_Village\", status:areaAbleStatus.Value, type:village.Value}\r\n            var bulSelPara = {name:\"#Area_Id_Building\", status:areaAbleStatus.Value, type:building.Value}\r\n            //console.info(village)\r\n            //console.info(villageSelPara)\r\n            dizhiSeverEvent.getAllAvailableArea(villageSelPara)\r\n            dizhiSeverEvent.getAllAvailableArea(bulSelPara)\r\n            //render.renderSelect(villageSelPara)\r\n            //render.renderSelect(bulSelPara)\r\n            \r\n          } else {\r\n            common.appResult.loadErrorText(res);\r\n          }\r\n        })\r\n        .fail(err => {\r\n          console.log(err);\r\n        });\r\n      },\r\n      getAllAvailableRsd_Bld: function() {\r\n        common.ajaxFun(\"get\", \"/api/Area/areastatus?Method=areastatus\",'',option).then(function(res) {\r\n          if (common.appResult.isSucceeded(res)) {\r\n\r\n            areaStatus  = res\r\n            dizhiSeverEvent.getAreaTypeObj()\r\n          } else {\r\n            common.appResult.loadErrorText(res);\r\n          }\r\n        })\r\n        .fail(err => {\r\n          console.log(err);\r\n        });\r\n      },\r\n      getAllAvailableReadPtByRsd: function(id) {\r\n        common.ajaxFun(\"get\", \"/api/ReadingPoint/readingpointstatus?Method=readingpointstatus\",'',option).then(function(res) {\r\n          if (common.appResult.isSucceeded(res)) {\r\n            readPtStatus = res\r\n            var readPAbleStatus  = common.findObjectByKeyVal(readPtStatus,\"Text\",'启用')\r\n            var data = {id : id, status:readPAbleStatus.Value}\r\n            dizhiSeverEvent.getAllAvailableReadPt(data)\r\n          } else {\r\n            common.appResult.loadErrorText(res);\r\n          }\r\n        })\r\n        .fail(err => {\r\n          console.log(err);\r\n        });\r\n      },\r\n      add: function(data) {\r\n        layer.closeAll();\r\n        var dataBean = layui.consts.basePostData();\r\n        dataBean.Data = data;\r\n        dataBean.Method=\"insert\";\r\n        \r\n        \r\n        var str1 = JSON.stringify(dataBean);\r\n        //console.log(str1);\r\n        common\r\n          .ajaxFun(\"post\", \"/api/address/insert\", str1,option)\r\n          .then(function(res) {\r\n            if (common.appResult.isSucceeded(res)) {\r\n              table.reload(\"LAY-dizhiTable\");\r\n              $(\"#lock-from\").find('input[type=text],select,input[type=hidden]').each(function() {\r\n                   $(this).val('');\r\n              });\r\n              layer.msg(\"数据添加成功!\", { icon: 6 });\r\n            } else {\r\n              common.appResult.loadErrorText(res);\r\n            }\r\n          })\r\n          .fail(err => {\r\n            console.log(err);\r\n          });\r\n      },\r\n      delete: function(para) {\r\n        layer.closeAll();\r\n        layer.load(0, { shade: false });\r\n        var dataBean = layui.consts.basePostData();\r\n        console.info(para.Me)\r\n        dataBean.Data = {Id:para.Me.Id,CompanyId:\"\"}\r\n        dataBean.Method = \"remove\"\r\n        var str1 = JSON.stringify(dataBean);\r\n        console.info(str1)\r\n        common\r\n          .ajaxFun(\"delete\", \"/api/Address/remove\", str1,option)\r\n          .then(function(res) {\r\n            if (common.appResult.isSucceeded(res)) {\r\n              table.reload(\"LAY-dizhiTable\");\r\n              layer.msg(\"数据删除成功!\", { icon: 6 });\r\n            } else {\r\n              common.appResult.loadErrorText(res);\r\n            }\r\n          })\r\n          .fail(err => {\r\n            console.log(err);\r\n          });\r\n      },\r\n      edit: function(para) {\r\n        var dataBean = layui.consts.basePostData();\r\n       \r\n        common\r\n          .ajaxFun(\"get\", \"/api/Address/query/key?Data.Id=\"+para.Id+\"&Method=key\",\"\",option)\r\n          .then(function(res) {\r\n            if (common.appResult.isSucceeded(res)) {\r\n              var res = res.Result\r\n              layer.open({\r\n                type: 1,\r\n                title: \"修改地址档案\",\r\n                content: $('#lock-from'),\r\n                maxmin: true,\r\n                area: [\"800px\", \"500px\"],\r\n                btn: [\"确定\", \"取消\"],\r\n                yes: function(index, layero) {\r\n                  var submit = $(\"#LAY-dizhi-add-submit\");\r\n                   //获取提交的字段\r\n                  //监听提交\r\n                  form.on('submit(LAY-dizhi-add-submit)', function (data) {\r\n                    var field = data.field; //获取提交的字段\r\n                    console.info(field)\r\n                    field.AddressStatus = field.AddressStatus ==\"on\" ? 1 : 2;\r\n                    field.AddressType = Number(field.AddressType);\r\n                    field.AccountDay = Number(field.AccountDay);\r\n                    field.Area_Id_Building = field.Area_Id_Building == \"全部\" ? \"\" : field.Area_Id_Building\r\n                    field.Area_Id_ReadingPoint = field.Area_Id_ReadingPoint == \"全部\" ? \"\" : field.Area_Id_ReadingPoint\r\n                    console.info(field)\r\n                    if(field.AddressType == \"全部\"  ){\r\n                      layer.msg(\"请选择地址类型\", { icon: 5 });\r\n                      \r\n                    }\r\n                    if(field.Area_Id_Village == \"全部\"){\r\n                      layer.msg(\"请选择小区\", { icon: 5 });\r\n                      \r\n                    }\r\n                    //提交 Ajax 成功后，静态更新表格中的数据 \r\n                    var dataBean = layui.consts.basePostData();\r\n                    \r\n                    dataBean.Data = field;\r\n                    dataBean.Data.Id = para.Id;\r\n\r\n                    dataBean.Method=\"update\";\r\n                    var str1 = JSON.stringify(dataBean);\r\n                    console.info(\"data\", str1)\r\n                    common.ajaxFun(\"put\", \"/api/Address/update\", str1,option).then(function(res) {\r\n                      if (common.appResult.isSucceeded(res)) {\r\n                        table.reload(\"LAY-dizhiTable\");\r\n                        $(\"#lock-from\").find('input[type=text],select,input[type=hidden]').each(function() {\r\n                               $(this).val('');\r\n                        });\r\n                        layer.msg(\"数据更新成功!\", { icon: 6 });\r\n                      } else {\r\n                        common.appResult.loadErrorText(res);\r\n                      }\r\n                    })\r\n                    .fail(err => {\r\n                      console.log(err);\r\n                    });\r\n                    \r\n                    });\r\n                    layer.close(index); //关闭弹层\r\n                    submit.trigger(\"click\");\r\n                }\r\n              });\r\n              \r\n              if(res.Area_Id_ReadingPointName){\r\n                $(\"#Area_Id_ReadingPoint\").removeAttr(\"disabled\"); \r\n                $(Area_Id_ReadingPoint).append('<option &nbsp; value='+res.Me.Area_Id_ReadingPoint+'>'+res.Area_Id_ReadingPointName+'</option>');\r\n              }\r\n\r\n              if(res.Me.AddressType === \"2\" ){\r\n                 $(\"#Area_Id_Building\").attr(\"disabled\",\"disabled\");\r\n                 $(\"#UnitNo\").attr(\"disabled\",\"disabled\");\r\n                 $(\"#FloorNo\").attr(\"disabled\",\"disabled\");\r\n                 $(\"#RoomNo\").attr(\"disabled\",\"disabled\");\r\n              }else{\r\n                $(\"#Area_Id_Building\").removeAttr(\"disabled\"); \r\n                $(\"#RoomNo\").removeAttr(\"disabled\"); \r\n                $(\"#FloorNo\").removeAttr(\"disabled\"); \r\n                $(\"#UnitNo\").removeAttr(\"disabled\"); \r\n              }\r\n              form.val(\"lock-from\", {\r\n                \"AddressStatus\": res.Me.AddressStatusName == \"正常\"? \"on\": \"off\"\r\n                ,\"AddressType\": res.Me.AddressType\r\n                ,\"Area_Id_Village\": res.Me.Area_Id_Village\r\n                ,\"Area_Id_ReadingPoint\": res.Me.Area_Id_ReadingPoint\r\n                ,\"Area_Id_Building\": res.Me.Area_Id_Building\r\n                ,\"UnitNo\": res.Me.UnitNo\r\n                ,\"FloorNo\": res.Me.FloorNo\r\n                ,\"RoomNo\": res.Me.RoomNo\r\n                ,\"Address\": res.Me.Address\r\n                ,\"AccountDay\": res.Me.AccountDay\r\n\r\n                ,\"SortNum\": res.Me.SortNum\r\n                ,\"Description\": res.Me.Description\r\n              })\r\n               /*\r\n              $(AddressType).find(\"option:contains(\"+res.AddressTypeName+\")\").removeAttr('selected');\r\n              $(AddressType).find(\"option:contains(\"+res.AddressTypeName+\")\").attr('selected', true);\r\n              $(Area_Id_Village).find(\"option:contains(\"+res.Area_Id_VillageName+\")\").removeAttr('selected');\r\n              $(Area_Id_Village).find(\"option:contains(\"+res.Area_Id_VillageName+\")\").attr('selected', true);\r\n             \r\n              if(res.Area_Id_BuildingName){\r\n                $(Area_Id_Building).find(\"option:contains(\"+res.Area_Id_BuildingName+\")\").attr('selected', true);\r\n              }\r\n              if(res.Area_Id_ReadingPointName){\r\n                $(\"#Area_Id_ReadingPoint\").removeAttr(\"disabled\"); \r\n                $(Area_Id_ReadingPoint).find(\"option:contains(\"+res.Area_Id_ReadingPointName+\")\").attr('selected', true);\r\n              }\r\n              */\r\n              form.render('select');\r\n              \r\n            } else {\r\n              common.appResult.loadErrorText(res);\r\n            }\r\n          })\r\n          .fail(err => {\r\n            console.log(err);\r\n          });\r\n      }\r\n    }\r\n    //事件\r\n    var active = {\r\n      batchdel: function() {\r\n        var checkStatus = table.checkStatus(\"LAY-user-manage\"),\r\n          checkData = checkStatus.data; //得到选中的数据\r\n        if (checkData.length === 0) {\r\n          return layer.msg(\"请选择数据\");\r\n        }\r\n        layer.close(index);\r\n        layer.confirm(\"确定删除吗？\", function(index) {\r\n          table.reload(\"LAY-user-manage\");\r\n          layer.msg(\"已删除\");\r\n        });\r\n      },\r\n      add: function() {\r\n        layer.open({\r\n          type: 1,\r\n          title: \"添加地址\",\r\n          content: $('#lock-from'),\r\n          maxmin: true,\r\n          area: [\"800px\", \"500px\"],\r\n          btn: [\"确定\", \"取消\"],\r\n          yes: function(index, layero) {\r\n            var submit = $(\"#LAY-dizhi-add-submit\");\r\n            form.on('submit(LAY-dizhi-add-submit)', function (data) {\r\n              var field = data.field;\r\n\r\n              common.ajaxFun(\"get\", \"/api/Common/GetInsertGuid\",\"\",option).then(function(res) {\r\n                if (common.appResult.isSucceeded(res)) {\r\n                  field.Idd = res.Result;\r\n                  field.AddressStatus = field.AddressStatus ==\"on\" ? 1 : 2;\r\n                  field.Area_Id_Building = field.Area_Id_Building == \"全部\" ? \"\" : field.Area_Id_Building\r\n                  field.Area_Id_ReadingPoint = field.Area_Id_ReadingPoint == \"全部\" ? \"\" : field.Area_Id_ReadingPoint\r\n                  //console.info(field)\r\n                  if(field.AddressType == \"全部\"  ){\r\n                      layer.msg(\"请选择地址类型\", { icon: 5 });\r\n\r\n                  }else if(field.Area_Id_Village == \"全部\"){\r\n                      layer.msg(\"请选择小区\", { icon: 5 });\r\n                      \r\n                  }else{\r\n                    dizhiSeverEvent.add(field);\r\n                  }\r\n                  \r\n                  \r\n                } else {\r\n                  common.appResult.loadErrorText(res);\r\n                }\r\n              })\r\n              .fail(err => {\r\n                console.log(err);\r\n              });\r\n            });\r\n            submit.trigger(\"click\");\r\n            \r\n          }\r\n        });\r\n      }\r\n    };\r\n    var render = {\r\n      renderSelect: function(data) {\r\n        //console.info(data)\r\n        $(data.element).html('');\r\n        $(data.element).append('<option selected>全部</option>');\r\n        var content\r\n        for(var i in data.items){\r\n          //content += '<option  &nbsp; id='+data.items[i].Me.Id+' &nbsp; value='+data.items[i].Me.Name+'>'+data.items[i].Me.Name+'</option>';\r\n          content += '<option  &nbsp; value='+data.items[i].Me.Id+'>'+data.items[i].Me.Name+'</option>';\r\n        }\r\n\r\n        $(data.element).append(content);\r\n        form.render('select');\r\n      },\r\n      renderAddSelect: function(data) {\r\n        //console.info(data)\r\n        $(data.element).html('');\r\n        $(data.element).append('<option selected>全部</option>');\r\n        var content\r\n        for(var i in data.items){\r\n          content += '<option  &nbsp; value='+data.items[i].Value+'>'+data.items[i].Text+'</option>';\r\n        }\r\n\r\n        $(data.element).append(content);\r\n        form.render('select');\r\n      },\r\n      renderTable: function(){\r\n        table.render({\r\n            elem: \"#LAY-dizhiTable\",\r\n            id:\"LAY-dizhiTable\",\r\n            url: layui.setter.revenueUrl + \"/api/Address/query/list\", //接口\r\n            where:{\"Method\":\"list\"},\r\n            parseData:layui.setter.parseData,\r\n            request: layui.setter.request,\r\n            page:true,\r\n            cols: [\r\n              [ \r\n                { field: \"Address\", title: \"地址\",templet: function(d) {\r\n                    return d.Me.Address;\r\n                  } },\r\n                { field: \"Area_Id_ReadingPoint\",  title: \"抄表点\" ,templet: function(d) {\r\n                    //return dizhiSeverEvent.getReadPoint(d.Me.Area_Id_ReadingPoint)\r\n                    return d.Area_Id_ReadingPointName\r\n                  }},\r\n                { field: \"Area_Id_Village\",  title: \"小区\" ,templet: function(d) {\r\n\r\n                    return d.Area_Id_VillageName;\r\n                  }}, \r\n                { field: \"Area_Id_Building\",  title: \"楼栋\" ,templet: function(d) {\r\n                    return d.Area_Id_BuildingName;\r\n                  }},  \r\n                { field: \"AddressStatus\",  title: \"地址状态\" ,templet: function(d) {\r\n                    return d.AddressStatusName\r\n                  }},\r\n                { field: \"AddressType\",  title: \"地址类型\" ,templet: function(d) {\r\n                    return d.AddressTypeName\r\n                    \r\n                  }},\r\n                { field: \"AccountDay\", title: \"帐期\",templet: function(d) {\r\n                    return d.Me.AccountDay;\r\n                  } },\r\n                { field: \"RoomNo\", title: \"房号\",templet: function(d) {\r\n                    return d.Me.RoomNo;\r\n                  } },\r\n                { field: \"UnitNo\", title: \"单元号\",templet: function(d) {\r\n                    return d.Me.UnitNo;\r\n                  } },\r\n                { field: \"FloorNo\", title: \"楼层\",templet: function(d) {\r\n                    return d.Me.FloorNo;\r\n                  } },\r\n                {title: \"操作\",fixed: 'right', align:'center', width:160,toolbar: '#LAY-dizhiTable-barOperation'}\r\n              ]\r\n            ],\r\n            loading: true,\r\n            limit: 10,\r\n            text: \"对不起，加载出现异常！\"\r\n          });\r\n      },\r\n      init: function() {\r\n        dizhiSeverEvent.getAllAvailableRsd_Bld()\r\n        dizhiSeverEvent.getAddtype()\r\n        render.renderTable()\r\n      },\r\n\r\n    }\r\n\r\n\r\n    $(\".layui-btn.layuiadmin-btn-useradmin\").on(\"click\", function() {\r\n      var type = $(this).data(\"type\");\r\n      active[type] ? active[type].call(this) : \"\";\r\n    });\r\n\r\n    $(\".layui-btn.LAY-xiaoqu-search-submit\").on(\"click\", function(data){\r\n      layer.open({\r\n          type: 1,\r\n          title: \"查询营业网点\",\r\n          content: $('#lock-from-xiaoqu'),\r\n          maxmin: true,\r\n          offset: 'auto',\r\n          zIndex :999999999,\r\n          area: [\"800px\", \"500px\"],\r\n          btn: [\"确定\", \"取消\"],\r\n          yes: function(index, layero) {\r\n            console.info(shebeiPar.BusinessHall_Name)\r\n            //$(\"#BusinessHall_Name\").attr({value:shebeiPar.BusinessHall_Name});\r\n            form.val(\"lock-from\", {\r\n              \"BusinessHall_Name\": shebeiPar.BusinessHall_Name // \"name\": \"value\"\r\n            })\r\n            layer.close(index);\r\n          }\r\n      });\r\n    });\r\n    \r\n    form.on('select(Area_Id_Village)', function(data){\r\n      //conole.info(data)\r\n      if(data.value === \"全部\" ){\r\n         $(\"#Area_Id_ReadingPoint\").attr(\"disabled\",\"disabled\");\r\n      }else{\r\n        $(\"#Area_Id_ReadingPoint\").removeAttr(\"disabled\"); \r\n        dizhiSeverEvent.getAllAvailableReadPtByRsd(data.value)\r\n      }\r\n      form.render('select');\r\n      \r\n    });\r\n\r\n    form.on('select(AddressType)', function(data){\r\n      //conole.info(data)\r\n      //2 零散户 , 1 楼栋户\r\n      if(data.value === \"2\" ){\r\n         $(\"#Area_Id_Building\").attr(\"disabled\",\"disabled\");\r\n         $(\"#UnitNo\").attr(\"disabled\",\"disabled\");\r\n         $(\"#FloorNo\").attr(\"disabled\",\"disabled\");\r\n         $(\"#RoomNo\").attr(\"disabled\",\"disabled\");\r\n      }else{\r\n        $(\"#Area_Id_Building\").removeAttr(\"disabled\"); \r\n        $(\"#RoomNo\").removeAttr(\"disabled\"); \r\n        $(\"#FloorNo\").removeAttr(\"disabled\"); \r\n        $(\"#UnitNo\").removeAttr(\"disabled\"); \r\n      }\r\n      form.render('select');\r\n      \r\n    });\r\n\r\n    table.on('tool()', function(obj){ //注：tool是工具条事件名，test是table原始容器的属性 lay-filter=\"对应的值\"\r\n      var data = obj.data; //获得当前行数据\r\n      var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）\r\n      var tr = obj.tr; //获得当前行 tr 的DOM对象\r\n      if(layEvent === 'del'){ //删除\r\n        layer.confirm('真的删除行么', function(index){\r\n          dizhiSeverEvent.delete(data); //删除对应行（tr）的DOM结构，并更新缓存\r\n          layer.close(index);\r\n          //向服务端发送删除指令\r\n        });\r\n      } else if(layEvent === 'edit'){ //编辑\r\n        //do something\r\n        \r\n        //同步更新缓存对应的值\r\n        dizhiSeverEvent.edit(data.Me)\r\n      }\r\n    });\r\n    render.init();\r\n  });\r\n"]}