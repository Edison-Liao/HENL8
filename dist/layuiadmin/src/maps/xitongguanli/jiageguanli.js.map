{"version":3,"sources":["xitongguanli/jiageguanli.js"],"names":["layui","config","base","extend","index","use","$","form","table","layer","laydate","tree","common","option","baseUrl","setter","revenueUrl","selectedType","render","elem","range","on","this","siblings","length","css","find","obj","data","layEvent","event","tr","console","info","ajaxFun","Me","Id","then","res","appResult","isSucceeded","item","Result","open","type","title","content","maxmin","area","btn","val","PriceVersion","BasePrice","IsLadder","PriceLadderType","PriceLadderTypeName","LadderCycleValue","LadderDatetime","LadderStartDatetime","substr","IsSale","LadderGas1","LadderPrice1","LadderGas2","LadderPrice2","LadderGas3","LadderPrice3","LadderGas4","LadderPrice4","BasePersonCount","PersonLadderAdd1","PersonLadderAdd2","PersonLadderAdd3","PersonLadderAdd4","IsSurcharge","priceSurcharge","PriceSurchargeStart","PriceSurchargeValue","PriceSurchargeDelayMonth","PriceSurchargeDelayDay","PriceDateTime","PriceStartDateTime","PriceEndDateTime","SortNum","Description","loadErrorText","fail","err","log","organ","init","server","getTreeData","showtips","baseData","treeNode","id","nodeData","editFalge","click","html","yes","layero","submit","field","Idd","addType","trigger","JSON","stringify","msg","icon","each","PriceTypeID","split","LadderEndDatetime","addVer","edit","Coding","Name","CompanyCoding","Status","MonthLimitGas","YearLimitGas","confirm","dataBean","consts","basePostData","Data","PageIndex","PageSize","Method","currData","i","name","DataSource","nodeData1","renderTree","url","flage","CompanyName","str1","load","closeAll","reload","delete","target","where","Data.PriceTypeId","parseData","request","page","cols","templet","d","util","toDateString","fixed","align","toolbar","loading","limit","text","nodes","renderTitle","flag","openDeleteConfirm","Title","delet","Flag","getTreeNodeName","treeData"],"mappings":"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","file":"../../../xitongguanli/jiageguanli.js","sourcesContent":["layui\r\n  .config({\r\n    base: \"../../../layuiadmin/\"\r\n  })\r\n  .extend({\r\n    index: \"lib/index\" //主入口模块\r\n  })\r\n  .use([\"index\", \"table\", \"layer\", \"tree\", \"common\", \"consts\", \"haderSerch\",\"laydate\"], function() {\r\n    var $ = layui.$,\r\n      form = layui.form,\r\n      table = layui.table,\r\n      layer = layui.layer,\r\n      tree = layui.tree,\r\n      laydate = layui.laydate,\r\n      common = layui.common;\r\n    var option = {\r\n      baseUrl:layui.setter.revenueUrl,\r\n    }\r\n    var selectedType ={};\r\n    // const obj = { a: 1, b: { c: \"csc\", d: \"cc\" }, d: \"dd\" };\r\n    // console.log(...obj, \"~~~~~~~~~~~\");\r\n    // const a = { ...obj };\r\n    // console.log(a, \"解构\");\r\n    laydate.render({\r\n      elem: '#LadderDatetime'\r\n      ,range: true //指定元素\r\n    });\r\n    laydate.render({\r\n      elem: '#PriceDateTime'\r\n      ,range: true //指定元素\r\n    });\r\n    laydate.render({\r\n      elem: '#PriceSurchargeStar'\r\n    });\r\n    \r\n    $(\"body\").on(\"mousedown\", \".layui-tree a\", function() {\r\n      if (!$(this).siblings(\"ul\").length) {\r\n        $(\".layui-tree a cite\").css(\"color\", \"#333\");\r\n        $(this)\r\n          .find(\"cite\")\r\n          .css(\"color\", \"red\");\r\n      }\r\n    });\r\n\r\n\r\n    table.on('tool()', function(obj){ //注：tool是工具条事件名，test是table原始容器的属性 lay-filter=\"对应的值\"\r\n      var data = obj.data; //获得当前行数据\r\n      var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）\r\n      var tr = obj.tr; //获得当前行 tr 的DOM对象\r\n      if(layEvent === 'detail'){ //查看\r\n        \r\n        console.info(data);\r\n      \r\n        common.ajaxFun(\"get\", \"/api/PriceDetail/query/key?Data.Id=\"+data.Me.Id+\"&Method=key\",\"\",option).then(function(res) {\r\n          if (common.appResult.isSucceeded(res)) {\r\n\r\n            //sconsole.info(res)\r\n            var item = res.Result.Me\r\n            layer.open({\r\n                type: 1,\r\n                title: \"查看价格版本详情\",\r\n                content: $('#lock-detail-from'),\r\n                maxmin: true,\r\n                area: [\"800px\", \"400px\"],\r\n                btn: [\"关闭\"],\r\n            });\r\n            console.info(item)\r\n            form.val(\"lock-detail-from\", {\r\n                \"PriceVersion\": item.PriceVersion // \"name\": \"value\"\r\n                ,\"BasePrice\": item.BasePrice\r\n                ,\"IsLadder\": item.IsLadder\r\n                ,\"PriceLadderType\": item.PriceLadderType\r\n                ,\"PriceLadderTypeName\": item.PriceLadderTypeName\r\n                ,\"LadderCycleValue\": item.LadderCycleValue\r\n                ,\"LadderDatetime\": item.LadderStartDatetime.substr(0,10) //item.LadderStartDatetime\r\n                ,\"IsSale\": item.IsSale\r\n\r\n                ,\"LadderGas1\": item.LadderGas1\r\n                ,\"LadderPrice1\": item.LadderPrice1\r\n                ,\"LadderGas2\": item.LadderGas2\r\n                ,\"LadderPrice2\": item.LadderPrice2\r\n                ,\"LadderGas3\": item.LadderGas3\r\n                ,\"LadderPrice3\": item.LadderPrice3\r\n                ,\"LadderGas4\": item.LadderGas4\r\n                ,\"LadderPrice4\": item.LadderPrice4\r\n\r\n                ,\"BasePersonCount\": item.BasePersonCount\r\n                ,\"PersonLadderAdd1\": item.PersonLadderAdd1\r\n                ,\"PersonLadderAdd2\": item.PersonLadderAdd2\r\n                ,\"PersonLadderAdd3\": item.PersonLadderAdd3\r\n                ,\"PersonLadderAdd4\": item.PersonLadderAdd4\r\n                ,\"IsSurcharge\": item.IsSurcharge\r\n                ,\"priceSurcharge\": item.priceSurcharge\r\n                //,\"priceSurchargeName\": item.priceSurchargeName\r\n\r\n                ,\"PriceSurchargeStart\": item.PriceSurchargeStart\r\n                //,\"PriceSurchargeStartName\": item.PriceSurchargeStartName\r\n                ,\"PriceSurchargeValue\": item.PriceSurchargeValue\r\n                ,\"PriceSurchargeDelayMonth\": item.PriceSurchargeDelayMonth\r\n                ,\"PriceSurchargeDelayDay\": item.PriceSurchargeDelayDay\r\n                ,\"PriceDateTime\":  item.PriceStartDateTime.substr(0,10) + \" - \" + item.PriceEndDateTime.substr(0,10)\r\n                ,\"SortNum\": item.SortNum\r\n                ,\"Description\": item.Description\r\n            })\r\n          } else {\r\n            common.appResult.loadErrorText(res);\r\n          }\r\n        })\r\n        .fail(err => {\r\n          console.log(err);\r\n        });\r\n      \r\n      } \r\n    });\r\n    //organ\r\n    var organ = {\r\n      init: function() {\r\n        this.server.getTreeData();\r\n        this.render.showtips();\r\n        this.event();\r\n      },\r\n      baseData: {\r\n        treeNode: {},\r\n        id: \"\",\r\n        nodeData: {},\r\n        editFalge: false\r\n      },\r\n      event: function() {\r\n        $(\"#refresh\").click(function() {\r\n          $(\"#treeOrgan\").html(\"\");\r\n          organ.server.getTreeData();\r\n          organ.baseData.editFalge = false;\r\n        });\r\n        $(\"#addPriceType\").click(function() {\r\n          layer.open({\r\n            type: 1,\r\n            title: \"添加价格类型\",\r\n            content: $('#lock-from'),\r\n            maxmin: true,\r\n            area: [\"800px\", \"400px\"],\r\n            btn: [\"确定\", \"取消\"],\r\n            yes: function(index, layero) {\r\n              var submit = $(\"#LAY-jiageleixing-add-submit\");\r\n              //获取提交的字段\r\n              //监听提交\r\n              form.on('submit(LAY-jiageleixing-add-submit)', function (data) {\r\n                var field = data.field;\r\n                common.ajaxFun(\"get\", \"/api/Common/GetInsertGuid\",\"\",option).then(function(res) {\r\n                  if (common.appResult.isSucceeded(res)) {\r\n                    field.Idd = res.Result;\r\n                    console.info(field)\r\n                    organ.server.addType(field);\r\n                  } else {\r\n                    common.appResult.loadErrorText(res);\r\n                  }\r\n                })\r\n                .fail(err => {\r\n                  console.log(err);\r\n                });\r\n              });\r\n              submit.trigger(\"click\");\r\n              \r\n            }\r\n          });\r\n        });\r\n        \r\n        $(\"#addPriceVersion\").click(function() {\r\n          console.info(\"addPriceVersion\")\r\n          if(JSON.stringify(selectedType) == \"{}\"){\r\n            layer.msg(\"未选择价格类型，请选择后再进行修改操作\", { icon: 5 });\r\n            return\r\n          }else{\r\n            $(\"#lock-detail-from\").find('input[type=text],select,input[type=hidden]').each(function() {\r\n                   $(this).val('');\r\n            });\r\n            layer.open({\r\n              type: 1,\r\n              title: \"添加价格版本\",\r\n              content: $('#lock-detail-from'),\r\n              maxmin: true,\r\n              area: [\"800px\", \"400px\"],\r\n              btn: [\"确定\", \"取消\"],\r\n              yes: function(index, layero) {\r\n                var submit = $(\"#LAY-jiagebanben-add-submit\");\r\n                //获取提交的字段\r\n                //监听提交\r\n                form.on('submit(LAY-jiagebanben-add-submit)', function (data) {\r\n                  var field = data.field;\r\n                  field.PriceTypeID = selectedType.Id\r\n                  common.ajaxFun(\"get\", \"/api/Common/GetInsertGuid\",\"\",option).then(function(res) {\r\n                    if (common.appResult.isSucceeded(res)) {\r\n                      field.Idd = res.Result;\r\n                      var LadderDatetime = field.LadderDatetime.split(' ');\r\n                      var PriceDateTime = field.PriceDateTime.split(' ');\r\n                      field.PriceStartDateTime = PriceDateTime[0];\r\n                      field.PriceEndDateTime = PriceDateTime[2];\r\n                      field.LadderStartDatetime = LadderDatetime[0];\r\n                      field.LadderEndDatetime = LadderDatetime[2];\r\n                      field.IsLadder = field.IsLadder ==\"on\" ? true : false;\r\n                      field.IsSale = field.IsSale ==\"on\" ? true : false;\r\n                      field.IsSurcharge = field.IsSurcharge ==\"on\" ? true : false;\r\n                      delete(field.PriceDateTime)\r\n                      delete(field.LadderDatetime)\r\n                      organ.server.addVer(field);\r\n                    } else {\r\n                      common.appResult.loadErrorText(res);\r\n                    }\r\n                  })\r\n                  .fail(err => {\r\n                    console.log(err);\r\n                  });\r\n                });\r\n                submit.trigger(\"click\");\r\n                \r\n              }\r\n            });\r\n          }\r\n          \r\n        });\r\n        $(\"#edtPriceType\").click(function() {\r\n          console.info(selectedType)\r\n          if(JSON.stringify(selectedType) == \"{}\"){\r\n            layer.msg(\"未选择价格类型，请选择后再进行修改操作\", { icon: 5 });\r\n            return\r\n          }else{\r\n            layer.open({\r\n              type: 1,\r\n              title: \"修改用气类型\",\r\n              content: $('#lock-from'),\r\n              maxmin: true,\r\n              area: [\"800px\", \"400px\"],\r\n              btn: [\"确定\", \"取消\"],\r\n              yes: function(index, layero) {\r\n                var submit = $(\"#LAY-jiageleixing-add-submit\");\r\n                //获取提交的字段\r\n                //监听提交\r\n                form.on('submit(LAY-jiageleixing-add-submit)', function (data) {\r\n                  var field = data.field;\r\n                  console.info(field)\r\n                  organ.server.edit(field);\r\n                });\r\n                submit.trigger(\"click\");\r\n              }\r\n            });\r\n            form.val(\"lock-from\", {\r\n                \"Coding\": selectedType.Coding // \"name\": \"value\"\r\n                ,\"Name\": selectedType.Name\r\n                ,\"CompanyCoding\": selectedType.CompanyCoding\r\n                ,\"Status\": selectedType.Status\r\n                ,\"MonthLimitGas\": selectedType.MonthLimitGas\r\n                ,\"YearLimitGas\": selectedType.YearLimitGas\r\n                ,\"SortNum\": selectedType.SortNum\r\n                ,\"Description\": selectedType.Description\r\n            })\r\n\r\n          }\r\n        });\r\n        $(\"#delPriceType\").click(function() {\r\n          console.info(selectedType)\r\n          if(JSON.stringify(selectedType) == \"{}\"){\r\n            layer.msg(\"未选择价格类型，请选择后再进行删除操作\", { icon: 5 });\r\n            return\r\n          }else{\r\n            layer.confirm('真的删除行么', function(){\r\n              console.info(selectedType)\r\n              organ.server.delete(selectedType.Id); \r\n            });\r\n          }\r\n        });\r\n      },\r\n      server: {\r\n        getTreeData: function() {\r\n          var dataBean = layui.consts.basePostData();\r\n          dataBean.Data = {};\r\n          dataBean.Data.PageIndex  = \"1\";\r\n          dataBean.Data.PageSize   = \"100\";\r\n          dataBean.Method=\"list\";\r\n          console.log(dataBean);\r\n          var str1 = JSON.stringify(dataBean);\r\n          \r\n          common.ajaxFun(\"get\", \"/api/PriceType/query/list/?Data.PageIndex=\"+dataBean.Data.PageIndex+\"&Data.PageSize=\"+dataBean.Data.PageSize+\"&Method=list\",\"\",option).then(function(res) {\r\n            if (common.appResult.isSucceeded(res)) {\r\n              console.log(res.Result);\r\n              var nodeData = res.Result.DataSource;\r\n              function currData(data) {\r\n                if (data.length > 0) {\r\n                  for (var i = 0; i < data.length; i++) {\r\n                    data[i].name = data[i].Name;\r\n                  }\r\n                }\r\n                return data;\r\n              }\r\n              var nodeData1 = currData(nodeData);\r\n              organ.render.renderTree(nodeData1);\r\n            } else {\r\n              common.appResult.loadErrorText(res);\r\n            }\r\n          })\r\n          .fail(err => {\r\n            console.log(err);\r\n          });\r\n          \r\n        },\r\n        addType: function(data, url, flage) {\r\n          var dataBean = layui.consts.basePostData();\r\n\r\n          dataBean.Data = data;\r\n          dataBean.Data.CompanyCoding = \"88888888\";\r\n          dataBean.Data.CompanyName = \"88888888\";\r\n          dataBean.Method=\"insert\";\r\n          //console.log(data);\r\n          var str1 = JSON.stringify(dataBean);\r\n          layer.load();\r\n          common.ajaxFun(\"post\", \"/api/PriceType/insert\", str1,option).then(function(res) {\r\n            if (common.appResult.isSucceeded(res)) {\r\n              $(\"#lock-from\").find('input[type=text],select,input[type=hidden]').each(function() {\r\n                   $(this).val('');\r\n              });\r\n              $(\"#treeOrgan\").html(\"\");\r\n              organ.server.getTreeData();\r\n              layer.msg(\"数据添加成功!\", { icon: 6 });\r\n            } else {\r\n              common.appResult.loadErrorText(res);\r\n            }\r\n          })\r\n          .fail(err => {\r\n            console.log(err);\r\n          });\r\n          layer.closeAll();\r\n        },\r\n        addVer: function(data, url, flage) {\r\n          var dataBean = layui.consts.basePostData();\r\n          dataBean.Data = data;\r\n          dataBean.Method=\"insert\";\r\n          var str1 = JSON.stringify(dataBean);\r\n          layer.load();\r\n          common.ajaxFun(\"post\", \"/api/PriceDetail/insert\", str1,option).then(function(res) {\r\n            if (common.appResult.isSucceeded(res)) {\r\n              $(\"#lock-from\").find('input[type=text],select,input[type=hidden]').each(function() {\r\n                   $(this).val('');\r\n              });\r\n              table.reload(\"LAY-jiagebanbenTable\");\r\n              layer.msg(\"数据添加成功!\", { icon: 6 });\r\n            } else {\r\n              common.appResult.loadErrorText(res);\r\n            }\r\n          })\r\n          .fail(err => {\r\n            console.log(err);\r\n          });\r\n          layer.closeAll();\r\n        },\r\n        edit: function(data, url) {\r\n          layer.load();\r\n          var dataBean = layui.consts.basePostData();\r\n\r\n          dataBean.Data = data;\r\n          dataBean.Data.CompanyCoding = \"88888888\";\r\n          dataBean.Data.CompanyName = \"88888888\";\r\n          dataBean.Data.Id = selectedType.Id;\r\n          dataBean.Method=\"update\";\r\n          console.log(data);\r\n          var str1 = JSON.stringify(dataBean);\r\n          common.ajaxFun(\"put\", \"/api/PriceType/update\", str1,option).then(function(res) {\r\n            if (common.appResult.isSucceeded(res)) {\r\n              $(\"#lock-from\").find('input[type=text],select,input[type=hidden]').each(function() {\r\n                   $(this).val('');\r\n              });\r\n              $(\"#treeOrgan\").html(\"\");\r\n              organ.server.getTreeData();\r\n              layer.msg(\"数据修改成功!\", { icon: 6 });\r\n            } else {\r\n              common.appResult.loadErrorText(res);\r\n            }\r\n          })\r\n          .fail(err => {\r\n            console.log(err);\r\n          });\r\n          layer.closeAll();\r\n        },\r\n        delete: function(id) {\r\n          layer.load();\r\n          var dataBean = layui.consts.basePostData();\r\n\r\n          dataBean.Data = id;\r\n          dataBean.Method=\"remove\";\r\n          console.log(dataBean);\r\n          var str1 = JSON.stringify(dataBean);\r\n          common.ajaxFun(\"delete\", \"/api/PriceType/remove\", str1,option).then(function(res) {\r\n            if (common.appResult.isSucceeded(res)) {\r\n\r\n              $(\"#treeOrgan\").html(\"\");\r\n              organ.server.getTreeData();\r\n              layer.msg(\"数据删除成功!\", { icon: 6 });\r\n              form.val(\"PriceTypeFrom\", {\r\n                \"Coding\": \"\" // \"name\": \"value\"\r\n                ,\"Name\": \"\"\r\n                ,\"CompanyCoding\": \"\"\r\n                ,\"Status\": \"\"\r\n                ,\"MonthLimitGas\": \"\"\r\n                ,\"YearLimitGas\": \"\"\r\n                ,\"SortNum\": \"\"\r\n                ,\"Description\": \"\"\r\n              })\r\n            } else {\r\n              common.appResult.loadErrorText(res);\r\n            }\r\n          })\r\n          .fail(err => {\r\n            console.log(err);\r\n          });\r\n\r\n        }\r\n      },\r\n      render: {\r\n        renderTree: function(data) {\r\n          //树形渲染\r\n          layui.tree({\r\n            elem: \"#treeOrgan\", //指定元素\r\n            target: \"_blank\", //是否新选项卡打开（比如节点返回href才有效）\r\n            click: function(item) {\r\n              //console.info(item)\r\n              selectedType = item\r\n              form.val(\"PriceTypeFrom\", {\r\n                \"Coding\": selectedType.Coding // \"name\": \"value\"\r\n                ,\"Name\": selectedType.Name\r\n                ,\"CompanyCoding\": selectedType.CompanyCoding\r\n                ,\"Status\": selectedType.Status\r\n                ,\"MonthLimitGas\": selectedType.MonthLimitGas\r\n                ,\"YearLimitGas\": selectedType.YearLimitGas\r\n                ,\"SortNum\": selectedType.SortNum\r\n                ,\"Description\": selectedType.Description\r\n              })\r\n              var jiagebanbenTable = table.render({\r\n                elem: \"#LAY-jiagebanbenTable\",\r\n                id:\"LAY-jiagebanbenTable\",\r\n                url: layui.setter.revenueUrl + \"/api/PriceDetail/query/list\", //接口\r\n                //response:layui.setter.response,\r\n                where:{\"Data.PriceTypeId\":selectedType.Id,\"Method\":\"list\"},\r\n                parseData:layui.setter.parseData,\r\n                request: layui.setter.request,\r\n                page:true,\r\n                cols: [\r\n                  [\r\n                    { field: \"PriceVersion\",  title: \"价格版本\" ,templet: function(d) {\r\n                        return d.Me.PriceVersion;\r\n                      }}, \r\n                    { field: \"IsLadder\",  title: \"是否有阶梯\" ,templet: function(d) {\r\n                        return d.Me.IsLadder? \"是\" : \"无\";\r\n                      }},\r\n                    { field: \"BasePrice\",  title: \"基础价格\" ,templet: function(d) {\r\n                        return d.Me.BasePrice;\r\n                      }},\r\n                     \r\n                    { field: \"LadderStartDatetime\", title: \"阶梯开始时间\",templet: function(d) {\r\n                        return \"<div>\" + layui.util.toDateString(d.LadderStartDatetime) + \"</div>\";\r\n                      } },\r\n                    { field: \"PriceStartDateTime\", title: \"价格开始时间\",templet: function(d) {\r\n                        return \"<div>\" + layui.util.toDateString(d.Me.PriceStartDateTime) + \"</div>\";\r\n                      } },\r\n                    {title: \"操作\",fixed: 'right', align:'center', toolbar: '#LAY-jiagebanbenTable-barOperation'}\r\n                  ]\r\n                ],\r\n                loading: true,\r\n                limit: 10,\r\n                text: \"对不起，加载出现异常！\"\r\n              });\r\n            },\r\n            nodes: data\r\n          });\r\n        },\r\n        renderTitle: function(flag) {\r\n          if (flag === \"roleCatalog\") {\r\n            $(\"#formTitle\").html(\"编辑角色信息分组\");\r\n          } else if (flag === \"roleInfo\") {\r\n            $(\"#formTitle\").html(\"编辑角色信息\");\r\n          }\r\n        },\r\n        showtips: function() {\r\n          common.showtips(\".layui-btn-group button\");\r\n        },\r\n        openDeleteConfirm: function(data) {\r\n          layer.confirm(\r\n            \"你确定要删除<span style='font-weight:bolder'>\" +\r\n              data.Title +\r\n              \"</span>的节点吗?\",\r\n            {\r\n              btn: [\"确定\", \"取消\"], //按钮\r\n              icon: 3\r\n            },\r\n            function() {\r\n              organ.server.delet(data.Flag, data.Id);\r\n            },\r\n            function() {\r\n              console.log(\"取消\");\r\n            }\r\n          );\r\n        }\r\n      },\r\n      currData: {\r\n        getTreeNodeName: function(treeData, id) {\r\n          var title = common.getTreeNodeName(treeData, id, \"name\");\r\n          $(\".topName\").val(title);\r\n          $(\".submit\").html(\"立即修改\");\r\n        }\r\n      }\r\n    };\r\n    organ.init();\r\n  });\r\n"]}