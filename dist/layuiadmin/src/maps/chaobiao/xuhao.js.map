{"version":3,"sources":["chaobiao/xuhao.js"],"names":["layui","config","base","extend","index","use","$","form","table","layer","on","data","field","console","log","reload","where","click","info","zhangben","text","bianma","val","xingming","xuhao","init","baseData","treeNode","id","nodeData","editFalge","server","getSearchData","ajax","type","url","setter","baseUrl","dataType","headers","Accept","Content-Type","success","closeAll","IsSucceed","currData","length","i","name","Title","children","Children","Result","TreeNodes","nodeData1","render","renderTree","msg","icon","error","err","eidtXuhao","dataBean","basePostData","Id","organ","Data","str1","JSON","stringify","load","html","getTreeData","Errors","Description","this","active","call","laypage","elem","count"],"mappings":";EAAA,YAAAA,OACGC,QACCC,KAAM,yBAEPC,QACCC,MAAO,cAERC,KAAK,QAAS,QAAS,SAAU,WAChC,GAAIC,GAAIN,MAAMM,EACZC,EAAOP,MAAMO,KACbC,EAAQR,MAAMQ,KACdC,OAAQT,MAAMS,MAEhBF,EAAKG,GAAG,2BAA4B,SAASC,GAC3C,GAAIC,GAAQD,EAAKC,KACjBC,SAAQC,IAAIH,EAAM,MAElBH,EAAMO,OAAO,cACXC,MAAOJ,MAIXN,EAAE,cAAcW,MAAO,WACrBJ,QAAQK,KAAK,cACb,IAAIC,GAAWb,EAAE,8BAA8Bc,OAC3CC,EAASf,EAAE,WAAWgB,MACtBC,EAAWjB,EAAE,aAAagB,KAC9BT,SAAQK,KAAKC,GACbN,QAAQK,KAAKG,GACbR,QAAQK,KAAKK,IAIf,IAAIC,IACFC,KAAM,aAONC,UACEC,YACAC,GAAI,GACJC,YACAC,WAAW,GAGbC,QACEC,cAAe,WACb1B,EAAE2B,MACAC,KAAM,MACNC,IAAKnC,MAAMoC,OAAOC,QAAU,sBAC5BC,SAAU,OACVC,SACEC,OAAQ,mBACRC,eAAgB,oBAElBC,QAAS,SAAS/B,GAGhB,GAFAF,MAAMkC,SAAS,WACf9B,QAAQC,IAAIH,GACRA,EAAKiC,UAAW,CAAA,GAGTC,GAAT,QAASA,GAASlC,GAChB,GAAIA,EAAKmC,OAAS,EAChB,IAAK,GAAIC,GAAI,EAAGA,EAAIpC,EAAKmC,OAAQC,IAC/BpC,EAAKoC,GAAGC,KAAOrC,EAAKoC,GAAGE,MACvBtC,EAAKoC,GAAGG,SAAWvC,EAAKoC,GAAGI,SACvBxC,EAAKoC,GAAGI,SAASL,OAAS,GAC5BD,EAASlC,EAAKoC,GAAGI,SAIvB,OAAOxC,GAZTE,SAAQC,IAAIH,EAAKyC,OAAOC,UACxB,IAAIxB,GAAWlB,EAAKyC,OAAOC,UAavBC,EAAYT,EAAShB,EACzBL,GAAM+B,OAAOC,WAAWF,OAExB7C,OAAMgD,IAAI,SAAW9C,GAAQ+C,KAAM,KAGvCC,MAAO,SAASC,GACdnD,MAAMkC,WACNlC,MAAMgD,IAAI,UAAYC,KAAM,QAIlCG,UAAW,SAASlD,EAAMwB,GACxB,GAAI2B,GAAW9D,MAAMoC,OAAO2B,YAC5BpD,GAAKqD,GAAKC,MAAMvC,SAASE,GACzBkC,EAASI,KAAOvD,EAChBE,QAAQC,IAAIH,EACZ,IAAIwD,GAAOC,KAAKC,UAAUP,EAC1BrD,OAAM6D,OACNhE,EAAE2B,MACAC,KAAM,MACNC,IAAKnC,MAAMoC,OAAOC,QAAUF,EAAM,IAAM8B,MAAMvC,SAASE,GACvDjB,KAAMwD,EACN7B,SAAU,OACVC,SACEC,OAAQ,mBACRC,eAAgB,oBAElBC,QAAS,SAAS/B,GAChBF,MAAMkC,WACN9B,QAAQC,IAAIH,GACRA,EAAKiC,WACPtC,EAAE,cAAciE,KAAK,IACrBN,MAAMlC,OAAOyC,cACb/D,MAAMgD,IAAI,SAAWC,KAAM,KAE3BjD,MAAMgD,IAAI,WAAa9C,EAAK8D,OAAO,GAAGC,aACpChB,KAAM,KAIZC,MAAO,SAASC,GACdnD,MAAMkC,WACNlC,MAAMgD,IAAI,UAAYC,KAAM,SAqCtClC,GAAMC,OAENnB,EAAE,cAAcI,GAAG,QAAS,WAC1B,GAAIwB,GAAO5B,EAAEqE,MAAMhE,KAAK,OACxBiE,QAAO1C,GAAQ0C,OAAO1C,GAAM2C,KAAKF,MAAQ,KAG3C3E,MAAMK,KAAK,UAAW,SAAU,WAC9B,GAAIyE,GAAU9E,MAAM8E,OACX9E,OAAMS,KAGfqE,GAAQvB,QACNwB,KAAM,QACLC,MAAO","file":"../../../chaobiao/xuhao.js","sourcesContent":["layui\r\n  .config({\r\n    base: \"../../../layuiadmin/\" //静态资源所在路径\r\n  })\r\n  .extend({\r\n    index: \"lib/index\" //主入口模块\r\n  })\r\n  .use([\"index\", \"table\", \"layer\"], function() {\r\n    var $ = layui.$,\r\n      form = layui.form,\r\n      table = layui.table;\r\n      layer = layui.layer;\r\n    //监听搜索\r\n    form.on(\"submit(IccRegist-search)\", function(data) {\r\n      var field = data.field;\r\n      console.log(data, \"数据\");\r\n      //执行重载\r\n      table.reload(\"xuhaoTable\", {\r\n        where: field\r\n      });\r\n    });\r\n\r\n    $(\"#searchBtn\").click( function() {\r\n      console.info(\"hello world\");\r\n      var zhangben = $(\"#zhangben  option:selected\").text();\r\n      var bianma = $(\"#bianma\").val();\r\n      var xingming = $(\"#xingming\").val();\r\n      console.info(zhangben);\r\n      console.info(bianma);\r\n      console.info(xingming);\r\n      \r\n    });\r\n    //xuhao\r\n    var xuhao = {\r\n      init: function() {\r\n        /*\r\n        this.server.getTreeData();\r\n        this.render.showtips();\r\n        this.event();\r\n        */\r\n      },\r\n      baseData: {\r\n        treeNode: {},\r\n        id: \"\",\r\n        nodeData: {},\r\n        editFalge: false\r\n      },\r\n      \r\n      server: {\r\n        getSearchData: function() {\r\n          $.ajax({\r\n            type: \"get\",\r\n            url: layui.setter.baseUrl + \"/api/xuhao/treeview\",\r\n            dataType: \"json\",\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\"\r\n            },\r\n            success: function(data) {\r\n              layer.closeAll(\"loading\");\r\n              console.log(data);\r\n              if (data.IsSucceed) {\r\n                console.log(data.Result.TreeNodes);\r\n                var nodeData = data.Result.TreeNodes;\r\n                function currData(data) {\r\n                  if (data.length > 0) {\r\n                    for (var i = 0; i < data.length; i++) {\r\n                      data[i].name = data[i].Title;\r\n                      data[i].children = data[i].Children;\r\n                      if (data[i].Children.length > 0) {\r\n                        currData(data[i].Children);\r\n                      }\r\n                    }\r\n                  }\r\n                  return data;\r\n                }\r\n                var nodeData1 = currData(nodeData);\r\n                xuhao.render.renderTree(nodeData1);\r\n              } else {\r\n                layer.msg(\"获取数据失败\" + data, { icon: 5 });\r\n              }\r\n            },\r\n            error: function(err) {\r\n              layer.closeAll();\r\n              layer.msg(\"数据操作失败\", { icon: 5 });\r\n            }\r\n          });\r\n        },\r\n        eidtXuhao: function(data, url) {\r\n          var dataBean = layui.setter.basePostData;\r\n          data.Id = organ.baseData.id;\r\n          dataBean.Data = data;\r\n          console.log(data);\r\n          var str1 = JSON.stringify(dataBean);\r\n          layer.load();\r\n          $.ajax({\r\n            type: \"put\",\r\n            url: layui.setter.baseUrl + url + \"/\" + organ.baseData.id,\r\n            data: str1,\r\n            dataType: \"json\",\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\"\r\n            },\r\n            success: function(data) {\r\n              layer.closeAll();\r\n              console.log(data);\r\n              if (data.IsSucceed) {\r\n                $(\"#treeOrgan\").html(\"\");\r\n                organ.server.getTreeData();\r\n                layer.msg(\"修改成功!\", { icon: 6 });\r\n              } else {\r\n                layer.msg(\"增加数据失败! \" + data.Errors[0].Description, {\r\n                  icon: 5\r\n                });\r\n              }\r\n            },\r\n            error: function(err) {\r\n              layer.closeAll();\r\n              layer.msg(\"数据操作失败\", { icon: 5 });\r\n            }\r\n          });\r\n        },\r\n      },\r\n      /*\r\n      render: {\r\n        renderTree: function(data) {\r\n          //树形渲染\r\n          layui.tree({\r\n            elem: \"#treexuhao\", //指定元素\r\n            target: \"_blank\", //是否新选项卡打开（比如节点返回href才有效）\r\n            click: function(item) {\r\n              //点击节点回调\r\n              xuhao.baseData.treeNode = item;\r\n              xuhao.baseData.id = item.Id;\r\n              xuhao.baseData.editFalge = true;\r\n              console.log(xuhao.baseData.treeNode);\r\n              xuhao.render.renderTitle(item.Flag);\r\n              xuhao.server.getNodedata(item.Flag, item.Id);\r\n              xuhao.render.disabledBtton(item.Flag);\r\n              xuhao.currData.getTreeNodeName(data, item.ParentId);\r\n            },\r\n            nodes: data\r\n          });\r\n        },\r\n        \r\n      },\r\n      currData: {\r\n        getTreeNodeName: function(treeData, id) {\r\n          var title = common.getTreeNodeName(treeData, id, \"name\");\r\n          $(\".topName\").val(title);\r\n          $(\".submit\").html(\"立即修改\");\r\n        }\r\n      }\r\n      */\r\n    };\r\n    xuhao.init();\r\n    //按钮操作\r\n    $(\".layui-btn\").on(\"click\", function() {\r\n      var type = $(this).data(\"type\");\r\n      active[type] ? active[type].call(this) : \"\";\r\n    });\r\n\r\n    layui.use(['laypage', 'layer'], function(){\r\n      var laypage = layui.laypage\r\n      ,layer = layui.layer;\r\n      \r\n      //总页数低于页码总数\r\n      laypage.render({\r\n        elem: 'pager'\r\n        ,count: 10 //数据总数\r\n      });\r\n    });\r\n  });\r\n"]}