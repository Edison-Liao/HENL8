{"version":3,"sources":["zhangqi/zhangqiguanli.js"],"names":["layui","config","base","extend","index","use","$","table","wangdianSeverEvent","form","laypage","render","elem","url","setter","baseUrl","where","CompanyCoding","ZutiCoding","parseData","request","page","cols","field","width","title","loading","text","addWangdian","data","layer","closeAll","load","shade","dataBean","basePostData","date","Date","Data","Sign","Method","Timestamp","getTime","str1","JSON","stringify","console","info","ajax","type","async","dataType","headers","Accept","Content-Type","success","log","IsSucceed","msg","icon","reload","error","err","delete","adminCompany","companyList","res","Errors","Description","edit","active","batchdel","checkStatus","checkData","length","close","confirm","open","content","maxmin","area","btn","yes","layero","iframeWindow","window","submitID","submit","find","contents","on","getWangdian","trigger","detail","add","this","call"],"mappings":";EAAA,YAAAA,OACGC,QACCC,KAAM,yBAEPC,QACCC,MAAO,cAERC,KAAK,QAAS,SAAU,WAEvB,GAAIC,GAAIN,MAAMM,EACdC,EAAQP,MAAMO,MA0EVC,GAzEGR,MAAMS,KACCT,MAAMU,QAEMH,EAAMI,QAC9BC,KAAM,2BACNC,IAAKb,MAAMc,OAAOC,QAAU,+BAE5BC,OAAOC,cAAgB,WACjBC,WAAa,MAEbC,UAAUnB,MAAMc,OAAOK,UAC7BC,QAASpB,MAAMc,OAAOM,QACtBC,MAAK,EACLC,QAGMC,MAAO,YACPC,MAAO,IACPC,MAAO,SAEPF,MAAO,SAAUE,MAAO,OAAQD,MAAO,MACvCD,MAAO,aAAcE,MAAO,SAC5BF,MAAO,OAASE,MAAO,SACvBF,MAAO,OAASE,MAAO,WACvBF,MAAO,OAASE,MAAO,YA+B7BC,SAAS,EAETC,KAAM,iBAiBNC,YAAa,SAASC,GACpBC,MAAMC,WACND,MAAME,KAAK,GAAKC,OAAO,GACvB,IAAIC,GAAWlC,MAAMc,OAAOqB,aACxBC,EAAO,GAAIC,KACfR,GAAKZ,cAAc,WACnBY,EAAKX,WAAY,KACjBgB,EAASI,KAAOT,EAEhBA,EAAKU,KAAK,SACVV,EAAKW,OAAO,SACZX,EAAKY,UAAWL,EAAKM,SACrB,IAAIC,GAAOC,KAAKC,UAAUX,EAC1BY,SAAQC,KAAK,OAAQJ,GACrBrC,EAAE0C,MACAC,KAAM,OACNpC,IAAKb,MAAMc,OAAOC,QAAU,2BAC5Bc,KAAMc,EACNO,OAAO,EACPC,SAAU,OACVC,SACEC,OAAQ,mBACRC,eAAgB,oBAElBC,QAAS,SAAS1B,GAChBC,MAAMC,WACNe,QAAQU,IAAI3B,GACRA,EAAK4B,WACP3B,MAAM4B,IAAI,WAAaC,KAAM,IAC7BpD,EAAMqD,OAAO,6BAEbrD,EAAMqD,OAAO,2BACb9B,MAAM4B,IAAI,KAAO7B,GAAQ8B,KAAM,MAGnCE,MAAO,SAASC,GACdhC,MAAMC,WACND,MAAM4B,IAAI,UAAYC,KAAM,QAIlCI,SAAQ,SAASlC,GACfC,MAAMC,WACND,MAAME,KAAK,GAAKC,OAAO,IACvB3B,EAAE0C,MACAC,KAAM,MACNpC,IACEb,MAAMc,OAAOC,QAAU,8CACzBmC,OAAO,EACPK,QAAS,SAAS1B,GAChBiB,QAAQU,IAAI3B,GACRA,EAAK4B,WACP3B,MAAMC,WACNiC,aAAaC,gBAEbnC,MAAMC,WACND,MAAM4B,IAAI,KAAOQ,IAAIC,OAAO,GAAGC,aAAeT,KAAM,MAGxDE,MAAO,SAASC,GACdhC,MAAMC,WACND,MAAM4B,IAAI,UAAYC,KAAM,QAIhCU,KAAM,SAASxC,GACfiB,QAAQU,IAAI3B,MAIZyC,GACFC,SAAU,WACR,GAAIC,GAAcjE,EAAMiE,YAAY,mBAClCC,EAAYD,EAAY3C,IAC1B,OAAyB,KAArB4C,EAAUC,OACL5C,MAAM4B,IAAI,UAEnB5B,MAAM6C,MAAMvE,WACZ0B,OAAM8C,QAAQ,SAAU,SAASxE,GAC/BG,EAAMqD,OAAO,mBACb9B,MAAM4B,IAAI,WAGdW,KAAM,WACJvC,MAAM+C,MACJ5B,KAAM,EACNxB,MAAO,SACPqD,QAAS,gCACTC,QAAQ,EACRC,MAAO,QAAS,SAChBC,KAAM,MACNC,IAAK,SAAS9E,EAAO+E,GACnB,GAAIC,GAAeC,OAAO,qBAAuBjF,GAC/CkF,EAAW,0BACXC,EAASJ,EACNK,KAAK,UACLC,WACAD,KAAK,IAAMF,EAEhBF,GAAapF,MAAMS,KAAKiF,GAAG,UAAYJ,EAAW,IAAK,SACrDzD,GAEA,GAAIN,GAAQM,EAAKN,KACjBf,GAAmBmF,YAAYpE,GAI/BO,MAAM6C,MAAMvE,KAGdmF,EAAOK,QAAQ,aAIrBC,OAAQ,WACN/D,MAAM+C,MACJ5B,KAAM,EACNxB,MAAO,SACPqD,QAAS,gCACTC,QAAQ,EACRC,MAAO,QAAS,SAChBC,KAAM,MACNC,IAAK,SAAS9E,EAAO+E,GACnB,GAAIC,GAAeC,OAAO,qBAAuBjF,GAC/CkF,EAAW,0BACXC,EAASJ,EACNK,KAAK,UACLC,WACAD,KAAK,IAAMF,EAEhBF,GAAapF,MAAMS,KAAKiF,GAAG,UAAYJ,EAAW,IAAK,SACrDzD,GAEA,GAAIN,GAAQM,EAAKN,KACjBf,GAAmBmF,YAAYpE,GAI/BO,MAAM6C,MAAMvE,KAGdmF,EAAOK,QAAQ,aAIrBE,IAAK,WACHhE,MAAM+C,MACJ5B,KAAM,EACNxB,MAAO,SACPqD,QAAS,gCACTC,QAAQ,EACRC,MAAO,QAAS,SAChBC,KAAM,KAAM,MACZC,IAAK,SAAS9E,EAAO+E,GACnB,GAAIC,GAAeC,OAAO,qBAAuBjF,GAC/CkF,EAAW,0BACXC,EAASJ,EACNK,KAAK,UACLC,WACAD,KAAK,IAAMF,EAEhBF,GAAapF,MAAMS,KAAKiF,GAAG,UAAYJ,EAAW,IAAK,SACrDzD,GAEA,GAAIN,GAAQM,EAAKN,KACjBf,GAAmBoB,YAAYL,GAI/BO,MAAM6C,MAAMvE,KAGdmF,EAAOK,QAAQ,aAMvBtF,GAAE,uCAAuCoF,GAAG,QAAS,WACnD,GAAIzC,GAAO3C,EAAEyF,MAAMlE,KAAK,OACxByC,GAAOrB,GAAQqB,EAAOrB,GAAM+C,KAAKD,MAAQ","file":"../../../zhangqi/zhangqiguanli.js","sourcesContent":["layui\r\n  .config({\r\n    base: \"../../../layuiadmin/\" //静态资源所在路径\r\n  })\r\n  .extend({\r\n    index: \"lib/index\" //主入口模块\r\n  })\r\n  .use([\"index\", \"table\"], function() {\r\n    \r\n    var $ = layui.$,\r\n    table = layui.table,\r\n    form = layui.form;\r\n    var laypage = layui.laypage;\r\n    //用户管理表格渲染\r\n    var yingyewangdianTable = table.render({\r\n      elem: \"#LAY-yingyewangdianTable\",\r\n      url: layui.setter.baseUrl + \"/api/BusinessHall/query/list\", //接口\r\n      //response:layui.setter.response,\r\n      where:{\"CompanyCoding\":\"88888888\",\r\n            \"ZutiCoding\":\"00\",\r\n            },\r\n            parseData:layui.setter.parseData,\r\n      request: layui.setter.request,\r\n      page:true,\r\n      cols: [\r\n        [\r\n          {\r\n            field: \"zhangqiId\",\r\n            width: 100,\r\n            title: \"帐期ID\",\r\n          },\r\n          { field: \"Status\", title: \"帐期状态\", width: 100, },\r\n          { field: \"ZutiCoding\", title: \"帐期代码\" },\r\n          { field: \"Name\",  title: \"所属年月\" },\r\n          { field: \"Name\",  title: \"帐期开始时间\" },\r\n          { field: \"Name\",  title: \"帐期结束时间\" },\r\n          //{ field: \"caozuoyuan\",  title: \"主管操作员\" },\r\n          //{ field: \"dizhi\",  title: \"营业网点地址\" ,width: 180},\r\n          //{ field: \"dianhua\",  title: \"联系电话\" },\r\n          //{ field: \"gongzuoshijian\",  title: \"办公时间\" },\r\n          //{ field: \"sex\",  title: \"排序号\" },\r\n          /*\r\n          { field: \"Creator\",  title: \"建档人\" },\r\n          {\r\n            field: \"CreateDate\",\r\n            title: \"建档日期\",\r\n            width: 120,\r\n            sort: true,\r\n            templet: function(d) {\r\n              return \"<div>\" + layui.util.toDateString(d.CreateDate) + \"</div>\";\r\n            }\r\n          },\r\n          { field: \"Updator\",  title: \"更新人\" },\r\n          {\r\n            field: \"UpdateDate\",\r\n            title: \"更新日期\",\r\n            width: 120,\r\n            sort: true,\r\n            templet: function(d) {\r\n              return \"<div>\" + layui.util.toDateString(d.CreateDate) + \"</div>\";\r\n            }\r\n          },\r\n          */\r\n          \r\n        ]\r\n      ],\r\n      loading: true,\r\n      \r\n      text: \"对不起，加载出现异常！\"\r\n    });\r\n\r\n  //分页\r\n    //监听搜索\r\n    /*\r\n    form.on(\"submit(LAY-user-front-search)\", function(data) {\r\n      var field = data.field;\r\n      //执行重载\r\n      table.reload(\"LAY-user-manage\", {\r\n        where: field\r\n      });\r\n    });\r\n    */\r\n\r\n    //服务交互\r\n    var wangdianSeverEvent = {\r\n      addWangdian: function(data) {\r\n        layer.closeAll();\r\n        layer.load(0, { shade: false });\r\n        var dataBean = layui.setter.basePostData;\r\n        var date = new Date();\r\n        data.CompanyCoding=\"88888888\";\r\n        data.ZutiCoding= \"00\";\r\n        dataBean.Data = data;\r\n        \r\n        data.Sign=\"string\";\r\n        data.Method=\"string\";\r\n        data.Timestamp= date.getTime();\r\n        var str1 = JSON.stringify(dataBean);\r\n        console.info(\"data\", str1)\r\n        $.ajax({\r\n          type: \"Post\",\r\n          url: layui.setter.baseUrl + \"/api/BusinessHall/insert\",\r\n          data: str1,\r\n          async: true,\r\n          dataType: \"json\",\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\"\r\n          },\r\n          success: function(data) {\r\n            layer.closeAll();\r\n            console.log(data);\r\n            if (data.IsSucceed) {\r\n              layer.msg(\"添加用户成功!\", { icon: 6 });\r\n              table.reload(\"LAY-yingyewangdianTable\");\r\n            } else {\r\n              table.reload(\"LAY-yingyewangdianTable\");\r\n              layer.msg(\"失败\" + data, { icon: 5 });\r\n            }\r\n          },\r\n          error: function(err) {\r\n            layer.closeAll();\r\n            layer.msg(\"数据操作失败\", { icon: 5 });\r\n          }\r\n        });\r\n      },\r\n      delete: function(data) {\r\n        layer.closeAll();\r\n        layer.load(0, { shade: false });\r\n        $.ajax({\r\n          type: \"get\",\r\n          url:\r\n            layui.setter.baseUrl + \"/api/company/search/pageIndex/1/pageSize/99\",\r\n          async: true,\r\n          success: function(data) {\r\n            console.log(data);\r\n            if (data.IsSucceed) {\r\n              layer.closeAll();\r\n              adminCompany.companyList();\r\n            } else {\r\n              layer.closeAll();\r\n              layer.msg(\"失败\" + res.Errors[0].Description, { icon: 5 });\r\n            }\r\n          },\r\n          error: function(err) {\r\n            layer.closeAll();\r\n            layer.msg(\"数据加载失败\", { icon: 5 });\r\n          }\r\n        });\r\n      },\r\n        edit: function(data) {\r\n        console.log(data);\r\n      }\r\n    };\r\n    //事件\r\n    var active = {\r\n      batchdel: function() {\r\n        var checkStatus = table.checkStatus(\"LAY-user-manage\"),\r\n          checkData = checkStatus.data; //得到选中的数据\r\n        if (checkData.length === 0) {\r\n          return layer.msg(\"请选择数据\");\r\n        }\r\n        layer.close(index);\r\n        layer.confirm(\"确定删除吗？\", function(index) {\r\n          table.reload(\"LAY-user-manage\");\r\n          layer.msg(\"已删除\");\r\n        });\r\n      },\r\n      edit: function() {\r\n        layer.open({\r\n          type: 2,\r\n          title: \"修改营业网点\",\r\n          content: \"../tpl/from/wangdianFrom.html\",\r\n          maxmin: true,\r\n          area: [\"700px\", \"400px\"],\r\n          btn: [\"确定\"],\r\n          yes: function(index, layero) {\r\n            var iframeWindow = window[\"layui-layer-iframe\" + index],\r\n              submitID = \"LAY-wangdian-get-submit\",\r\n              submit = layero\r\n                .find(\"iframe\")\r\n                .contents()\r\n                .find(\"#\" + submitID);\r\n            //监听提交\r\n            iframeWindow.layui.form.on(\"submit(\" + submitID + \")\", function(\r\n              data\r\n            ) {\r\n              var field = data.field; //获取提交的字段\r\n              wangdianSeverEvent.getWangdian(field);\r\n              //提交 Ajax 成功后，静态更新表格中的数据\r\n              //$.ajax({});\r\n\r\n              layer.close(index); //关闭弹层\r\n            });\r\n\r\n            submit.trigger(\"click\");\r\n          }\r\n        });\r\n      },\r\n      detail: function() {\r\n        layer.open({\r\n          type: 0,\r\n          title: \"营业网点详情\",\r\n          content: \"../tpl/from/wangdianFrom.html\",\r\n          maxmin: true,\r\n          area: [\"700px\", \"400px\"],\r\n          btn: [\"确定\"],\r\n          yes: function(index, layero) {\r\n            var iframeWindow = window[\"layui-layer-iframe\" + index],\r\n              submitID = \"LAY-wangdian-get-submit\",\r\n              submit = layero\r\n                .find(\"iframe\")\r\n                .contents()\r\n                .find(\"#\" + submitID);\r\n            //监听提交\r\n            iframeWindow.layui.form.on(\"submit(\" + submitID + \")\", function(\r\n              data\r\n            ) {\r\n              var field = data.field; //获取提交的字段\r\n              wangdianSeverEvent.getWangdian(field);\r\n              //提交 Ajax 成功后，静态更新表格中的数据\r\n              //$.ajax({});\r\n\r\n              layer.close(index); //关闭弹层\r\n            });\r\n\r\n            submit.trigger(\"click\");\r\n          }\r\n        });\r\n      },\r\n      add: function() {\r\n        layer.open({\r\n          type: 2,\r\n          title: \"添加营业网点\",\r\n          content: \"../tpl/from/wangdianFrom.html\",\r\n          maxmin: true,\r\n          area: [\"700px\", \"400px\"],\r\n          btn: [\"确定\", \"取消\"],\r\n          yes: function(index, layero) {\r\n            var iframeWindow = window[\"layui-layer-iframe\" + index],\r\n              submitID = \"LAY-wangdian-add-submit\",\r\n              submit = layero\r\n                .find(\"iframe\")\r\n                .contents()\r\n                .find(\"#\" + submitID);\r\n            //监听提交\r\n            iframeWindow.layui.form.on(\"submit(\" + submitID + \")\", function(\r\n              data\r\n            ) {\r\n              var field = data.field; //获取提交的字段\r\n              wangdianSeverEvent.addWangdian(field);\r\n              //提交 Ajax 成功后，静态更新表格中的数据\r\n              //$.ajax({});\r\n\r\n              layer.close(index); //关闭弹层\r\n            });\r\n\r\n            submit.trigger(\"click\");\r\n          }\r\n        });\r\n      }\r\n    };\r\n\r\n    $(\".layui-btn.layuiadmin-btn-useradmin\").on(\"click\", function() {\r\n      var type = $(this).data(\"type\");\r\n      active[type] ? active[type].call(this) : \"\";\r\n    });\r\n  });\r\n"]}