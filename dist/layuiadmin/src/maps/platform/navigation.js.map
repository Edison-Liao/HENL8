{"version":3,"sources":["platform/navigation.js"],"names":["layui","config","base","extend","index","use","$","form","layer","table","tree","z_treeConfig","common","on","this","siblings","length","css","find","data","field","topName","organ","baseData","editFalge","server","eidtOrgan","addOrgan","console","log","init","getTreeData","ModulePermission","render","showtips","event","treeNode","id","nodeData","isSunNode","treeObj","click","html","addClass","attr","renderFormData","removeClass","moveNodeData","openDeleteConfirm","ajax","type","url","setter","baseUrl","dataType","headers","Accept","Content-Type","success","closeAll","IsSucceed","currData","i","name","Title","children","Children","Result","TreeNodes","nodeData1","renderTree","msg","Errors","Description","icon","error","err","loadSelect","getNodedata","flage","urlID","load","dataNode","dataBean","consts","basePostData","ParentId","AccessType","Data","str1","JSON","stringify","Message","Id","isRise","Flag","delet","alert","callback","onClick","treeOnClick","renderTitle","flag","val","Name","Code","MenuLinkId","disabledBtton","isDisableButton","opGroup","Functions","op","j","MenuLinkMvcId","confirm","btn","getTreeNodeName","treeData","e","node","PidNode","getNodeByTId","parentTId"],"mappings":"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","file":"../../../platform/navigation.js","sourcesContent":["layui\r\n  .config({\r\n    base: \"../../../layuiadmin/\"\r\n  })\r\n  .extend({\r\n    index: \"lib/index\" //主入口模块\r\n  })\r\n  .use(\r\n    [\r\n      \"index\",\r\n      \"laydate\",\r\n      \"table\",\r\n      \"layer\",\r\n      \"tree\",\r\n      \"common\",\r\n      \"consts\",\r\n      \"z_treeConfig\"\r\n    ],\r\n    function() {\r\n      var $ = layui.$,\r\n        form = layui.form,\r\n        table = layui.table,\r\n        layer = layui.layer,\r\n        tree = layui.tree,\r\n        z_treeConfig = layui.z_treeConfig;\r\n      common = layui.common;\r\n\r\n      $(\"body\").on(\"mousedown\", \".layui-tree a\", function() {\r\n        if (!$(this).siblings(\"ul\").length) {\r\n          $(\".layui-tree a cite\").css(\"color\", \"#333\");\r\n          $(this)\r\n            .find(\"cite\")\r\n            .css(\"color\", \"red\");\r\n        }\r\n      });\r\n      //数据表单监听(部门)\r\n      form.on(\"submit(DepartmentFrom)\", function(data) {\r\n        delete data.field.topName;\r\n        if (organ.baseData.editFalge) {\r\n          organ.server.eidtOrgan(data.field, \"/api/Navigation\");\r\n        } else {\r\n          organ.server.addOrgan(data.field, \"/api/Navigation\");\r\n          console.log(\"执行添加命令\");\r\n        }\r\n        return false;\r\n      });\r\n\r\n      //organ\r\n      var organ = {\r\n        init: function() {\r\n          this.server.getTreeData();\r\n          this.server.ModulePermission();\r\n          this.render.showtips();\r\n          this.event();\r\n        },\r\n        baseData: {\r\n          treeNode: {},\r\n          id: \"\",\r\n          nodeData: {},\r\n          editFalge: false,\r\n          isSunNode: false,\r\n          treeObj: {}\r\n        },\r\n        event: function() {\r\n          $(\"#refresh\").click(function() {\r\n            $(\"#treeOrgan\").html(\"\");\r\n            organ.server.getTreeData();\r\n            $(\"#delet\")\r\n              .addClass(\"layui-btn-disabled\")\r\n              .attr(\"disabled\", \"true\");\r\n            organ.baseData.editFalge = false;\r\n          });\r\n          $(\"#showDepartment\").click(function() {\r\n            $(\"#formTitle\").html(\"新增一级信息\");\r\n            $(\"#topName\").addClass(\"layui-hide\");\r\n            $(\".submit\").html(\"立即提交\");\r\n            organ.render.renderFormData(\"clear\");\r\n            organ.baseData.editFalge = false;\r\n            organ.baseData.isSunNode = false;\r\n          });\r\n          $(\"#showPosition\").click(function() {\r\n            $(\"#formTitle\").html(\"新增多级导航信息\");\r\n            $(\"#topName\").removeClass(\"layui-hide\");\r\n            $(\".submit\").html(\"立即提交\");\r\n            organ.render.renderFormData(\"clear\");\r\n            organ.baseData.editFalge = false;\r\n            organ.baseData.isSunNode = true;\r\n          });\r\n          $(\"#lower\").click(function() {\r\n            organ.server.moveNodeData(organ.baseData.treeNode, false);\r\n            organ.baseData.editFalge = false;\r\n          });\r\n          $(\"#upper\").click(function() {\r\n            organ.server.moveNodeData(organ.baseData.treeNode, true);\r\n            organ.baseData.editFalge = false;\r\n          });\r\n          $(\"#delet\").click(function() {\r\n            organ.render.openDeleteConfirm(organ.baseData.treeNode);\r\n          });\r\n        },\r\n        server: {\r\n          getTreeData: function() {\r\n            $.ajax({\r\n              type: \"get\",\r\n              url: layui.setter.baseUrl + \"/api/Navigation/treeview/manager\",\r\n              dataType: \"json\",\r\n              headers: {\r\n                Accept: \"application/json\",\r\n                \"Content-Type\": \"application/json\"\r\n              },\r\n              success: function(data) {\r\n                layer.closeAll(\"loading\");\r\n                console.log(data);\r\n                if (data.IsSucceed) {\r\n                  console.log(data.Result.TreeNodes);\r\n                  var nodeData = data.Result.TreeNodes;\r\n                  function currData(data) {\r\n                    if (data.length > 0) {\r\n                      for (var i = 0; i < data.length; i++) {\r\n                        data[i].name = data[i].Title;\r\n                        data[i].children = data[i].Children;\r\n                        if (data[i].Children.length > 0) {\r\n                          currData(data[i].Children);\r\n                        }\r\n                      }\r\n                    }\r\n                    return data;\r\n                  }\r\n                  var nodeData1 = currData(nodeData);\r\n                  organ.render.renderTree(nodeData1);\r\n                  organ.render.renderFormData(\"clear\");\r\n                } else {\r\n                  layer.msg(\"获取数据失败\" + data.Errors[0].Description, {\r\n                    icon: 5\r\n                  });\r\n                }\r\n              },\r\n              error: function(err) {\r\n                layer.closeAll();\r\n                layer.msg(\"数据操作失败\", { icon: 5 });\r\n              }\r\n            });\r\n          },\r\n          ModulePermission: function() {\r\n            $.ajax({\r\n              type: \"get\",\r\n              url: layui.setter.baseUrl + \"/api/Module/deep/permission\",\r\n              dataType: \"json\",\r\n              headers: {\r\n                Accept: \"application/json\",\r\n                \"Content-Type\": \"application/json\"\r\n              },\r\n              success: function(data) {\r\n                layer.closeAll(\"loading\");\r\n                console.log(data, \"~~~\");\r\n                if (data.IsSucceed) {\r\n                  organ.render.loadSelect(data.Result);\r\n                } else {\r\n                  layer.msg(\"获取数据失败\" + data, { icon: 5 });\r\n                }\r\n              },\r\n              error: function(err) {\r\n                layer.closeAll();\r\n                layer.msg(\"数据操作失败\", { icon: 5 });\r\n              }\r\n            });\r\n          },\r\n          getNodedata: function(flage, id) {\r\n            console.log(\"执行\");\r\n            var urlID = \"\";\r\n            if (flage === \"nav\") {\r\n              urlID = \"/api/Navigation/\" + id;\r\n            } else {\r\n              return;\r\n            }\r\n            layer.load(2);\r\n            $.ajax({\r\n              type: \"get\",\r\n              url: layui.setter.baseUrl + urlID,\r\n              dataType: \"json\",\r\n              headers: {\r\n                Accept: \"application/json\",\r\n                \"Content-Type\": \"application/json\"\r\n              },\r\n              success: function(data) {\r\n                layer.closeAll();\r\n                console.log(data);\r\n                if (data.IsSucceed) {\r\n                  organ.baseData.nodeData = data.Result;\r\n                  var dataNode = data.Result;\r\n                  organ.render.renderFormData(flage, dataNode);\r\n                }\r\n              },\r\n              error: function(err) {\r\n                layer.closeAll();\r\n                layer.msg(\"数据操作失败\", { icon: 5 });\r\n              }\r\n            });\r\n          },\r\n          addOrgan: function(data, url, flage) {\r\n            //var dataBean = layui.setter.basePostData;\r\n\r\n            var dataBean = layui.consts.basePostData(\"CreateNavigation\");\r\n\r\n            if (organ.baseData.isSunNode) {\r\n              data.ParentId = organ.baseData.id;\r\n            }\r\n            data.AccessType = \"mvc\";\r\n            dataBean.Data = data;\r\n\r\n            var str1 = JSON.stringify(dataBean);\r\n            layer.load();\r\n            $.ajax({\r\n              type: \"post\",\r\n              url: layui.setter.baseUrl + url,\r\n              data: str1,\r\n              dataType: \"json\",\r\n              headers: {\r\n                Accept: \"application/json\",\r\n                \"Content-Type\": \"application/json\"\r\n              },\r\n              success: function(data) {\r\n                layer.closeAll();\r\n                console.log(data);\r\n                if (data.IsSucceed) {\r\n                  $(\"#treeOrgan\").html(\"\");\r\n                  organ.server.getTreeData();\r\n                  layer.msg(\"添加成功!\", { icon: 6 });\r\n                } else {\r\n                  layer.msg(\"增加数据失败! \" + data.Errors[0].Message, {\r\n                    icon: 5\r\n                  });\r\n                }\r\n              },\r\n              error: function(err) {\r\n                layer.closeAll();\r\n                layer.msg(\"数据操作失败\", { icon: 5 });\r\n              }\r\n            });\r\n          },\r\n          eidtOrgan: function(data, url) {\r\n            var dataBean = layui.consts.basePostData();\r\n            data.Id = organ.baseData.id;\r\n            dataBean.Data = data;\r\n            var str1 = JSON.stringify(dataBean);\r\n            layer.load();\r\n            $.ajax({\r\n              type: \"put\",\r\n              url: layui.setter.baseUrl + url + \"/\" + organ.baseData.id,\r\n              data: str1,\r\n              dataType: \"json\",\r\n              headers: {\r\n                Accept: \"application/json\",\r\n                \"Content-Type\": \"application/json\"\r\n              },\r\n              success: function(data) {\r\n                layer.closeAll();\r\n                console.log(data);\r\n                if (data.IsSucceed) {\r\n                  $(\"#treeOrgan\").html(\"\");\r\n                  organ.server.getTreeData();\r\n                  layer.msg(\"修改成功!\", { icon: 6 });\r\n                } else {\r\n                  layer.msg(\"增加数据失败! \" + data.Errors[0].Message, {\r\n                    icon: 5\r\n                  });\r\n                }\r\n              },\r\n              error: function(err) {\r\n                layer.closeAll();\r\n                layer.msg(\"数据操作失败\", { icon: 5 });\r\n              }\r\n            });\r\n          },\r\n          moveNodeData: function(data, isRise) {\r\n            var urlID = \"\";\r\n            if (data.Flag === \"nav\") {\r\n              urlID = \"/api/Organ/department/\" + data.Id + \"/order/\" + isRise;\r\n            } else if (data.Flag === \"position\") {\r\n              urlID = \"/api/Organ/position/\" + data.Id + \"/order/\" + isRise;\r\n            } else {\r\n              return;\r\n            }\r\n            layer.msg(\"暂未开放\");\r\n            return;\r\n            layer.load();\r\n            $.ajax({\r\n              type: \"put\",\r\n              url: layui.setter.baseUrl + urlID,\r\n              dataType: \"json\",\r\n              headers: {\r\n                Accept: \"application/json\",\r\n                \"Content-Type\": \"application/json\"\r\n              },\r\n              success: function(data) {\r\n                layer.closeAll(\"loading\");\r\n                console.log(data);\r\n                if (data.IsSucceed) {\r\n                  $(\"#treeOrgan\").html(\"\");\r\n                  organ.server.getTreeData();\r\n                  layer.msg(\"数据移动成功\", { icon: 1 });\r\n                } else {\r\n                  layer.msg(\"数据操作失败\" + data.Errors[0].Description, {\r\n                    icon: 5\r\n                  });\r\n                }\r\n              },\r\n              error: function(err) {\r\n                layer.closeAll();\r\n                layer.msg(\"数据操作失败\", { icon: 5 });\r\n              }\r\n            });\r\n          },\r\n          delet: function(flage, id) {\r\n            layer.load();\r\n            var urlID = \"\";\r\n            if (flage === \"nav\") {\r\n              urlID = \"/api/Navigation/\" + id;\r\n            }\r\n            $.ajax({\r\n              type: \"DELETE\",\r\n              url: layui.setter.baseUrl + urlID,\r\n              dataType: \"json\",\r\n              headers: {\r\n                Accept: \"application/json\",\r\n                \"Content-Type\": \"application/json\"\r\n              },\r\n              success: function(data) {\r\n                layer.closeAll();\r\n                console.log(data);\r\n                if (data.IsSucceed) {\r\n                  $(\"#treeOrgan\").html(\"\");\r\n                  organ.server.getTreeData();\r\n                  layer.alert(\"删除成功\", {\r\n                    icon: 1\r\n                  });\r\n                } else {\r\n                  layer.msg(\"获取节点数据失败! \" + data.Errors[0].Description, {\r\n                    icon: 5\r\n                  });\r\n                }\r\n              },\r\n              error: function(err) {\r\n                layer.closeAll();\r\n                layer.msg(\"数据操作失败\", { icon: 5 });\r\n              }\r\n            });\r\n          }\r\n        },\r\n        render: {\r\n          // renderTree: function(data) {\r\n          //   //树形渲染\r\n          //   layui.tree({\r\n          //     elem: \"#treeOrgan\", //指定元素\r\n          //     target: \"_blank\", //是否新选项卡打开（比如节点返回href才有效）\r\n          //     click: function(item) {\r\n          //       //点击节点回调\r\n          //       organ.baseData.treeNode = item;\r\n          //       organ.baseData.id = item.Id;\r\n          //       organ.baseData.editFalge = true;\r\n          //       console.log(organ.baseData.treeNode);\r\n          //       organ.server.getNodedata(item.Flag, item.Id);\r\n          //       organ.render.renderTitle(item.Flag);\r\n          //       organ.render.disabledBtton(item.Flag);\r\n          //       organ.currData.getTreeNodeName(data, item.ParentId);\r\n          //     },\r\n          //     nodes: data\r\n          //   });\r\n          // },\r\n          renderTree: function(data) {\r\n            //渲染树 1.数据 2.DOM节点 3.配置项目\r\n\r\n            organ.baseData.treeObj = layui.z_treeConfig.renderTree(\r\n              data,\r\n              \"treeOrgan\",\r\n              {\r\n                callback: {\r\n                  onClick: organ.currData.treeOnClick\r\n                }\r\n              }\r\n            );\r\n          },\r\n          renderTitle: function(flag, data) {\r\n            $(\"#formTitle\").html(\"修改导航信息\");\r\n          },\r\n          renderFormData: function(flag, data) {\r\n            console.log(data, \"待填充的数据信息\");\r\n            if (flag === \"nav\") {\r\n              form.val(\"DepartmentFrom\", {\r\n                Name: data.Name,\r\n                Code: data.Code,\r\n                MenuLinkId: data.MenuLinkId,\r\n                Description: data.Description\r\n              });\r\n            } else if (flag == \"clear\") {\r\n              form.val(\"DepartmentFrom\", {\r\n                Name: \"\",\r\n                Code: \"\",\r\n                MenuLinkId: \"\",\r\n                Description: \"\"\r\n              });\r\n            }\r\n          },\r\n          disabledBtton: function(flage) {\r\n            common.isDisableButton(\"#delet\", false);\r\n            common.isDisableButton(\"#lower\", false);\r\n            common.isDisableButton(\"#upper\", false);\r\n            common.isDisableButton(\"#showPosition\", false);\r\n          },\r\n          loadSelect: function(data) {\r\n            console.log(data);\r\n            var opGroup = \"<option value=''></option>\";\r\n            for (var i = 0; i < data.length; i++) {\r\n              console.log(i);\r\n              opGroup += \"<optgroup label='\" + data[i].Name + \"'>\";\r\n              if (data[i].Functions.length > 0) {\r\n                var op = data[i].Functions;\r\n                console.log(op);\r\n                for (var j = 0; j < op.length; j++) {\r\n                  opGroup +=\r\n                    \"<option value=\" +\r\n                    op[j].MenuLinkMvcId +\r\n                    \">\" +\r\n                    op[j].Name +\r\n                    \"</option>\";\r\n                }\r\n              }\r\n              opGroup += \"</optgroup>\";\r\n            }\r\n\r\n            //分组信息改造\r\n\r\n            $(\"#MenuLinkId\").html(opGroup);\r\n            form.render();\r\n          },\r\n          showtips: function() {\r\n            common.showtips(\".layui-btn-group button\");\r\n          },\r\n          openDeleteConfirm: function(data) {\r\n            layer.confirm(\r\n              \"你确定要删除<span style='font-weight:bolder'>\" +\r\n                data.Title +\r\n                \"</span>的节点吗?\",\r\n              {\r\n                btn: [\"确定\", \"取消\"], //按钮\r\n                icon: 3\r\n              },\r\n              function() {\r\n                console.log(\"确认\", data);\r\n                organ.server.delet(data.Flag, data.Id);\r\n              },\r\n              function() {\r\n                console.log(\"取消\");\r\n              }\r\n            );\r\n          }\r\n        },\r\n        currData: {\r\n          getTreeNodeName: function(treeData, id) {},\r\n          treeOnClick: function(e, id, node) {\r\n            console.log(node);\r\n            organ.baseData.treeNode = node;\r\n            organ.baseData.id = node.Id;\r\n            organ.baseData.editFalge = true;\r\n            console.log(organ.baseData.treeNode);\r\n            organ.server.getNodedata(node.Flag, node.Id);\r\n            organ.render.renderTitle(node.Flag);\r\n            organ.render.disabledBtton(node.Flag);\r\n            //organ.currData.getTreeNodeName(data, node.ParentId);\r\n            var PidNode = organ.baseData.treeObj.getNodeByTId(node.parentTId);\r\n\r\n            $(\".topName\").val(PidNode.Title);\r\n            $(\".submit\").html(\"立即修改\");\r\n          }\r\n        }\r\n      };\r\n      organ.init();\r\n      console.log(\"导航信息管理``````!!\");\r\n    }\r\n  );\r\n"]}