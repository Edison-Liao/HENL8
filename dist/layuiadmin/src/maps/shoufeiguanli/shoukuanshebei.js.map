{"version":3,"sources":["shoufeiguanli/shoukuanshebei.js"],"names":["layui","config","base","extend","index","use","$","table","form","shebeiPar","laypage","render","elem","id","url","setter","baseUrl","where","Data.CompanyCoding","Method","parseData","request","cols","type","fixed","field","title","templet","d","Me","Id","Name","page","loading","limit","align","text","FixedUserFlag","Status","departments","department","position","assistant","pca","width","Coding","Mac","FixedUser_Name","SortNum","Description","sort","util","toDateString","CreateDate","toolbar","keys","ckeys","init","province","city","area","initprovince","initcity","initarea","length","html","append","i","Title","formRender","on","data","cs","value","Children","find","attr","next","removeClass","click","formHidden","console","info","val","FixedUser_Id","obj","shoukuanSeverEvent","add","para","layer","closeAll","load","shade","dataBean","consts","basePostData","Data","CompanyCoding","CompanyName","str1","JSON","stringify","ajax","async","dataType","headers","Accept","Content-Type","success","IsSucceed","msg","icon","reload","each","this","Errors","Message","error","err","delete","Key","edit","BusinessHall_Name","res","Result","open","content","maxmin","btn","yes","layero","submit","BusinessHall_Id","close","trigger","findObjectByKeyVal","ParentId","removeAttr","active","batchdel","checkStatus","checkData","confirm","magUrl","TreeNodes","Idd","call","offset","zIndex","checked","layEvent","event","tr","re","key","hasOwnProperty","found"],"mappings":"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","file":"../../../shoufeiguanli/shoukuanshebei.js","sourcesContent":["layui\r\n  .config({\r\n    base: \"../../../layuiadmin/\" //静态资源所在路径\r\n  })\r\n  .extend({\r\n    index: \"lib/index\" //主入口模块\r\n  })\r\n  .use([\"index\", \"table\",'consts'], function() {\r\n    \r\n    var $ = layui.$,\r\n    table = layui.table,\r\n    form = layui.form;\r\n    var laypage = layui.laypage;\r\n\r\n    var wangdianTable = table.render({\r\n      elem: \"#LAY-yingyewangdian_SKTable\",\r\n      id:\"LAY-yingyewangdian_SKTable\",\r\n      url: layui.setter.baseUrl + \"/api/BusinessHall/query/list\", //接口\r\n      //response:layui.setter.response,\r\n      where:{\"Data.CompanyCoding\":\"88888888\",\"Method\":\"list\"},\r\n      parseData:layui.setter.parseData,\r\n      request: layui.setter.request,\r\n      cols: [\r\n        [\r\n          {type: 'radio', fixed: 'left'},\r\n          {\r\n            field: \"Id\",\r\n            title: \"营业网点ID\",templet: function(d) {\r\n              return d.Me.Id;\r\n            }\r\n          },\r\n          { field: \"Name\",  title: \"营业网点名称\",templet: function(d) {\r\n              return d.Me.Name;\r\n            } },\r\n        ]\r\n      ],\r\n      page:true,\r\n      loading: true,\r\n      limit: 10,\r\n  \r\n      align:\"center\",\r\n      text: \"对不起，加载出现异常！\"\r\n    });\r\n    var shebeiPar={FixedUserFlag: false,\r\n                   Status:2,\r\n    }\r\n    var departments = {}\r\n    var department = {}\r\n    var position = {}\r\n    var assistant = {}\r\n    //用户管理表格渲染\r\n    var shoukuanshebeiTable = table.render({\r\n      elem: \"#LAY-shoukuanmanageTable\",\r\n      id:\"LAY-shoukuanmanageTable\",\r\n      url: layui.setter.baseUrl + \"/api/BusinessHallDevice/query/list\", //接口\r\n      where:{\"Data.CompanyCoding\":\"88888888\",\"Method\":\"list\"},\r\n      parseData:layui.setter.parseData,\r\n      request: layui.setter.request,\r\n      page:true,\r\n      cols: [\r\n        [\r\n          { field: \"BusinessHall_Name\", title: \"营业网点名称\", width: 100, },\r\n          { field: \"StatusName\", title: \"设备状态\" },\r\n          { field: \"Coding\",  title: \"设备编码\",templet: function(d) {\r\n              return d.Me.Coding;\r\n            } },\r\n          { field: \"Name\",  title: \"设备名称\",templet: function(d) {\r\n              return d.Me.Name;\r\n            } },\r\n          { field: \"Mac\",  title: \"特征标识（MAC）\",\r\n            templet: function(d) {\r\n              return d.Me.Mac;\r\n            }},\r\n          { field: \"FixedUserFlag\",  title: \"指定营业员\",templet: function(d) {\r\n              return d.Me.FixedUserFlag;\r\n            } },\r\n          { field: \"FixedUser_Name\",  title: \"指定营业员名称\",templet: function(d) {\r\n              return d.Me.FixedUser_Name;\r\n            } },\r\n          { field: \"SortNum\",  title: \"排序号\",templet: function(d) {\r\n              return d.Me.SortNum;\r\n            } },\r\n          { field: \"Description\",  title: \"描述\",templet: function(d) {\r\n              return d.Me.Description;\r\n            } },\r\n          {\r\n            field: \"CreateDate\",\r\n            title: \"建档日期\",\r\n            sort: true,\r\n            templet: function(d) {\r\n              return \"<div>\" + layui.util.toDateString(d.Me.CreateDate) + \"</div>\";\r\n            }\r\n          },\r\n          {\r\n            field: \"ModifyDate\",\r\n            title: \"更新日期\",\r\n            sort: true,\r\n            templet: function(d) {\r\n              return \"<div>\" + layui.util.toDateString(d.Me.CreateDate) + \"</div>\";\r\n            }\r\n          },\r\n          {\r\n            title: \"操作\",\r\n            align: \"center\",\r\n            width:160,\r\n            toolbar: '#LAY-shebeiTable-barOperation'\r\n          }\r\n        ]\r\n      ],\r\n      loading: true,\r\n   \r\n      limit: 10,\r\n      text: \"对不起，加载出现异常！\"\r\n    });\r\n\r\n    \r\n    var pca = {};\r\n  \r\n    pca.keys = {};\r\n    pca.ckeys = {};\r\n    \r\n    pca.init = function(province, city, area, initprovince, initcity, initarea){//jQuery选择器, 省-市-区\r\n      if(!province || !$(province).length) return; \r\n      $(province).html('');\r\n      $(province).append('<option selected>全部</option>');\r\n      for(var i in departments){\r\n        $(province).append('<option  &nbsp; id='+departments[i].Id+' &nbsp; value='+departments[i].Title+'>'+departments[i].Title+'</option>');\r\n        pca.keys[departments[i].Title] = departments[i];\r\n      }\r\n      form.render('select');\r\n      if(!city || !$(city).length) return;\r\n      pca.formRender(city);\r\n      form.on('select(province)', function(data){\r\n        \r\n          var cs = pca.keys[data.value].Children;\r\n          $(city).html('');\r\n          $(city).append('<option>全部</option>');\r\n          if(cs){\r\n            for(var i in cs){\r\n              $(city).append('<option &nbsp;  id='+cs[i].Id+' &nbsp;  value='+cs[i].Title+'>'+cs[i].Title+'</option>');\r\n              pca.ckeys[cs[i].Title] = cs[i];\r\n            }\r\n            $(city).find('option:eq(1)').attr('selected', true);\r\n          }\r\n        form.render('select');\r\n        $(city).next().find('.layui-this').removeClass('layui-this').click();\r\n        pca.formHidden('province', data.value);\r\n        $('.pca-label-province').html(data.value);//此处可以自己修改 显示的位置, 不想显示可以直接去掉\r\n      }); \r\n      \r\n      if(!area || !$(area).length) return;\r\n      pca.formRender(area);\r\n      form.on('select(city)', function(data){\r\n          var cs = pca.ckeys[data.value];\r\n\r\n          $(area).html('');\r\n          $(area).append('<option>全部</option>');\r\n          if(cs){\r\n            cs = cs.Children;\r\n          for(var i in cs){\r\n            console.info(cs[i].Id)\r\n            $(area).append('<option &nbsp; id='+cs[i].Id+' &nbsp; value='+cs[i].Title+'>'+cs[i].Title+'</option>');\r\n          }\r\n          $(area).find('option:eq(1)').attr('selected', true);\r\n          }\r\n        form.render('select');\r\n        $(area).next().find('.layui-this').removeClass('layui-this').click();\r\n        pca.formHidden('city', data.value);\r\n        $('.pca-label-city').html(data.value);  //此处可以自己修改 显示的位置, 不想显示可以直接去掉\r\n      }); \r\n      form.on('select(area)', function(data){\r\n        //console.info($(\"#area option[selected='selected']\").attr('id'))\r\n        //console.info($(\"#area option[selected='selected']\").val())\r\n        shebeiPar.FixedUser_Name = $(\"#area option[selected='selected']\").val();\r\n        shebeiPar.FixedUser_Id = $(\"#area option[selected='selected']\").attr('id');\r\n        \r\n        pca.formHidden('area', data.value);   \r\n        $('.pca-label-area').html(data.value);  //此处可以自己修改 显示的位置, 不想显示可以直接去掉\r\n      }); \r\n    }\r\n\r\n    pca.formRender = function(obj){\r\n      $(obj).html('');\r\n      $(obj).append('<option>全部</option>');\r\n      form.render('select');\r\n    }\r\n    \r\n    pca.formHidden = function(obj, val){\r\n      if(!$('#pca-hide-'+obj).length) \r\n        $('body').append('<input id=\"pca-hide-'+obj+'\" type=\"hidden\" value=\"'+val+'\" />');\r\n      else\r\n        $('#pca-hide-'+obj).val(val);\r\n    }\r\n\r\n    //服务交互\r\n    var shoukuanSeverEvent = {\r\n      add: function(para) {\r\n        layer.closeAll();\r\n        layer.load(0, { shade: false });\r\n        var dataBean = layui.consts.basePostData();\r\n        dataBean.Data = para;\r\n        dataBean.Data.CompanyCoding = \"88888888\";\r\n        dataBean.Data.CompanyName = \"88888888\";\r\n        dataBean.Method=\"insert\";\r\n        var str1 = JSON.stringify(dataBean);\r\n        if(dataBean.Data.FixedUserFlag){\r\n          if(!dataBean.Data.FixedUser_Id || !dataBean.Data.FixedUser_Name){\r\n            layer.closeAll();\r\n            layer.msg(\"营业员未选择, 请选择固定营业员或取消指定营业员 \", { icon: 5 });\r\n          }else{\r\n            console.info(\"营业员已选择\")\r\n            $.ajax({\r\n              type: \"Post\",\r\n              url: layui.setter.baseUrl + \"/api/BusinessHallDevice/insert\",\r\n              data: str1,\r\n              async: true,\r\n              dataType: \"json\",\r\n              headers: {\r\n                Accept: \"application/json\",\r\n                \"Content-Type\": \"application/json\"\r\n              },\r\n              success: function(data) {\r\n                layer.closeAll();\r\n                if (data.IsSucceed) {\r\n                  layer.msg(\"添加设备成功!\", { icon: 6 });\r\n                  table.reload(\"LAY-shoukuanmanageTable\");\r\n                  $(\"#lock-from\").find('input[type=text],select,input[type=hidden]').each(function() {\r\n                   $(this).val('');\r\n                  });\r\n                } else {\r\n                  table.reload(\"LAY-shoukuanmanageTable\");\r\n                  layer.msg(\"添加设备数据失败: \" + data.Errors[0].Message, { icon: 5 });\r\n                }\r\n              },\r\n              error: function(err) {\r\n                layer.closeAll();\r\n                layer.msg(\"数据操作失败\", { icon: 5 });\r\n              }\r\n            });\r\n          }\r\n        }else{\r\n          console.info(\"营业员为空\")\r\n            $.ajax({\r\n              type: \"Post\",\r\n              url: layui.setter.baseUrl + \"/api/BusinessHallDevice/insert\",\r\n              data: str1,\r\n              async: true,\r\n              dataType: \"json\",\r\n              headers: {\r\n                Accept: \"application/json\",\r\n                \"Content-Type\": \"application/json\"\r\n              },\r\n              success: function(data) {\r\n                layer.closeAll();\r\n                if (data.IsSucceed) {\r\n                  layer.msg(\"添加设备成功!\", { icon: 6 });\r\n                  layer.closeAll();\r\n                  table.reload(\"LAY-shoukuanmanageTable\");\r\n                  $(\"#lock-from\").find('input[type=text],select,input[type=hidden]').each(function() {\r\n                   $(this).val('');\r\n              });\r\n                } else {\r\n                  table.reload(\"LAY-shoukuanmanageTable\");\r\n                  layer.msg(\"添加设备数据失败: \" + data.Errors[0].Message, { icon: 5 });\r\n                }\r\n              },\r\n              error: function(err) {\r\n                layer.closeAll();\r\n                layer.msg(\"数据操作失败\", { icon: 5 });\r\n              }\r\n            });\r\n          }\r\n        \r\n      },\r\n      delete: function(para) {\r\n        layer.closeAll();\r\n        layer.load(0, { shade: false });\r\n        var dataBean = layui.consts.basePostData();\r\n        dataBean.Data = {\"Key\":para.Me.Id}\r\n        dataBean.Method = \"remove\"\r\n        var str1 = JSON.stringify(dataBean);\r\n        console.info(str1)\r\n        $.ajax({\r\n          type: \"delete\",\r\n          url: layui.setter.baseUrl + \"/api/BusinessHallDevice/remove\",\r\n          async: true,\r\n          data: str1,\r\n          dataType: \"json\",\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\"\r\n          },\r\n          success: function(data) {\r\n            layer.closeAll();\r\n            if (data.IsSucceed) {\r\n              layer.msg(\"删除营业设备成功!\", { icon: 6 });\r\n              table.reload(\"LAY-shoukuanmanageTable\");\r\n            } else {\r\n              table.reload(\"LAY-yingyewangdianTable\");\r\n              layer.msg(\"删除失败: \" + data.Errors[0].Message, { icon: 5 });\r\n            }\r\n          },\r\n          error: function(err) {\r\n            layer.closeAll();\r\n            layer.msg(\"数据操作失败\", { icon: 5 });\r\n          }\r\n        });\r\n      },\r\n      edit: function(para) {\r\n      //console.info(para)\r\n      $.ajax({\r\n        type: \"get\",\r\n        url:\r\n        layui.setter.baseUrl + \"/api/BusinessHallDevice/query/key?Data.key=\"+para.Me.Id+\"&Method=key\",\r\n        async: true,\r\n        success: function(data) {\r\n          console.info(para.BusinessHall_Name)\r\n          if (data.IsSucceed) {\r\n            var res = data.Result.Me\r\n            layer.open({\r\n              type: 1,\r\n              title: \"修改收款设备\",\r\n              content: $('#lock-from'),\r\n              maxmin: true,\r\n              area: [\"700px\", \"400px\"],\r\n              btn: [\"确定\", \"取消\"],\r\n              yes: function(index, layero) {\r\n                var submit = $(\"#LAY-shebei-add-submit\");\r\n                //获取提交的字段\r\n                //监听提交\r\n                form.on('submit(LAY-shebei-add-submit)', function (data) {\r\n                  var field = data.field; //获取提交的字段\r\n                  //提交 Ajax 成功后，静态更新表格中的数据\r\n                  var dataBean = layui.consts.basePostData();\r\n                  dataBean.Data = field;\r\n                  dataBean.Data.BusinessHall_Id = res.BusinessHall_Id;\r\n                  dataBean.Data.BusinessHall_Name = para.BusinessHall_Name;\r\n                  dataBean.Data.Id = res.Id;\r\n                  dataBean.Data.Status = field.Status == \"on\"? 1 : 2;\r\n                  dataBean.Data.CompanyCoding = \"88888888\";\r\n                  dataBean.Data.FixedUserFlag = field.FixedUserFlag == \"on\"? true : false;\r\n                  dataBean.Data.FixedUser_Id = shebeiPar.FixedUser_Id;\r\n                  dataBean.Data.FixedUser_Name = shebeiPar.FixedUser_Name;\r\n                  dataBean.Method=\"update\";\r\n                  delete dataBean.Data[\"P1\"]\r\n                  delete dataBean.Data[\"C1\"]\r\n                  delete dataBean.Data[\"A1\"]\r\n                  delete dataBean.Data[\"layTableRadio_1\"]\r\n                  var str1 = JSON.stringify(dataBean);\r\n                  //console.info(\"data\", str1)\r\n                  \r\n                  $.ajax({\r\n                    type: \"Put\",\r\n                    url: layui.setter.baseUrl + \"/api/BusinessHallDevice/update\",\r\n                    data: str1,\r\n                    async: true,\r\n                    dataType: \"json\",\r\n                    headers: {\r\n                      Accept: \"application/json\",\r\n                      \"Content-Type\": \"application/json\"\r\n                    },\r\n                    success: function(data) {\r\n                      layer.closeAll();\r\n                      \r\n                      if (data.IsSucceed) {\r\n                        layer.msg(\"修改营业网点成功!\", { icon: 6 });\r\n                        table.reload(\"LAY-shoukuanmanageTable\");\r\n                        $(\"#lock-from\").find('input[type=text],select,input[type=hidden]').each(function() {\r\n                             $(this).val('');\r\n                        });\r\n                      } else {\r\n                        table.reload(\"LAY-shoukuanmanageTable\");\r\n                        layer.msg(\"失败: \" + data.Errors[0].Message, { icon: 5 });\r\n                      }\r\n                    },\r\n                    error: function(err) {\r\n                      layer.closeAll();\r\n                      layer.msg(\"数据操作失败\", { icon: 5 });\r\n                    }\r\n                  });\r\n                  \r\n                  layer.close(index); //关闭弹层\r\n                });\r\n\r\n                submit.trigger(\"click\");\r\n              }\r\n            });\r\n            form.val(\"lock-from\", {\r\n              \"Coding\": res.Coding // \"name\": \"value\"\r\n              ,\"Name\": res.Name\r\n              ,\"CompanyCoding\": res.CompanyCoding\r\n              ,\"CompanyName\": res.CompanyName\r\n              ,\"Mac\": res.Mac\r\n              ,\"SortNum\":res.SortNum\r\n              ,\"Status\": res.Status ==1 ? true : false\r\n              ,\"Description\": res.Description\r\n              ,\"FixedUser_Id\":res.FixedUser_Id\r\n              ,\"FixedUser_Name\":res.FixedUser_Name\r\n              ,\"FixedUserFlag\":res.FixedUserFlag\r\n              ,\"Id\":res.Id\r\n              ,\"BusinessHall_Id\":res.BusinessHall_Id\r\n              ,\"BusinessHall_Name\":para.BusinessHall_Name\r\n            })\r\n            \r\n            if(res.FixedUserFlag){\r\n              assistant = findObjectByKeyVal(departments,\"Title\",res.FixedUser_Name)\r\n              //console.info(assistant)\r\n              position = findObjectByKeyVal(departments,\"Id\",assistant.ParentId)\r\n              //console.info(position)\r\n              department = findObjectByKeyVal(departments,\"Id\",position.ParentId)\r\n              console.info(department.Title,position.Title,assistant.Title)\r\n              $(\"#province\").removeAttr(\"disabled\");  \r\n              $(\"#city\").removeAttr(\"disabled\"); \r\n              $(\"#area\").removeAttr(\"disabled\"); \r\n              $(province).html('');\r\n              $(province).append('<option selected>全部</option>');\r\n              for(var i in departments){\r\n                $(province).append('<option  &nbsp; id='+departments[i].Id+' &nbsp; value='+departments[i].Title+'>'+departments[i].Title+'</option>');\r\n              }\r\n              $(province).find(\"option[value='\"+department.Title+\"']\").attr('selected', true); \r\n              form.render('select');\r\n              //选择职位下拉框\r\n              $(city).html('');\r\n              $(city).append('<option>全部</option>');\r\n              var cs = department.Children\r\n              if(cs){\r\n                for(var i in cs){\r\n                  $(city).append('<option &nbsp;  id='+cs[i].Id+' &nbsp;  value='+cs[i].Title+'>'+cs[i].Title+'</option>');\r\n                }\r\n                $(city).find(\"option[value='\"+position.Title+\"']\").attr('selected', true); \r\n              }\r\n              form.render('select');\r\n              $(city).next().find('.layui-this').removeClass('layui-this').click();\r\n              pca.formHidden('province', data.value);\r\n              $('.pca-label-province').html(data.value);//此处可以自己修改 显示的位置, 不想显示可以直接去掉\r\n              \r\n              //选择营业员下拉框\r\n              $(area).html('');\r\n                $(area).append('<option>全部</option>');\r\n              cs = position.Children\r\n                if(cs){\r\n                  for(var i in cs){\r\n                    console.info(cs[i].Id)\r\n                    $(area).append('<option &nbsp; id='+cs[i].Id+' &nbsp; value='+cs[i].Title+'>'+cs[i].Title+'</option>');\r\n                  }\r\n                  $(area).find(\"option[value='\"+assistant.Title+\"']\").attr('selected', true); \r\n                }\r\n              form.render('select');\r\n              $(area).next().find('.layui-this').removeClass('layui-this').click();\r\n              pca.formHidden('city', data.value);\r\n              $('.pca-label-city').html(data.value);  //此处可以自己修改 显示的位置, 不想显示可以直接去掉\r\n              \r\n            }else{\r\n              $(\"#province\").attr(\"disabled\",\"disabled\");\r\n              $(\"#city\").attr(\"disabled\",\"disabled\");\r\n              $(\"#area\").attr(\"disabled\",\"disabled\");\r\n              pca.init('select[name=P1]', 'select[name=C1]', 'select[name=A1]');\r\n              form.render('select');\r\n            }\r\n          } else {\r\n            layer.msg(\"失败\" + res.Errors[0].Description, { icon: 5 });\r\n          }\r\n        },\r\n        error: function(err) {\r\n          layer.closeAll();\r\n          layer.msg(\"数据加载失败\", { icon: 5 });\r\n        }\r\n      });\r\n      }\r\n    };\r\n    //事件\r\n    var active = {\r\n      batchdel: function() {\r\n        var checkStatus = table.checkStatus(\"LAY-user-manage\"),\r\n          checkData = checkStatus.data; //得到选中的数据\r\n        if (checkData.length === 0) {\r\n          return layer.msg(\"请选择数据\");\r\n        }\r\n        layer.close(index);\r\n        layer.confirm(\"确定删除吗？\", function(index) {\r\n          table.reload(\"LAY-user-manage\");\r\n          layer.msg(\"已删除\");\r\n        });\r\n      },\r\n      add: function() {\r\n        $.ajax({\r\n          type: \"Get\",\r\n          url: layui.setter.magUrl + \"/api/Organ/treeview\", \r\n          async: true,\r\n          headers: {\r\n            Accept: \"application/json, text/javascript, */*; q=0.01\",\r\n          },\r\n          success: function(data) {\r\n            \r\n            //console.log(data);\r\n            if (data.IsSucceed) {\r\n              departments = data.Result.TreeNodes[0].Children\r\n              \r\n              pca.init('select[name=P1]', 'select[name=C1]', 'select[name=A1]');\r\n              form.render('select');\r\n              //$(\"#BusinessHall_Name\").append(\"<option value=\"+data.Id+\">\"+data.Name+\"</option>\");\r\n            } \r\n          },\r\n          error: function(err) {\r\n            \r\n            layer.msg(\"数据操作失败\", { icon: 5 });\r\n          }\r\n        });\r\n        table.reload(\"LAY-yingyewangdian_SKTable\");\r\n\r\n        layer.open({\r\n          type: 1,\r\n          title: \"添加设备\",\r\n          content: $('#lock-from'),\r\n          maxmin: true,\r\n          area: [\"800px\", \"500px\"],\r\n          btn: [\"确定\", \"取消\"],\r\n          yes: function(index, layero) {\r\n            var submit = $(\"#LAY-shebei-add-submit\");\r\n            \r\n            //获取提交的字段\r\n            //监听提交\r\n            form.on('submit(LAY-shebei-add-submit)', function (data) {\r\n              var field = data.field; //获取提交的字段\r\n              //\r\n              //提交 Ajax 成功后，静态更新表格中的数据\r\n              //$.ajax({});\r\n              \r\n              $.ajax({\r\n                type: \"get\",\r\n                url: layui.setter.baseUrl + \"/api/Common/GetInsertGuid\",\r\n                async: true,\r\n                dataType: \"json\",\r\n                headers: {\r\n                  Accept: \"application/json\",\r\n                  \"Content-Type\": \"application/json\"\r\n                },\r\n                success: function(data) {\r\n                  if (data.IsSucceed) {\r\n                    shebeiPar.Idd = data.Result;\r\n                    shebeiPar.Mac = field.Mac;\r\n                    shebeiPar.Coding = field.Coding;\r\n                    shebeiPar.Description = field.Description;\r\n\r\n                    shebeiPar.Name = field.Name;\r\n                    shebeiPar.SortNum = field.SortNum;\r\n                    shebeiPar.Coding = field.Coding;\r\n                    shebeiPar.Status = field.Status == \"on\"? 1 :2;\r\n                    //shebeiPar.Description = field.Description;\r\n                    console.info(\"shebeiPar: \", shebeiPar)\r\n                    shoukuanSeverEvent.add(shebeiPar);\r\n                    layer.close(index); //关闭弹层\r\n                  } else {\r\n                    layer.msg(\"设备数据失败\" + data.Errors[0].Message, { icon: 5 });\r\n                  }\r\n                },\r\n                error: function(err) {\r\n                  layer.closeAll();\r\n                  layer.msg(\"数据操作失败\", { icon: 5 });\r\n                }\r\n              });\r\n              layer.close(index); //关闭弹层\r\n            });\r\n\r\n            submit.trigger(\"click\");\r\n          }\r\n        });\r\n        \r\n      }\r\n    };\r\n\r\n    $(\".layui-btn.layuiadmin-btn-shoukuanAdd\").on(\"click\", function() {\r\n      var type = $(this).data(\"type\");\r\n      active[type] ? active[type].call(this) : \"\";\r\n    });\r\n    /*\r\n    form.on('switch(status)', function(data){\r\n      //console.log(data.elem); //得到checkbox原始DOM对象\r\n      //console.log(data.elem.checked); //开关是否开启，true或者false\r\n      //console.log(data.value); //开关value值，也可以通过data.elem.value得到\r\n      shebeiPar.statue = data.elem.checked\r\n    }); \r\n    */\r\n    $(\".layui-btn.LAY-wangdian-search-submit\").on(\"click\", function(data){\r\n      layer.open({\r\n          type: 1,\r\n          title: \"查询营业网点\",\r\n          content: $('#lock-from-BusinessHall'),\r\n          maxmin: true,\r\n          offset: 'auto',\r\n          zIndex :999999999,\r\n          area: [\"800px\", \"500px\"],\r\n          btn: [\"确定\", \"取消\"],\r\n          yes: function(index, layero) {\r\n            console.info(shebeiPar.BusinessHall_Name)\r\n            //$(\"#BusinessHall_Name\").attr({value:shebeiPar.BusinessHall_Name});\r\n            form.val(\"lock-from\", {\r\n              \"BusinessHall_Name\": shebeiPar.BusinessHall_Name // \"name\": \"value\"\r\n            })\r\n            layer.close(index);\r\n          }\r\n      });\r\n    });\r\n\r\n    form.on('switch(FixedUserFlag)', function(data){\r\n      //console.log(data.elem); //得到checkbox原始DOM对象\r\n      //console.log(data.elem.checked); //开关是否开启，true或者false\r\n      //console.log(data.value); //开关value值，也可以通过data.elem.value得到\r\n      shebeiPar.FixedUserFlag = data.elem.checked;\r\n      if(shebeiPar.FixedUserFlag){\r\n        $(\"#province\").removeAttr(\"disabled\");  \r\n        $(\"#city\").removeAttr(\"disabled\"); \r\n        $(\"#area\").removeAttr(\"disabled\");   \r\n      }else{\r\n        $(\"#province\").attr(\"disabled\",\"disabled\");\r\n        $(\"#city\").attr(\"disabled\",\"disabled\");\r\n        $(\"#area\").attr(\"disabled\",\"disabled\");\r\n      }\r\n      form.render('select');\r\n    }); \r\n\r\n    table.on('radio(LAY-yingyewangdian_SKTable)', function(data){\r\n      console.info(data.data)\r\n      var res = data.data.Me\r\n      shebeiPar.BusinessHall_Id = res.Id;\r\n      shebeiPar.BusinessHall_Name = res.Name;\r\n    }); \r\n\r\n    table.on('tool()', function(obj){ //注：tool是工具条事件名，test是table原始容器的属性 lay-filter=\"对应的值\"\r\n      var data = obj.data; //获得当前行数据\r\n      var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）\r\n      var tr = obj.tr; //获得当前行 tr 的DOM对象\r\n      if(layEvent === 'del'){ //删除\r\n        layer.confirm('真的删除行么', function(index){\r\n          shoukuanSeverEvent.delete(data); //删除对应行（tr）的DOM结构，并更新缓存\r\n          layer.close(index);\r\n          //向服务端发送删除指令\r\n        });\r\n      } else if(layEvent === 'edit'){ //编辑\r\n        //do something\r\n        $.ajax({\r\n          type: \"Get\",\r\n          url: layui.setter.magUrl + \"/api/Organ/treeview\", \r\n          async: true,\r\n          headers: {\r\n            Accept: \"application/json, text/javascript, */*; q=0.01\",\r\n          },\r\n          success: function(re) {\r\n            if (re.IsSucceed) {\r\n              departments = re.Result.TreeNodes[0].Children\r\n              //console.info(departments)\r\n              \r\n              console.info(data)\r\n              shoukuanSeverEvent.edit(data)\r\n              //pca.init('select[name=P1]', 'select[name=C1]', 'select[name=A1]');\r\n              //form.render('select');\r\n              //$(\"#BusinessHall_Name\").append(\"<option value=\"+data.Id+\">\"+data.Name+\"</option>\");\r\n            } \r\n          },\r\n          error: function(err) {\r\n            \r\n            layer.msg(\"数据操作失败\", { icon: 5 });\r\n          }\r\n        });\r\n       \r\n      }\r\n    });\r\n\r\n    var findObjectByKeyVal= function (obj, key, val) {\r\n      if (!obj || (typeof obj === 'string')) {\r\n        return null\r\n      }\r\n      if (obj[key] === val) {\r\n        return obj\r\n      }\r\n\r\n      for (var i in obj) {\r\n        if (obj.hasOwnProperty(i)) {\r\n          var found = findObjectByKeyVal(obj[i], key, val)\r\n          if (found) {\r\n            return found\r\n          }\r\n        }\r\n      }\r\n      return null\r\n    }\r\n  });\r\n"]}