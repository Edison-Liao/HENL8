{"version":3,"sources":["shoufeiguanli/yingyewangdian.js"],"names":["layui","config","base","extend","index","use","$","table","form","wangdianSeverEvent","laypage","render","elem","id","url","setter","baseUrl","where","Data.CompanyCoding","Method","parseData","request","page","cols","field","title","templet","d","Me","Coding","Name","Addr","Tels","WorkTimeInfo","LeaderName","Description","util","toDateString","CreateDate","ModifyDate","fixed","align","width","toolbar","loading","limit","text","add","data","layer","closeAll","load","shade","dataBean","consts","basePostData","Date","Data","LeaderID","CompanyCoding","CompanyName","str1","JSON","stringify","console","info","ajax","type","async","dataType","headers","Accept","Content-Type","success","IsSucceed","msg","icon","reload","find","each","this","val","Errors","Message","error","err","delete","para","Key","Id","detail","time","open","content","html","maxmin","area","btn","yes","layero","close","res","edit","Result","submit","on","trigger","SortNum","active","batchdel","checkStatus","checkData","length","confirm","Idd","call","obj","layEvent","event","tr"],"mappings":"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","file":"../../../shoufeiguanli/yingyewangdian.js","sourcesContent":["layui\r\n  .config({\r\n    base: \"../../../layuiadmin/\" //静态资源所在路径\r\n  })\r\n  .extend({\r\n    index: \"lib/index\" //主入口模块\r\n  })\r\n  .use([\"index\", \"table\", \"form\",'consts'], function() {\r\n    \r\n    var $ = layui.$,\r\n    table = layui.table,\r\n    form = layui.form;\r\n    var laypage = layui.laypage;\r\n    //用户管理表格渲染\r\n    var yingyewangdianTable = table.render({\r\n      elem: \"#LAY-yingyewangdianTable\",\r\n      id:\"LAY-yingyewangdianTable\",\r\n      url: layui.setter.baseUrl + \"/api/BusinessHall/query/list\", //接口\r\n      //response:layui.setter.response,\r\n      where:{\"Data.CompanyCoding\":\"88888888\",\"Method\":\"list\"},\r\n      parseData:layui.setter.parseData,\r\n      request: layui.setter.request,\r\n      page:true,\r\n      cols: [\r\n        [\r\n          { field: \"Coding\", title: \"营业网点编码\" ,templet: function(d) {\r\n              return d.Me.Coding;\r\n            }},\r\n          { field: \"Name\",  title: \"营业网点名称\" ,templet: function(d) {\r\n              return d.Me.Name;\r\n            }},\r\n          { field: \"Addr\", title: \"营业地址\",templet: function(d) {\r\n              return d.Me.Addr;\r\n            } },\r\n          { field: \"Tels\", title: \"联系电话\",templet: function(d) {\r\n              return d.Me.Tels;\r\n            } },\r\n          { field: \"WorkTimeInfo\",  title: \"营业时间\" ,templet: function(d) {\r\n              return d.Me.WorkTimeInfo;\r\n            }},\r\n          { field: \"LeaderName\", title: \"主管操作员\",templet: function(d) {\r\n              return d.Me.LeaderName;\r\n            } },\r\n          { field: \"Description\",  title: \"描述\" ,templet: function(d) {\r\n              return d.Me.Description;\r\n            }},\r\n\r\n          { field: \"CreateDate\", title: \"创建时间\",templet: function(d) {\r\n              return \"<div>\" + layui.util.toDateString(d.Me.CreateDate) + \"</div>\";\r\n            } },\r\n          { field: \"ModifyDate\", title: \"修改时间\",templet: function(d) {\r\n              return \"<div>\" + layui.util.toDateString(d.Me.ModifyDate) + \"</div>\";\r\n            } },\r\n          \r\n          //{ field: \"caozuoyuan\",  title: \"主管操作员\" },\r\n          //{ field: \"dizhi\",  title: \"营业网点地址\" ,width: 180},\r\n          //{ field: \"dianhua\",  title: \"联系电话\" },\r\n          //{ field: \"gongzuoshijian\",  title: \"办公时间\" },\r\n          //{ field: \"sex\",  title: \"排序号\" },\r\n          /*\r\n          { field: \"Creator\",  title: \"建档人\" },\r\n          {\r\n            field: \"CreateDate\",\r\n            title: \"建档日期\",\r\n            width: 120,\r\n            sort: true,\r\n            templet: function(d) {\r\n              return \"<div>\" + layui.util.toDateString(d.CreateDate) + \"</div>\";\r\n            }\r\n          },\r\n          { field: \"Updator\",  title: \"更新人\" },\r\n          {\r\n            field: \"UpdateDate\",\r\n            title: \"更新日期\",\r\n            width: 120,\r\n            sort: true,\r\n            templet: function(d) {\r\n              return \"<div>\" + layui.util.toDateString(d.CreateDate) + \"</div>\";\r\n            }\r\n          },\r\n          */\r\n          {title: \"操作\",fixed: 'right', align:'center', width:160, toolbar: '#LAY-yingyewangdianTable-barOperation'}\r\n          \r\n        ]\r\n      ],\r\n      loading: true,\r\n      limit: 10,\r\n      text: \"对不起，加载出现异常！\"\r\n    });\r\n\r\n  //分页\r\n    //监听搜索\r\n    /*\r\n    form.on(\"submit(LAY-user-front-search)\", function(data) {\r\n      var field = data.field;\r\n      //执行重载\r\n      table.reload(\"LAY-user-manage\", {\r\n        where: field\r\n      });\r\n    });\r\n    */\r\n\r\n    //服务交互\r\n    var wangdianSeverEvent = {\r\n      add: function(data) {\r\n        layer.closeAll();\r\n        layer.load(0, { shade: false });\r\n        var dataBean = layui.consts.basePostData();\r\n        \r\n        var date = new Date();\r\n        dataBean.Data = data;\r\n        dataBean.Data.LeaderID = dataBean.Data.LeaderID ? dataBean.Data.LeaderID:null;\r\n        dataBean.Data.CompanyCoding = \"88888888\";\r\n        dataBean.Data.CompanyName = \"88888888\";\r\n        dataBean.Method=\"insert\";\r\n        var str1 = JSON.stringify(dataBean);\r\n        console.info(\"data\", str1)\r\n        $.ajax({\r\n          type: \"Post\",\r\n          url: layui.setter.baseUrl + \"/api/BusinessHall/insert\",\r\n          data: str1,\r\n          async: true,\r\n          dataType: \"json\",\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\"\r\n          },\r\n          success: function(data) {\r\n            layer.closeAll();\r\n            \r\n            if (data.IsSucceed) {\r\n              layer.msg(\"添加营业网点成功!\", { icon: 6 });\r\n              table.reload(\"LAY-yingyewangdianTable\");\r\n              $(\"#lock-from\").find('input[type=text],select,input[type=hidden]').each(function() {\r\n                   $(this).val('');\r\n              });\r\n            } else {\r\n              table.reload(\"LAY-yingyewangdianTable\");\r\n              layer.msg(\"失败: \" + data.Errors[0].Message, { icon: 5 });\r\n            }\r\n          },\r\n          error: function(err) {\r\n            layer.closeAll();\r\n            layer.msg(\"数据操作失败\", { icon: 5 });\r\n          }\r\n        });\r\n        table.reload(\"LAY-yingyewangdianTable\");\r\n      },\r\n      delete: function(para) {\r\n        layer.closeAll();\r\n        layer.load(0, { shade: false });\r\n        var dataBean = layui.consts.basePostData();\r\n        dataBean.Data = {\"Key\":para.Me.Id}\r\n        dataBean.Method = \"remove\"\r\n        var str1 = JSON.stringify(dataBean);\r\n        $.ajax({\r\n          type: \"delete\",\r\n          url: layui.setter.baseUrl + \"/api/BusinessHall/Remove/\",\r\n          async: true,\r\n          data: str1,\r\n          dataType: \"json\",\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\"\r\n          },\r\n          success: function(data) {\r\n            layer.closeAll();\r\n            \r\n            if (data.IsSucceed) {\r\n              layer.msg(\"删除营业网点成功!\", { icon: 6 });\r\n              table.reload(\"LAY-yingyewangdianTable\");\r\n              \r\n            } else {\r\n              table.reload(\"LAY-yingyewangdianTable\");\r\n              layer.msg(\"删除失败: \" + data.Errors[0].Message, { icon: 5 });\r\n            }\r\n          },\r\n          error: function(err) {\r\n            layer.closeAll();\r\n            layer.msg(\"数据操作失败\", { icon: 5 });\r\n          }\r\n        });\r\n      },\r\n      detail: function(data) {\r\n        layer.load(0, { shade: false,time: 10*1000 });\r\n        var dataBean = layui.consts.basePostData();\r\n        var str1 = JSON.stringify(dataBean);\r\n        $.ajax({\r\n          type: \"get\",\r\n          url:\r\n            layui.setter.baseUrl + \"/api/BusinessHall/query/key?Data.key=\"+para.Me.Id+\"&Method=key\",\r\n\r\n          async: true,\r\n          data: str1,\r\n          dataType: \"json\",\r\n          success: function(data) {\r\n            if (data.IsSucceed) {\r\n             \r\n              layer.open({\r\n                type: 0,\r\n                title: \"营业网点详情\",\r\n                content: $(\"#lock-from\").html(),\r\n                maxmin: true,\r\n                area: [\"700px\", \"400px\"],\r\n                btn: [\"确定\"],\r\n                yes: function(index, layero) {\r\n                  layer.close(index);\r\n                  layer.closeAll('loading');\r\n                }\r\n              });\r\n            } else {\r\n              layer.msg(\"失败\" + res.Errors[0].Description, { icon: 5 });\r\n            }\r\n          },\r\n          error: function(err) {\r\n            layer.closeAll();\r\n            layer.msg(\"数据加载失败\", { icon: 5 });\r\n          }\r\n        });\r\n      },\r\n      edit: function(para) {\r\n        var dataBean = layui.consts.basePostData();\r\n        $.ajax({\r\n          type: \"get\",\r\n          url:\r\n            layui.setter.baseUrl + \"/api/BusinessHall/query/key?Data.key=\"+para.Me.Id+\"&Method=key\",\r\n          async: true, \r\n          success: function(data) {\r\n            if (data.IsSucceed) {\r\n              console.info(data)\r\n              var res = data.Result.Me\r\n              layer.open({\r\n                type: 1,\r\n                title: \"修改营业网点\",\r\n                content: $('#lock-from'),\r\n                maxmin: true,\r\n                area: [\"700px\", \"400px\"],\r\n                btn: [\"确定\", \"取消\"],\r\n                yes: function(index, layero) {\r\n                  var submit = $(\"#LAY-wangdian-add-submit\");\r\n                   //获取提交的字段\r\n                  //监听提交\r\n                  form.on('submit(LAY-wangdian-add-submit)', function (data) {\r\n                    var field = data.field; //获取提交的字段\r\n                  \r\n                    //提交 Ajax 成功后，静态更新表格中的数据\r\n                    var dataBean = layui.consts.basePostData();\r\n                    var date = new Date();\r\n                    dataBean.Data = field;\r\n                    dataBean.Data.Id = res.Id;\r\n                    dataBean.Data.LeaderID = res.LeaderID ? res.LeaderID:null;\r\n                    dataBean.Data.CompanyCoding = \"88888888\";\r\n                    dataBean.Method=\"update\";\r\n                    var str1 = JSON.stringify(dataBean);\r\n                    console.info(\"data\", str1)\r\n                    $.ajax({\r\n                      type: \"Put\",\r\n                      url: layui.setter.baseUrl + \"/api/BusinessHall/update\",\r\n                      data: str1,\r\n                      async: true,\r\n                      dataType: \"json\",\r\n                      headers: {\r\n                        Accept: \"application/json\",\r\n                        \"Content-Type\": \"application/json\"\r\n                      },\r\n                      success: function(data) {\r\n                        layer.closeAll();\r\n                        \r\n                        if (data.IsSucceed) {\r\n                          layer.msg(\"修改营业网点成功!\", { icon: 6 });\r\n                          table.reload(\"LAY-yingyewangdianTable\");\r\n                          $(\"#lock-from\").find('input[type=text],select,input[type=hidden]').each(function() {\r\n                               $(this).val('');\r\n                          });\r\n                        } else {\r\n                          table.reload(\"LAY-yingyewangdianTable\");\r\n                          layer.msg(\"失败: \" + data.Errors[0].Message, { icon: 5 });\r\n                        }\r\n                      },\r\n                      error: function(err) {\r\n                        layer.closeAll();\r\n                        layer.msg(\"数据操作失败\", { icon: 5 });\r\n                      }\r\n                    });\r\n                    \r\n                    layer.close(index); //关闭弹层\r\n                  });\r\n\r\n                  submit.trigger(\"click\");\r\n                }\r\n              });\r\n              form.val(\"lock-from\", {\r\n                \"Coding\": res.Coding // \"name\": \"value\"\r\n                ,\"Name\": res.Name\r\n                ,\"CompanyCoding\": res.CompanyCoding\r\n                ,\"Addr\": res.Addr\r\n                ,\"Tels\": res.Tels\r\n                ,\"WorkTimeInfo\": res.WorkTimeInfo\r\n                ,\"LeaderID\":res.LeaderID\r\n                ,\"LeaderName\":res.LeaderName\r\n                ,\"SortNum\": res.SortNum\r\n                ,\"Description\": res.Description\r\n              })\r\n            } else {\r\n              layer.msg(\"失败\" + data.Errors[0].Message, { icon: 5 });\r\n            }\r\n          },\r\n          error: function(err) {\r\n            layer.closeAll();\r\n            layer.msg(\"数据加载失败\", { icon: 5 });\r\n          }\r\n        });\r\n      }\r\n    }\r\n    //事件\r\n    var active = {\r\n      batchdel: function() {\r\n        var checkStatus = table.checkStatus(\"LAY-user-manage\"),\r\n          checkData = checkStatus.data; //得到选中的数据\r\n        if (checkData.length === 0) {\r\n          return layer.msg(\"请选择数据\");\r\n        }\r\n        layer.close(index);\r\n        layer.confirm(\"确定删除吗？\", function(index) {\r\n          table.reload(\"LAY-user-manage\");\r\n          layer.msg(\"已删除\");\r\n        });\r\n      },\r\n      add: function() {\r\n        layer.open({\r\n          type: 1,\r\n          title: \"添加营业网点\",\r\n          content: $('#lock-from'),\r\n          maxmin: true,\r\n          area: [\"700px\", \"500px\"],\r\n          btn: [\"确定\", \"取消\"],\r\n          yes: function(index, layero) {\r\n            var submit = $(\"#LAY-wangdian-add-submit\");\r\n             //获取提交的字段\r\n            //监听提交\r\n            form.on('submit(LAY-wangdian-add-submit)', function (data) {\r\n              var field = data.field;\r\n\r\n              $.ajax({\r\n                type: \"get\",\r\n                url: layui.setter.baseUrl + \"/api/Common/GetInsertGuid\",\r\n                async: true,\r\n                dataType: \"json\",\r\n                headers: {\r\n                  Accept: \"application/json\",\r\n                  \"Content-Type\": \"application/json\"\r\n                },\r\n                success: function(data) {\r\n                   \r\n                  if (data.IsSucceed) {\r\n                    field.Idd = data.Result;\r\n                    wangdianSeverEvent.add(field);\r\n\r\n                    layer.close(index); //关闭弹层\r\n                  } else {\r\n                    \r\n                    layer.msg(\"添加网点数据失败\" + data, { icon: 5 });\r\n                  }\r\n\r\n                },\r\n                error: function(err) {\r\n                  layer.closeAll();\r\n                  layer.msg(\"数据操作失败\", { icon: 5 });\r\n                }\r\n              });\r\n            });\r\n            submit.trigger(\"click\");\r\n            \r\n          }\r\n        });\r\n      }\r\n    };\r\n\r\n    $(\".layui-btn.layuiadmin-btn-useradmin\").on(\"click\", function() {\r\n      var type = $(this).data(\"type\");\r\n      active[type] ? active[type].call(this) : \"\";\r\n    });\r\n\r\n    table.on('tool()', function(obj){ //注：tool是工具条事件名，test是table原始容器的属性 lay-filter=\"对应的值\"\r\n      var data = obj.data; //获得当前行数据\r\n      var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）\r\n      var tr = obj.tr; //获得当前行 tr 的DOM对象\r\n      if(layEvent === 'detail'){ //查看\r\n        \r\n        console.info(\"do detail\");\r\n        wangdianSeverEvent.detail(data)\r\n        \r\n      } else if(layEvent === 'del'){ //删除\r\n        layer.confirm('真的删除行么', function(index){\r\n          wangdianSeverEvent.delete(data); //删除对应行（tr）的DOM结构，并更新缓存\r\n          layer.close(index);\r\n          //向服务端发送删除指令\r\n        });\r\n      } else if(layEvent === 'edit'){ //编辑\r\n        //do something\r\n        console.info(data);\r\n        //同步更新缓存对应的值\r\n        wangdianSeverEvent.edit(data)\r\n      }\r\n    });\r\n  });\r\n"]}