layui.config({base:"../../../layuiadmin/"}).extend({index:"lib/index"}).use(["index","layer","jquery","laypage","setter","element","renderNav","consts","common"],function(){var e=void 0===parent.layer?layui.layer:parent.layer,n=(layui.laypage,layui.laydata,layui.consts),o=layui.common,t=layui.element,i=layui.jquery,c=layui.renderNav,l=new Oidc.UserManager(n.userManagerConfig);l.events.addAccessTokenExpiring(function(){console.log("token expiring")}),l.events.addAccessTokenExpired(function(){console.log("token expired")}),l.events.addUserSignedOut(function(){console.log("检测退出事件(已经退出)")}),l.events.addSilentRenewError(function(e){console.log("silent renew error",e.message)}),l.events.addUserLoaded(function(e){user=e,l.getUser().then(function(e){e&&e.profile?(console.log("添加用户之前用户信息",e),o.setSessionStorage("access_token",e.access_token),s.render.showLoginName(e.profile)):null===e&&(console.log("用户信息为空",e),s.render.showStateInfo(e))})["catch"](function(e){console.log(e)})}),l.getUser().then(function(e){e&&e.profile?(console.log("got user获取用户信息",e),s.render.showLoginName(e.profile)):null===e&&(console.log("用户信息为空",e),s.render.showStateInfo(e))})["catch"](function(e){console.log(e)}),l.signinRedirectCallback().then(function(e){console.log("登录目标返回 success",e)})["catch"](function(e){}),l.querySessionStatus().then(function(e){console.log("返回状态",e)})["catch"](function(e){console.log("查询状态错误",e)});var s={init:function(){this.events(),this.server.getNav()},events:function(){i(".search_btn").click(function(){console.log(11)}),i("#logout").click(function(){l.signoutPopupCallback(!0),l.removeUser(),l.clearStaleState(),l.signoutRedirect({state:"signOut"}).then(function(e){log("signed out",e)})["catch"](function(e){log(e)})})},server:{getNav:function(){i.ajax({type:"get",url:layui.setter.baseUrl+"/api/Navigation/treeview/menuLink",success:function(n){if(n.IsSucceed){var o=n.Result.TreeNodes;o[0].Children.push({Code:"06",Flag:"nav",Icon:"true",Id:"001",IsExpand:!0,Key:"001",ParentId:null,Title:"租户管理",Url:"/platform/tenant?rad=1GpEZITN"}),i("#navBox").html(c(o)),t.init()}else e.msg("导航数据加载失败!",{icon:5})},error:function(n){e.closeAll(),e.msg("数据加载失败",{icon:5})}})}},render:{showLoginName:function(e){var n=e&&e.name?e.name:"sysadmin";i("#currentName").html(n)},showStateInfo:function(n){console.log(n,"回调数据"),e.open({title:"信息!",content:"您未登录请先登录!",icon:2,offset:"200px",yes:function(e,n){console.log("点击了回调"),window.location="./login.html"},cancel:function(){console.log("取消关闭"),window.location="./login.html"}})}},checkLogionState:function(){l.getUser().then(function(e){console.log("got user获取用户信息",e)})["catch"](function(e){console.log(e)})}};s.init()});
//# sourceMappingURL=src/maps/home.js.map
