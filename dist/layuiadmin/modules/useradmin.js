layui.define(["table","form","common","consts"],function(e){var t=layui.$,a=layui.table,l=layui.common,n=(layui.form,layui.laypage);a.render({elem:"#LAY-user-manage",url:layui.setter.baseUrl+"/api/User/query/group/normal/1/10",parseData:layui.setter.parseData,cols:[[{field:"GroupClassify",width:100,title:"类别",templet:function(e){return(e.GroupClassify="normal")?"普通用户":(e.GroupClassify="manager")?"业务管理员":"未知类别"}},{field:"NormalizedName",title:"用户名",minWidth:100},{field:"Email",title:"邮箱"},{field:"sex",width:80,title:"性别"},{field:"CreateDate",title:"创建日期",sort:!0,templet:function(e){return"<div>"+layui.util.toDateString(e.CreateDate)+"</div>"}},{field:"锁定/解锁",title:"锁定/解锁",templet:function(e){return e.LockoutEnabled?'<a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="unlock">解锁</a>':'<a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="lock">锁定</a>'}},{title:"操作",width:150,align:"center",fixed:"right",toolbar:"#table-useradmin-webuser"}]],loading:!0,limit:10,text:"对不起，加载出现异常！"});n.render({elem:"page",count:70,curr:location.hash.replace("#!fenye=",""),hash:"fenye",layout:["prev","page","next"],jump:function(e,t){t||a.reload("LAY-user-manage",{url:layui.setter.baseUrl+"/api/User/query/group/normal/"+e.curr+"/"+e.limit})}});var o={lockUser:function(e){var t=JSON.stringify(n),n=layui.consts.basePostData();n.Data=e;var t=JSON.stringify(n);l.ajaxFun("put","/api/User/lockout/active",t).then(function(e){l.appResult.isSucceeded(e)?(layer.msg("用户状态修改成功!",{icon:6}),layer.closeAll(),a.reload("LAY-user-manage")):l.appResult.loadErrorText(e)}).fail(function(e){console.log(e)})},unLockUser:function(e){l.ajaxFun("put","/api/User/lockout/cancel/"+e.Id).then(function(e){l.appResult.isSucceeded(e)?(a.reload("LAY-user-manage"),layer.msg("数据解锁成功",{time:4e3,icon:6})):l.appResult.loadErrorText(e)}).fail(function(e){console.log(e)})},"delete":function(e){l.ajaxFun("delete").then(function(e){l.appResult.isSucceeded(e)?console.log("用户删除成功!"):l.appResult.loadErrorText(e)}).fail(function(e){console.log(e)})},edit:function(e){console.log(e)}};a.on("tool(LAY-user-manage)",function(e){var a=e.data;if("del"===e.event)layer.close(),layer.confirm("确认删除该用户吗?",{icon:3,title:"提示"},function(e){o["delete"](a)});else if("edit"===e.event){t(e.tr);layer.open({type:2,title:"编辑用户",content:"../tpl/from/userFrom.html",maxmin:!0,area:["700px","400px"],btn:["确定","取消"],yes:function(e,t){var a=window["layui-layer-iframe"+e],l="LAY-user-front-submit",n=t.find("iframe").contents().find("#"+l);a.layui.form.on("submit("+l+")",function(t){t.field;console.log(file,"编辑"),layer.close(e)}),n.trigger("click")},success:function(e,t){}})}else"lock"===e.event?layer.open({type:1,title:"锁定解锁",content:t("#lock-from"),area:["700px"],btn:["确认","取消"],yes:function(){var e={Seconds:t("#Seconds").val(),IsLockForever:t("input[name='IsLockForever']:checked").val(),UserId:a.Id},l=/^\+?[0-9][0-9]*$/,n=l.test(e.Seconds);return n?void o.lockUser(e):void layer.msg("请输入正确的秒数!")},btn2:function(e,t){console.log("取消锁定解锁1")}}):"unlock"===e.event&&layer.confirm("确认要解锁该用户吗?",{icon:3,title:"提示"},function(e){o.unLockUser(a)})}),e("useradmin",{})});
//# sourceMappingURL=src/maps/useradmin.js.map
