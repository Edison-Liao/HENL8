layui.define(["table","form","common","consts"],function(e){var l=layui.$,a=layui.table,t=layui.common,n=(layui.form,layui.laypage);a.render({elem:"#LAY-user-manage",url:layui.setter.baseUrl+"/api/User/query/group/normal/1/10",parseData:layui.setter.parseData,cols:[[{field:"GroupClassify",width:100,title:"类别",templet:function(e){return(e.GroupClassify="normal")?"普通用户":(e.GroupClassify="manager")?"业务管理员":"未知类别"}},{field:"NormalizedName",title:"用户名",minWidth:100},{field:"Email",title:"邮箱"},{field:"sex",width:80,title:"性别"},{field:"CreateDate",title:"创建日期",sort:!0,templet:function(e){return"<div>"+layui.util.toDateString(e.CreateDate)+"</div>"}},{field:"锁定/解锁",title:"锁定/解锁",templet:function(e){return e.LockoutEnabled?'<a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="unlock">解锁</a>':'<a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="lock">锁定</a>'}},{title:"操作",width:150,align:"center",fixed:"right",toolbar:"#table-useradmin-webuser"}]],loading:!0,limit:10,text:"对不起，加载出现异常！"});n.render({elem:"page",count:70,curr:location.hash.replace("#!fenye=",""),hash:"fenye",layout:["prev","page","next"],jump:function(e,l){l||a.reload("LAY-user-manage",{url:layui.setter.baseUrl+"/api/User/query/group/normal/"+e.curr+"/"+e.limit})}});var r={lockUser:function(e){var l=JSON.stringify(n),n=layui.consts.basePostData();n.Data=e;var l=JSON.stringify(n);t.ajaxFun("put","/api/User/lockout/active",l).then(function(e){t.appResult.isSucceeded(e)?(layer.msg("用户状态修改成功!",{icon:6}),layer.closeAll(),a.reload("LAY-user-manage")):t.appResult.loadErrorText(e)}).fail(function(e){console.log(e)})},unLockUser:function(e){layer.closeAll(),layer.load(0,{shade:!1}),l.ajax({type:"put",url:layui.setter.baseUrl+"/api/User/lockout/cancel/"+e.Id,data:{},async:!0,success:function(e){layer.closeAll(),console.log(e),e.IsSucceed?(a.reload("LAY-user-manage"),layer.msg("数据解锁成功",{time:4e3,icon:6})):layer.msg("失败"+e,{icon:5})},error:function(e){layer.closeAll(),layer.msg("数据加载失败",{icon:5})}})},"delete":function(e){layer.closeAll(),layer.load(0,{shade:!1}),l.ajax({type:"get",url:layui.setter.baseUrl+"/api/company/search/pageIndex/1/pageSize/99",async:!0,success:function(e){console.log(e),e.IsSucceed?(layer.closeAll(),adminCompany.companyList()):(layer.closeAll(),layer.msg("失败"+res.Errors[0].Description,{icon:5}))},error:function(e){layer.closeAll(),layer.msg("数据加载失败",{icon:5})}})},edit:function(e){console.log(e)}};a.on("tool(LAY-user-manage)",function(e){var a=e.data;if("del"===e.event)layer.close(),layer.confirm("确认删除该用户吗?",{icon:3,title:"提示"},function(e){r["delete"](a)});else if("edit"===e.event){l(e.tr);layer.open({type:2,title:"编辑用户",content:"../tpl/from/userFrom.html",maxmin:!0,area:["700px","400px"],btn:["确定","取消"],yes:function(e,l){var a=window["layui-layer-iframe"+e],t="LAY-user-front-submit",n=l.find("iframe").contents().find("#"+t);a.layui.form.on("submit("+t+")",function(l){l.field;console.log(file,"编辑"),layer.close(e)}),n.trigger("click")},success:function(e,l){}})}else"lock"===e.event?layer.open({type:1,title:"锁定解锁",content:l("#lock-from"),area:["700px"],btn:["确认","取消"],yes:function(){var e={Seconds:l("#Seconds").val(),IsLockForever:l("input[name='IsLockForever']:checked").val(),UserId:a.Id},t=/^\+?[0-9][0-9]*$/,n=t.test(e.Seconds);return n?void r.lockUser(e):void layer.msg("请输入正确的秒数!")},btn2:function(e,l){console.log("取消锁定解锁1")}}):"unlock"===e.event&&layer.confirm("确认要解锁该用户吗?",{icon:3,title:"提示"},function(e){r.unLockUser(a)})}),e("useradmin",{})});
//# sourceMappingURL=src/maps/useradmin.js.map
