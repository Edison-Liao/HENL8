{"version":3,"sources":["set.js"],"names":["layui","define","exports","$","layer","admin","laytpl","setter","view","form","upload","verify","nickname","value","item","RegExp","test","pass","repass","val","on","obj","msg","JSON","stringify","field","avatarSrc","render","url","elem","done","res","status","icon","events","avartatPreview","othis","src","photos","title","data","shade","closeBtn","anim"],"mappings":"AASAA,MAAMC,QAAQ,OAAQ,UAAW,SAASC,GACxC,GAAIC,GAAIH,MAAMG,EACbC,EAAQJ,MAAMI,MAIdC,GAHSL,MAAMM,OACNN,MAAMO,OACRP,MAAMQ,KACLR,MAAMK,OACdI,EAAOT,MAAMS,KACbC,EAASV,MAAMU,MAEJP,GAAE,OAGdM,GAAKE,QACHC,SAAU,SAASC,EAAOC,GACxB,MAAI,IAAIC,QAAO,0BAAoCC,KAAKH,GAGrD,qBAAqBG,KAAKH,GACpB,kBAEN,aAAaG,KAAKH,GACZ,YADT,OALS,cAYVI,MACC,eACC,qBAIFC,OAAQ,SAASL,GAChB,GAAGA,IAAUV,EAAE,iBAAiBgB,MAC9B,MAAO,eAMbV,EAAKW,GAAG,sBAAuB,SAASC,GAatC,MAZAjB,GAAMkB,IAAIC,KAAKC,UAAUH,EAAII,SAYtB,IAIThB,EAAKW,GAAG,2BAA4B,SAASC,GAa3C,MAZAjB,GAAMkB,IAAIC,KAAKC,UAAUH,EAAII,SAYtB,IAKThB,EAAKW,GAAG,oBAAqB,SAASC,GAapC,MAZAjB,GAAMkB,IAAIC,KAAKC,UAAUH,EAAII,SAYtB,GAIT,IAAIC,GAAYvB,EAAE,iBAClBO,GAAOiB,QACLC,IAAK,eACJC,KAAM,oBACNC,KAAM,SAASC,GACG,GAAdA,EAAIC,OACLN,EAAUP,IAAIY,EAAIH,KAElBxB,EAAMkB,IAAIS,EAAIT,KAAMW,KAAM,OAMhC5B,EAAM6B,OAAOC,eAAiB,SAASC,GACrC,GAAIC,GAAMX,EAAUP,KACpBf,GAAMkC,QACJA,QACEC,MAAS,OACRC,OACCH,IAAOA,KAGVI,MAAO,IACPC,SAAU,EACVC,KAAM,KAMXlC,EAAKW,GAAG,oBAAqB,SAASC,GAapC,MAZAjB,GAAMkB,IAAIC,KAAKC,UAAUH,EAAII,SAYtB,IAITvB,EAAQ","file":"../../set.js","sourcesContent":["/**\r\n\r\n @Name：layuiAdmin（iframe版） 设置\r\n @Author：贤心\r\n @Site：http://www.layui.com/admin/\r\n @License: LPPL\r\n    \r\n */\r\n \r\nlayui.define(['form', 'upload'], function(exports){\r\n  var $ = layui.$\r\n  ,layer = layui.layer\r\n  ,laytpl = layui.laytpl\r\n  ,setter = layui.setter\r\n  ,view = layui.view\r\n  ,admin = layui.admin\r\n  ,form = layui.form\r\n  ,upload = layui.upload;\r\n\r\n  var $body = $('body');\r\n  \r\n  //自定义验证\r\n  form.verify({\r\n    nickname: function(value, item){ //value：表单的值、item：表单的DOM对象\r\n      if(!new RegExp(\"^[a-zA-Z0-9_\\u4e00-\\u9fa5\\\\s·]+$\").test(value)){\r\n        return '用户名不能有特殊字符';\r\n      }\r\n      if(/(^\\_)|(\\__)|(\\_+$)/.test(value)){\r\n        return '用户名首尾不能出现下划线\\'_\\'';\r\n      }\r\n      if(/^\\d+\\d+\\d$/.test(value)){\r\n        return '用户名不能全为数字';\r\n      }\r\n    }\r\n    \r\n    //我们既支持上述函数式的方式，也支持下述数组的形式\r\n    //数组的两个值分别代表：[正则匹配、匹配不符时的提示文字]\r\n    ,pass: [\r\n      /^[\\S]{6,12}$/\r\n      ,'密码必须6到12位，且不能出现空格'\r\n    ]\r\n    \r\n    //确认密码\r\n    ,repass: function(value){\r\n      if(value !== $('#LAY_password').val()){\r\n        return '两次密码输入不一致';\r\n      }\r\n    }\r\n  });\r\n  \r\n  //网站设置\r\n  form.on('submit(set_website)', function(obj){\r\n    layer.msg(JSON.stringify(obj.field));\r\n    \r\n    //提交修改\r\n    /*\r\n    admin.req({\r\n      url: ''\r\n      ,data: obj.field\r\n      ,success: function(){\r\n        \r\n      }\r\n    });\r\n    */\r\n    return false;\r\n  });\r\n  \r\n  //邮件服务\r\n  form.on('submit(set_system_email)', function(obj){\r\n    layer.msg(JSON.stringify(obj.field));\r\n    \r\n    //提交修改\r\n    /*\r\n    admin.req({\r\n      url: ''\r\n      ,data: obj.field\r\n      ,success: function(){\r\n        \r\n      }\r\n    });\r\n    */\r\n    return false;\r\n  });\r\n  \r\n  \r\n  //设置我的资料\r\n  form.on('submit(setmyinfo)', function(obj){\r\n    layer.msg(JSON.stringify(obj.field));\r\n    \r\n    //提交修改\r\n    /*\r\n    admin.req({\r\n      url: ''\r\n      ,data: obj.field\r\n      ,success: function(){\r\n        \r\n      }\r\n    });\r\n    */\r\n    return false;\r\n  });\r\n\r\n  //上传头像\r\n  var avatarSrc = $('#LAY_avatarSrc');\r\n  upload.render({\r\n    url: '/api/upload/'\r\n    ,elem: '#LAY_avatarUpload'\r\n    ,done: function(res){\r\n      if(res.status == 0){\r\n        avatarSrc.val(res.url);\r\n      } else {\r\n        layer.msg(res.msg, {icon: 5});\r\n      }\r\n    }\r\n  });\r\n  \r\n  //查看头像\r\n  admin.events.avartatPreview = function(othis){\r\n    var src = avatarSrc.val();\r\n    layer.photos({\r\n      photos: {\r\n        \"title\": \"查看头像\" //相册标题\r\n        ,\"data\": [{\r\n          \"src\": src //原图地址\r\n        }]\r\n      }\r\n      ,shade: 0.01\r\n      ,closeBtn: 1\r\n      ,anim: 5\r\n    });\r\n  };\r\n  \r\n  \r\n  //设置密码\r\n  form.on('submit(setmypass)', function(obj){\r\n    layer.msg(JSON.stringify(obj.field));\r\n    \r\n    //提交修改\r\n    /*\r\n    admin.req({\r\n      url: ''\r\n      ,data: obj.field\r\n      ,success: function(){\r\n        \r\n      }\r\n    });\r\n    */\r\n    return false;\r\n  });\r\n  \r\n  //对外暴露的接口\r\n  exports('set', {});\r\n});"]}