{"version":3,"sources":["common.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","layui","define","exports","$","layer","title","laytpl","setter","view","admin","commonFunction","getTreeNodeName","treeData","id","name","i","length","Id","children","isDisableButton","el","isDisable","addClass","attr","removeClass","removeAttr","showtips","mouseenter","e","tips","this","data","mouseleave","closeAll","getTimeOffset","d1","Date","toUTCString","Math","floor","getTime","getRequest","webside","undefined","url","location","search","theRequest","indexOf","num","str","substr","strs","split","ajaxFun","method","option","_option","loading","successText","errorText","headers","Accept","Content-Type","X-Requested-With","baseUrl","extend","load","dtd","Deferred","msg","reject","statusText","toUpperCase","ajaxReq","_transport","console","log","ajax","dataType","crossDomain","hrFields","withCredentials","success","textStatus","jqXHR","close","resolve","error","errorThrown","status","icon","promise","appResult","isSucceeded","appResultJson","IsSucceed","loadErrorText","ErrorText","isArray","Errors","Message","text","result","Succeeded","Result"],"mappings":"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","file":"../../common.js","sourcesContent":["\r\n\r\nlayui.define(function(exports) {\r\n  var $ = layui.$,\r\n    layer = layui.layer,\r\n    laytpl = layui.laytpl,\r\n    setter = layui.setter,\r\n    view = layui.view,\r\n    admin = layui.admin;\r\n  //公共业务的逻辑处理可以写在此处，切换任何页面都会执行\r\n  /**\r\n   * @description\r\n   */\r\n  var title = \"暂无数据\";\r\n  var commonFunction = {\r\n    //树形结构查询 '2d765b20-a14e'=>'张三'\r\n    getTreeNodeName: function(treeData, id, name) {\r\n      for (var i = 0; i < treeData.length; i++) {\r\n        // if (title !== \"暂无数据\") {\r\n        //   break; //跳出循环\r\n        // }\r\n        if (treeData[i].Id === id) {\r\n          title = treeData[i][name];\r\n          return title;\r\n          break;\r\n        } else if (treeData[i].children.length > 0) {\r\n          commonFunction.getTreeNodeName(treeData[i].children, id, name);\r\n        } else {\r\n          continue;\r\n        }\r\n      }\r\n      return title;\r\n    },\r\n    //按钮禁用与反\r\n    isDisableButton: function(el, isDisable) {\r\n      if (isDisable) {\r\n        $(\"body \" + el)\r\n          .addClass(\"layui-btn-disabled\")\r\n          .addClass(\"layui-btn-primary\")\r\n          .attr(\"disabled\", \"true\");\r\n      } else {\r\n        $(\"body \" + el)\r\n          .removeClass(\"layui-btn-disabled\")\r\n          .removeAttr(\"disabled\");\r\n      }\r\n    },\r\n    //吸附弹出层\r\n    showtips: function(el) {\r\n      $(el)\r\n        .mouseenter(function(e) {\r\n          layer.tips($(this).data(\"tips\"), $(this), {\r\n            tips: [1, \"#363636\"]\r\n          });\r\n        })\r\n        .mouseleave(function(e) {\r\n          layer.closeAll(\"tips\");\r\n        });\r\n    },\r\n    //获取当前时间偏移量\r\n    getTimeOffset: function() {\r\n      const d1 = new Date();\r\n      d1.toUTCString();\r\n      return Math.floor(d1.getTime() / 1000);\r\n    },\r\n    //获取网址url后参数信息?name='张三'&age=14=>{name:张三,age:14}\r\n    getRequest: function(webside) {\r\n      // 接收一个url 如果没有参数则获取本地网址\r\n      if (webside == undefined) {\r\n        var url = location.search; // 获取本地url中\"?\"符后的字串\r\n      } else {\r\n        var url = webside;\r\n        const theRequest = new Object();\r\n        if (url.indexOf(\"?\") != -1) {\r\n          const num = url.indexOf(\"?\");\r\n          const str = url.substr(num + 1);\r\n          strs = str.split(\"&\"); // 分割为数组\r\n          for (let i = 0; i < strs.length; i++) {\r\n            // 循环创建对象\r\n            theRequest[strs[i].split(\"=\")[0]] = strs[i].split(\"=\")[1];\r\n          }\r\n        }\r\n      }\r\n      return theRequest;\r\n    }\r\n  };\r\n\r\n  //ajax 简单封装\r\n  var ajaxFun = function(method, url, data, option) {\r\n    var _option = {\r\n      loading: true, //是否开启loading 框\r\n      successText: \"\",\r\n      errorText: \"\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        \"X-Requested-With\": \"XMLHttpRequest\" // 用于判断是否为ajax请求\r\n      },\r\n      baseUrl: layui.setter.baseUrl\r\n    };\r\n    $.extend(_option, option);\r\n    var load = \"\";\r\n    //设置Promise\r\n    var dtd = $.Deferred();\r\n    if (typeof method !== \"string\") {\r\n      layer.msg(\"请求方法不正确!\");\r\n      return dtd.reject({ statusText: \"请求方法不正确!\" });\r\n    }\r\n    if (typeof url !== \"string\") {\r\n      layer.msg(\"缺少请求地址!\");\r\n      return dtd.reject({ statusText: \"缺少请求地址!\" });\r\n    }\r\n    if (_option.loading) {\r\n      if (method.toUpperCase() === \"GET\") {\r\n        load = layer.load(2);\r\n      } else {\r\n        load = layer.load(3);\r\n      }\r\n    }\r\n    var ajaxReq = {\r\n      _transport: function(method, url, data, _option) {\r\n        console.log(data);\r\n        $.ajax({\r\n          url: _option.baseUrl + url,\r\n          method: method.toUpperCase(),\r\n          dataType: \"json\",\r\n          data: data,\r\n          crossDomain: true,\r\n          hrFields: {\r\n            withCredentials: true\r\n          },\r\n          headers: _option.headers,\r\n          success: function(data, textStatus, jqXHR) {\r\n            layer.close(load);\r\n            dtd.resolve(data == \"[]\" ? null : data, textStatus, jqXHR);\r\n          },\r\n          error: function(jqXHR, textStatus, errorThrown) {\r\n            layer.close(load);\r\n            //捕获状态码子\r\n            if (_option.errorText.length > 0 && _option.loading) {\r\n              layer.msg(_option.errorText + jqXHR.status, { icon: 5 });\r\n            } else if (_option.loading) {\r\n              layer.msg(\"数据操作失败!\" + jqXHR.status, { icon: 5 });\r\n            }\r\n            dtd.reject(jqXHR, textStatus, errorThrown);\r\n            //  epd.ui.toast(epd.textError);\r\n          }\r\n        });\r\n        return dtd.promise();\r\n      }\r\n    };\r\n    return ajaxReq._transport(method, url, data, _option);\r\n  };\r\n  //ajax 返回结果判断\r\n  var appResult = {\r\n    //判断是否为成功状态\r\n    isSucceeded: function(appResultJson) {\r\n      if (appResultJson == undefined || appResultJson.IsSucceed == undefined) {\r\n        return false;\r\n      }\r\n\r\n      return appResultJson.IsSucceed;\r\n    },\r\n    //错误文本\r\n    loadErrorText: function(appResultJson, ErrorText) {\r\n      if ($.isArray(appResultJson.Errors) && appResultJson.Errors.length > 0) {\r\n        layer.msg(appResultJson.Errors[0].Message, { icon: 5 });\r\n      } else {\r\n        var text = ErrorText ? ErrorText : \"数据操作失败!状态:未知\";\r\n        layer.msg(text, { icon: 5 });\r\n      }\r\n    },\r\n    // 正确返回的数据\r\n    result: function(appResultJson) {\r\n      if (appResultJson == undefined || appResultJson.Succeeded == undefined)\r\n        return null;\r\n      if (this.isSucceeded(appResultJson)) return appResultJson.Result;\r\n      return null;\r\n    }\r\n  };\r\n  //对外暴露的接口\r\n  exports(\r\n    \"common\",\r\n    $.extend(commonFunction, { ajaxFun: ajaxFun }, { appResult, appResult })\r\n  );\r\n});\r\n"]}