{"version":3,"sources":["utils.js"],"names":["layui","define","exports","$","layer","utilsFunction","test","console","log","request","url","params","method","arguments","length","undefined","success","data","msg","IsSucceed","result","Result","icon","error","err","opts","apiUrl","baseUrl","setter","revenueUrl","passData","toUpperCase","JSON","stringify","ajax","type","dataType","contentType","getMenus","firstMenus","reduce","arr","current","children","obj","push","getFirstMenu","Pid","concat","getChildMenus","Id","getRequest","weburl","location","search","theRequest","indexOf","num","str","substr","strs","split","i"],"mappings":"AAMAA,MAAMC,OAAO,SAASC,GACpB,GAAIC,GAAIH,MAAMG,EACZC,EAAQJ,MAAMI,MAEZC,GACFC,KADkB,WAEhBC,QAAQC,IAAI,uBAGdC,QALkB,SAMhBC,EACAC,GAkBA,GAjBAC,GAiBAC,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,GAjBS,MACTG,EAgBAH,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,GAhBU,SAASI,GAAuB,GAAjBC,GAAiBL,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,GAAX,SAC7B,IAAII,EAAKE,UAAW,CAClB,GAAMC,GAASH,EAAKI,MACpBd,SAAQC,IAAIS,EAAM,SAClBV,QAAQC,IAAIY,EAAQ,cAEpBhB,GAAMc,IAAIA,GACRI,KAAM,KAIZC,EAKAV,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,GALQ,SAASW,GAAqB,GAAhBN,GAAgBL,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,GAAV,QAC1BN,SAAQC,IAAIgB,EAAK,SACjBpB,EAAMc,IAAIA,GAAOI,KAAM,KAEzBG,EACAZ,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,MACIa,GAAUD,EAAKE,SAAW3B,MAAM4B,OAAOC,YAAcnB,EACrDoB,EACuB,SAAzBlB,EAAOmB,eACkB,WAAzBnB,EAAOmB,eACkB,QAAzBnB,EAAOmB,cACHC,KAAKC,UAAUtB,GACfA,CACNR,GAAE+B,MACAC,KAAMvB,EACNF,IAAKgB,EACLT,KAAMa,EACNM,SAAUX,EAAKW,UAAY,OAC3BC,YAAaZ,EAAKY,aAAe,oCAEjCrB,QAAAA,EACAO,MAAAA,KAUJe,SAnDkB,SAmDTC,GAAuB1B,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,KAC9B,OAAO0B,GAAWC,OAAO,SAACC,EAAKC,GAC7B,GAAMC,KAON,OAJIA,GAAS7B,OAAS,IACpB8B,IAAID,SAAWA,GAEjBF,EAAII,KAAKD,KACFH,QAOXK,aAnEkB,WAmEM,GAAX7B,GAAWJ,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,KACtB,OAAOI,GAAKuB,OAAO,SAACC,EAAKC,GACvB,MACkB,yCAAhBA,EAAQK,KACQ,KAAhBL,EAAQK,IAEDN,EAAIO,OAAON,GAEbD,QAOXQ,cAlFkB,SAkFJC,GAAe,GAAXjC,GAAWJ,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,KAC3B,OAAOI,GAAKuB,OAAO,SAACC,EAAKC,GACvB,GAAMC,KASN,OARIO,KAAOR,EAAQK,MAGbJ,EAAS7B,OAAS,IACpB8B,IAAID,SAAWA,GAEjBF,EAAII,KAAKD,MAEJH,QAIXU,WAjGkB,SAiGPC,GAET,GAAI1C,GAAM0C,EAASA,EAASC,SAASC,OAE/BC,IACN,IAAI7C,EAAI8C,QAAQ,SAAY,CAC1B,GAAMC,GAAM/C,EAAI8C,QAAQ,KAClBE,EAAMhD,EAAIiD,OAAOF,EAAM,EAC7BG,MAAOF,EAAIG,MAAM,IACjB,KAAK,GAAIC,GAAI,EAAGA,EAAIF,KAAK9C,OAAQgD,IAE/BP,EAAWK,KAAKE,GAAGD,MAAM,KAAK,IAAMD,KAAKE,GAAGD,MAAM,KAAK,GAG3D,MAAON,IAKXrD,GAAQ,QAASG","file":"../../utils.js","sourcesContent":["/*\r\n * @Author: Kevin Bolton\r\n * @Date: 2018-10-22 13:51:28\r\n * @Last Modified by: Kevin Bolton\r\n * @Last Modified time: 2018-11-09 10:16:51\r\n */\r\nlayui.define(function(exports) {\r\n  var $ = layui.$,\r\n    layer = layui.layer;\r\n\r\n  var utilsFunction = {\r\n    test() {\r\n      console.log(\"test utilsFunction\");\r\n    },\r\n    // Request\r\n    request(\r\n      url,\r\n      params,\r\n      method = \"GET\",\r\n      success = function(data, msg = \"数据加载出错!\") {\r\n        if (data.IsSucceed) {\r\n          const result = data.Result;\r\n          console.log(data, \"成功后回调\");\r\n          console.log(result, \"result\");\r\n        } else {\r\n          layer.msg(msg, {\r\n            icon: 5\r\n          });\r\n        }\r\n      },\r\n      error = function(err, msg = \"数据加载失败\") {\r\n        console.log(err, \"失败后回调\");\r\n        layer.msg(msg, { icon: 5 });\r\n      },\r\n      opts = {}\r\n    ) {\r\n      var apiUrl = (opts.baseUrl || layui.setter.revenueUrl) + url;\r\n      var passData =\r\n        method.toUpperCase() === \"POST\" ||\r\n        method.toUpperCase() === \"DELETE\" ||\r\n        method.toUpperCase() === \"PUT\"\r\n          ? JSON.stringify(params)\r\n          : params;\r\n      $.ajax({\r\n        type: method,\r\n        url: apiUrl,\r\n        data: passData,\r\n        dataType: opts.dataType || \"json\",\r\n        contentType: opts.contentType || \"application/x-www-form-urlencoded\",\r\n        // async: true,\r\n        success,\r\n        error\r\n      });\r\n    },\r\n    /**\r\n     * 无限级数菜单\r\n     * --- START ---\r\n     * @description 生成无限级数菜单\r\n     * @param {Array} firstMenus 一级菜单\r\n     * @param {Array} [data=[]]  菜单数据\r\n     */\r\n    getMenus(firstMenus, data = []) {\r\n      return firstMenus.reduce((arr, current) => {\r\n        const children = [];\r\n        // const obj = { ...current };\r\n        // children.push(...this.getChildMenus(current.Id, data));\r\n        if (children.length > 0) {\r\n          obj.children = children;\r\n        }\r\n        arr.push(obj);\r\n        return arr;\r\n      }, []);\r\n    },\r\n    /**\r\n     * @description 生成一级菜单\r\n     * @param {Array} [data=[]]  菜单数据\r\n     */\r\n    getFirstMenu(data = []) {\r\n      return data.reduce((arr, current) => {\r\n        if (\r\n          current.Pid === \"00000000-0000-0000-0000-000000000000\" ||\r\n          current.Pid === \"\"\r\n        ) {\r\n          return arr.concat(current);\r\n        }\r\n        return arr;\r\n      }, []);\r\n    },\r\n    /**\r\n     * @description 生成下级菜单\r\n     * @param {Array} [data=[]]  菜单数据\r\n     */\r\n    getChildMenus(Id, data = []) {\r\n      return data.reduce((arr, current) => {\r\n        const children = [];\r\n        if (Id === current.Pid) {\r\n          // const obj = { ...current };\r\n          // children.push(...this.getChildMenus(current.Id, data));\r\n          if (children.length > 0) {\r\n            obj.children = children;\r\n          }\r\n          arr.push(obj);\r\n        }\r\n        return arr;\r\n      }, []);\r\n    },\r\n    // 网址参数提取\r\n    getRequest(weburl) {\r\n      // 接收一个url 如果没有参数则获取本地网址\r\n      var url = weburl ? weburl : location.search; // 获取本地url中\"?\"符后的字串\r\n\r\n      const theRequest = {};\r\n      if (url.indexOf(\"?\") != -1) {\r\n        const num = url.indexOf(\"?\");\r\n        const str = url.substr(num + 1);\r\n        strs = str.split(\"&\"); // 分割为数组\r\n        for (let i = 0; i < strs.length; i++) {\r\n          // 循环创建对象\r\n          theRequest[strs[i].split(\"=\")[0]] = strs[i].split(\"=\")[1];\r\n        }\r\n      }\r\n      return theRequest;\r\n    }\r\n  };\r\n\r\n  //对外暴露的接口\r\n  exports(\"utils\", utilsFunction);\r\n});\r\n"]}