{"version":3,"sources":["message.js"],"names":["layui","define","exports","$","table","admin","tabs","element","all","text","id","notice","direct","tplTitle","d","title","render","elem","url","setter","base","page","cols","type","fixed","field","minWidth","templet","width","skin","events","del","othis","thisTabs","checkStatus","data","length","layer","msg","confirm","icon","reload","ready","readyAll","on","this","thisEvent","call"],"mappings":"AAUAA,MAAMC,QAAQ,QAAS,QAAS,QAAS,SAASC,GAChD,GAAIC,GAAIH,MAAMG,EAEbC,GADQJ,MAAMK,MACNL,MAAMI,OAMdE,GALUN,MAAMO,SAMfC,KACEC,KAAM,OACLC,GAAI,uBAENC,QACCF,KAAM,KACLC,GAAI,0BAENE,QACCH,KAAM,KACLC,GAAI,4BAKLG,EAAW,SAASC,GACtB,MAAO,2BAA4BA,EAAEJ,GAAI,KAAMI,EAAEC,MAInDX,GAAMY,QACJC,KAAM,uBACLC,IAAKlB,MAAMmB,OAAOC,KAAO,sBACzBC,MAAM,EACNC,QACEC,KAAM,WAAYC,MAAO,SACxBC,MAAO,QAASV,MAAO,OAAQW,SAAU,IAAKC,QAASd,IACvDY,MAAO,OAAQV,MAAO,KAAMa,MAAO,IAAKD,QAAS,iDAEpDE,KAAM,SAITzB,EAAMY,QACJC,KAAM,0BACLC,IAAKlB,MAAMmB,OAAOC,KAAO,yBACzBC,MAAM,EACNC,QACEC,KAAM,WAAYC,MAAO,SACxBC,MAAO,QAASV,MAAO,OAAQW,SAAU,IAAKC,QAASd,IACvDY,MAAO,OAAQV,MAAO,KAAMa,MAAO,IAAKD,QAAS,iDAEpDE,KAAM,SAITzB,EAAMY,QACJC,KAAM,0BACLC,IAAKlB,MAAMmB,OAAOC,KAAO,yBACzBC,MAAM,EACNC,QACEC,KAAM,WAAYC,MAAO,SACxBC,MAAO,QAASV,MAAO,OAAQW,SAAU,IAAKC,QAASd,IACvDY,MAAO,OAAQV,MAAO,KAAMa,MAAO,IAAKD,QAAS,iDAEpDE,KAAM,QAKT,IAAIC,IACFC,IAAK,SAASC,EAAOT,GACnB,GAAIU,GAAW3B,EAAKiB,GACnBW,EAAc9B,EAAM8B,YAAYD,EAASvB,IACzCyB,EAAOD,EAAYC,IACpB,OAAmB,KAAhBA,EAAKC,OAAqBC,MAAMC,IAAI,YAEvCD,OAAME,QAAQ,cAAe,WAO3BF,MAAMC,IAAI,QACRE,KAAM,IAERpC,EAAMqC,OAAOR,EAASvB,OAGzBgC,MAAO,SAASV,EAAOT,GACtB,GAAIU,GAAW3B,EAAKiB,GACnBW,EAAc9B,EAAM8B,YAAYD,EAASvB,IACzCyB,EAAOD,EAAYC,IACpB,OAAmB,KAAhBA,EAAKC,OAAqBC,MAAMC,IAAI,SAGvCD,MAAMC,IAAI,UACRE,KAAM,QAERpC,GAAMqC,OAAOR,EAASvB,MAEvBiC,SAAU,SAASX,EAAOT,GACzB,GAAIU,GAAW3B,EAAKiB,EAIpBc,OAAMC,IAAIL,EAASxB,KAAO,SACxB+B,KAAM,KAKZrC,GAAE,oCAAoCyC,GAAG,QAAS,WAChD,GAAIZ,GAAQ7B,EAAE0C,MACbC,EAAYd,EAAMG,KAAK,UACvBZ,EAAOS,EAAMG,KAAK,OACnBL,GAAOgB,IAAchB,EAAOgB,GAAWC,KAAKF,KAAMb,EAAOT,KAG3DrB,EAAQ","file":"../../message.js","sourcesContent":["/**\r\n\r\n @Name：layuiAdmin（iframe版） 消息中心\r\n @Author：贤心\r\n @Site：http://www.layui.com/admin/\r\n @License：LPPL\r\n    \r\n */\r\n\r\n\r\nlayui.define(['admin', 'table', 'util'], function(exports){\r\n  var $ = layui.$\r\n  ,admin = layui.admin\r\n  ,table = layui.table\r\n  ,element = layui.element;\r\n  \r\n  var DISABLED = 'layui-btn-disabled'\r\n  \r\n  //区分各选项卡中的表格\r\n  ,tabs = {\r\n    all: {\r\n      text: '全部消息'\r\n      ,id: 'LAY-app-message-all'\r\n    }\r\n    ,notice: {\r\n      text: '通知'\r\n      ,id: 'LAY-app-message-notice'\r\n    }\r\n    ,direct: {\r\n      text: '私信'\r\n      ,id: 'LAY-app-message-direct'\r\n    }\r\n  };\r\n  \r\n  //标题内容模板\r\n  var tplTitle = function(d){\r\n    return '<a href=\"detail.html?id='+ d.id +'\">'+ d.title;\r\n  };\r\n  \r\n  //全部消息\r\n  table.render({\r\n    elem: '#LAY-app-message-all'\r\n    ,url: layui.setter.base + 'json/message/all.js' //模拟接口\r\n    ,page: true\r\n    ,cols: [[\r\n      {type: 'checkbox', fixed: 'left'}\r\n      ,{field: 'title', title: '标题内容', minWidth: 300, templet: tplTitle}\r\n      ,{field: 'time', title: '时间', width: 170, templet: '<div>{{ layui.util.timeAgo(d.time) }}</div>'}\r\n    ]]\r\n    ,skin: 'line'\r\n  });\r\n  \r\n  //通知\r\n  table.render({\r\n    elem: '#LAY-app-message-notice'\r\n    ,url: layui.setter.base + 'json/message/notice.js' //模拟接口\r\n    ,page: true\r\n    ,cols: [[\r\n      {type: 'checkbox', fixed: 'left'}\r\n      ,{field: 'title', title: '标题内容', minWidth: 300, templet: tplTitle}\r\n      ,{field: 'time', title: '时间', width: 170, templet: '<div>{{ layui.util.timeAgo(d.time) }}</div>'}\r\n    ]]\r\n    ,skin: 'line'\r\n  });\r\n  \r\n  //私信\r\n  table.render({\r\n    elem: '#LAY-app-message-direct'\r\n    ,url: layui.setter.base + 'json/message/direct.js' //模拟接口\r\n    ,page: true\r\n    ,cols: [[\r\n      {type: 'checkbox', fixed: 'left'}\r\n      ,{field: 'title', title: '标题内容', minWidth: 300, templet: tplTitle}\r\n      ,{field: 'time', title: '时间', width: 170, templet: '<div>{{ layui.util.timeAgo(d.time) }}</div>'}\r\n    ]]\r\n    ,skin: 'line'\r\n  });\r\n  \r\n  \r\n  //事件处理\r\n  var events = {\r\n    del: function(othis, type){\r\n      var thisTabs = tabs[type]\r\n      ,checkStatus = table.checkStatus(thisTabs.id)\r\n      ,data = checkStatus.data; //获得选中的数据\r\n      if(data.length === 0) return layer.msg('未选中行');\r\n\r\n      layer.confirm('确定删除选中的数据吗？', function(){\r\n        /*\r\n        admin.req('url', {}, function(){ //请求接口\r\n          //do somethin\r\n        });\r\n        */\r\n        //此处只是演示，实际应用需把下述代码放入上述Ajax回调中\r\n        layer.msg('删除成功', {\r\n          icon: 1\r\n        });\r\n        table.reload(thisTabs.id); //刷新表格\r\n      });\r\n    }\r\n    ,ready: function(othis, type){\r\n      var thisTabs = tabs[type]\r\n      ,checkStatus = table.checkStatus(thisTabs.id)\r\n      ,data = checkStatus.data; //获得选中的数据\r\n      if(data.length === 0) return layer.msg('未选中行');\r\n      \r\n      //此处只是演示\r\n      layer.msg('标记已读成功', {\r\n        icon: 1\r\n      });\r\n      table.reload(thisTabs.id); //刷新表格\r\n    }\r\n    ,readyAll: function(othis, type){\r\n      var thisTabs = tabs[type];\r\n      \r\n      //do somethin\r\n      \r\n      layer.msg(thisTabs.text + '：全部已读', {\r\n        icon: 1\r\n      });\r\n    }\r\n  };\r\n  \r\n  $('.LAY-app-message-btns .layui-btn').on('click', function(){\r\n    var othis = $(this)\r\n    ,thisEvent = othis.data('events')\r\n    ,type = othis.data('type');\r\n    events[thisEvent] && events[thisEvent].call(this, othis, type);\r\n  });\r\n  \r\n  exports('message', {});\r\n});"]}