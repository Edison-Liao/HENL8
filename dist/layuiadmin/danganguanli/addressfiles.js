/** layuiAdmin.std-v1.0.0 LPPL License By http://www.layui.com/admin/ */
 ;"use strict";layui.config({base:"../../../layuiadmin/"}).extend({index:"lib/index"}).use(["index","table","layer"],function(){var e=layui.$,a=layui.form,t=layui.table,l=layui.layer,i={original:[],selected:[]};a.on("submit(IccRegist-search)",function(e){var a=e.field;console.log(e,"数据"),t.reload("addressFilesTable",{where:a})});t.render({elem:"#addressFilesTable",url:layui.setter.huibleUrl+"/api/IccWchat/regist/search",parseData:layui.setter.parseData,request:layui.setter.request,cols:[[{width:50,type:"checkbox"},{field:"DeviceId",title:"设备Id",minWidth:100},{field:"DeviceType",title:"设备类型",templet:function(e){return"blue"===e.DeviceType?'<span class="layui-badge layui-bg-blue">蓝牙</span>':'<span class="layui-badge layui-bg-gray">蓝牙</span>'}},{field:"IsActived",title:"设备是否激活",templet:function(e){return 1==e.IsActived?'<span class="layui-badge layui-bg-blue">已激活</span>':'<span class="layui-badge layui-bg-gray layui-badge-rim">未激活</span>'}},{field:"CreateDate",title:"设备创建时间",templet:function(e){return"<div>"+layui.util.toDateString(e.CreateDate)+"</div>"}},{title:"操作",width:150,align:"center",fixed:"right",toolbar:"#table-AddressFiles"}]],loading:!0,page:!0,limit:10,text:"对不起，加载出现异常！",done:function(e,a,t){console.log(e),i.original=e.data,console.log(a),console.log(t)}});t.on("checkbox(table-AddressFiles)",function(e){console.log(i.original,"original Data"),console.log(i.selected,"selected Data"),console.log(e.checked),console.log(e.data),console.log(e.type)}),t.on("tool(table-AddressFiles)",function(e){var a=e.data;if("unActive"===e.event){var t=a.IsActived?"确认要取消激活该设备吗?":"确认要激活该设备吗?";l.confirm(t,{icon:3,title:"提示"},function(e){s.unActive(a)})}});var s={addMac:function(a){l.closeAll(),l.load(0,{shade:!1});var i=layui.setter.basePostData;i.Data=a;var s=JSON.stringify(i);e.ajax({type:"Post",url:layui.setter.huibleUrl+"/api/IccWchat/regist",data:s,async:!0,dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json"},success:function(e){l.closeAll(),console.log(e),e.IsSucceed?(l.msg("添加用户成功!",{icon:6}),t.reload("addressFilesTable")):(t.reload("addressFilesTable"),l.msg("失败"+e,{icon:5}))},error:function(e){l.closeAll(),l.msg("数据操作失败",{icon:5})}})},unActive:function(a){l.closeAll(),l.load(0,{shade:!1});var i=layui.setter.basePostData;i.Data={IsActived:!a.IsActived,RegistId:a.Id};var s=JSON.stringify(i);e.ajax({type:"put",url:layui.setter.huibleUrl+"/api/IccWchat/regist",data:s,async:!0,dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json"},success:function(e){if(l.closeAll(),console.log(a),e.IsSucceed){var i=a.IsActived?"设备取消激活成功!":"设备激活成功!";l.msg(i,{icon:6}),t.reload("addressFilesTable")}else t.reload("addressFilesTable"),l.msg("失败"+e.Errors[0],{icon:5})},error:function(e){l.closeAll(),l.msg("数据操作失败",{icon:5})}})}},o={add:function(){l.open({type:1,title:"新增设备注册信息",content:e("#rigist-from"),area:["500px"],btn:["确认","取消"],yes:function(){var a={Mac:e("#Mac").val(),Description:"",DeviceType:"blue",IsForce:"fasle"},t=a.Mac.substr(0,7);return"34008AD"!==t?void l.msg("请输入34008AD开始的MAC号!"):12!==a.Mac.length?void l.msg("MAC号为12位字符串!"):void s.addMac(a)},btn2:function(e,a){console.log("取消锁定解锁1")}})}};e(".layui-btn").on("click",function(){var a=e(this).data("type");o[a]?o[a].call(this):""})});
//# sourceMappingURL=../src/maps/danganguanli/addressfiles.js.map
