/** layuiAdmin.std-v1.0.0 LPPL License By http://www.layui.com/admin/ */
 ;"use strict";layui.config({base:"../../../layuiadmin/"}).extend({index:"lib/index"}).use(["index","table","form","consts"],function(){var e=layui.$,a=layui.table,t=layui.form,n=(layui.laypage,a.render({elem:"#LAY-yingyewangdianTable",id:"LAY-yingyewangdianTable",url:layui.setter.baseUrl+"/api/BusinessHall/query/list",where:{"Data.CompanyCoding":"88888888",Method:"list"},parseData:layui.setter.parseData,request:layui.setter.request,page:!0,cols:[[{field:"Coding",title:"营业网点编码",templet:function(e){return e.Me.Coding}},{field:"Name",title:"营业网点名称",templet:function(e){return e.Me.Name}},{field:"Addr",title:"营业地址",templet:function(e){return e.Me.Addr}},{field:"Tels",title:"联系电话",templet:function(e){return e.Me.Tels}},{field:"WorkTimeInfo",title:"营业时间",templet:function(e){return e.Me.WorkTimeInfo}},{field:"LeaderName",title:"主管操作员",templet:function(e){return e.Me.LeaderName}},{field:"Description",title:"描述",templet:function(e){return e.Me.Description}},{field:"CreateDate",title:"创建时间",templet:function(e){return"<div>"+layui.util.toDateString(e.Me.CreateDate)+"</div>"}},{field:"ModifyDate",title:"修改时间",templet:function(e){return"<div>"+layui.util.toDateString(e.Me.ModifyDate)+"</div>"}},{title:"操作",fixed:"right",align:"center",width:160,toolbar:"#LAY-yingyewangdianTable-barOperation"}]],loading:!0,limit:10,text:"对不起，加载出现异常！"}),{add:function(t){layer.closeAll(),layer.load(0,{shade:!1});var n=layui.consts.basePostData();new Date;n.Data=t,n.Data.LeaderID=n.Data.LeaderID?n.Data.LeaderID:null,n.Data.CompanyCoding="88888888",n.Data.CompanyName="88888888",n.Method="insert";var i=JSON.stringify(n);console.info("data",i),e.ajax({type:"Post",url:layui.setter.baseUrl+"/api/BusinessHall/insert",data:i,async:!0,dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json"},success:function(t){layer.closeAll(),t.IsSucceed?(layer.msg("添加营业网点成功!",{icon:6}),a.reload("LAY-yingyewangdianTable"),e("#lock-from").find("input[type=text],select,input[type=hidden]").each(function(){e(this).val("")})):(a.reload("LAY-yingyewangdianTable"),layer.msg("失败: "+t.Errors[0].Message,{icon:5}))},error:function(e){layer.closeAll(),layer.msg("数据操作失败",{icon:5})}}),a.reload("LAY-yingyewangdianTable")},"delete":function(t){layer.closeAll(),layer.load(0,{shade:!1});var n=layui.consts.basePostData();n.Data={Key:t.Me.Id},n.Method="remove";var i=JSON.stringify(n);e.ajax({type:"delete",url:layui.setter.baseUrl+"/api/BusinessHall/Remove/",async:!0,data:i,dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json"},success:function(e){layer.closeAll(),e.IsSucceed?(layer.msg("删除营业网点成功!",{icon:6}),a.reload("LAY-yingyewangdianTable")):(a.reload("LAY-yingyewangdianTable"),layer.msg("删除失败: "+e.Errors[0].Message,{icon:5}))},error:function(e){layer.closeAll(),layer.msg("数据操作失败",{icon:5})}})},detail:function(a){layer.load(0,{shade:!1,time:1e4});var t=layui.consts.basePostData(),n=JSON.stringify(t);e.ajax({type:"get",url:layui.setter.baseUrl+"/api/BusinessHall/query/key?Data.key="+para.Me.Id+"&Method=key",async:!0,data:n,dataType:"json",success:function(a){a.IsSucceed?layer.open({type:0,title:"营业网点详情",content:e("#lock-from").html(),maxmin:!0,area:["700px","400px"],btn:["确定"],yes:function(e,a){layer.close(e),layer.closeAll("loading")}}):layer.msg("失败"+res.Errors[0].Description,{icon:5})},error:function(e){layer.closeAll(),layer.msg("数据加载失败",{icon:5})}})},edit:function(n){layui.consts.basePostData();e.ajax({type:"get",url:layui.setter.baseUrl+"/api/BusinessHall/query/key?Data.key="+n.Me.Id+"&Method=key",async:!0,success:function(n){if(n.IsSucceed){console.info(n);var i=n.Result.Me;layer.open({type:1,title:"修改营业网点",content:e("#lock-from"),maxmin:!0,area:["700px","400px"],btn:["确定","取消"],yes:function(n,l){var o=e("#LAY-wangdian-add-submit");t.on("submit(LAY-wangdian-add-submit)",function(t){var l=t.field,o=layui.consts.basePostData();new Date;o.Data=l,o.Data.Id=i.Id,o.Data.LeaderID=i.LeaderID?i.LeaderID:null,o.Data.CompanyCoding="88888888",o.Method="update";var r=JSON.stringify(o);console.info("data",r),e.ajax({type:"Put",url:layui.setter.baseUrl+"/api/BusinessHall/update",data:r,async:!0,dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json"},success:function(t){layer.closeAll(),t.IsSucceed?(layer.msg("修改营业网点成功!",{icon:6}),a.reload("LAY-yingyewangdianTable"),e("#lock-from").find("input[type=text],select,input[type=hidden]").each(function(){e(this).val("")})):(a.reload("LAY-yingyewangdianTable"),layer.msg("失败: "+t.Errors[0].Message,{icon:5}))},error:function(e){layer.closeAll(),layer.msg("数据操作失败",{icon:5})}}),layer.close(n)}),o.trigger("click")}}),t.val("lock-from",{Coding:i.Coding,Name:i.Name,CompanyCoding:i.CompanyCoding,Addr:i.Addr,Tels:i.Tels,WorkTimeInfo:i.WorkTimeInfo,LeaderID:i.LeaderID,LeaderName:i.LeaderName,SortNum:i.SortNum,Description:i.Description})}else layer.msg("失败"+n.Errors[0].Message,{icon:5})},error:function(e){layer.closeAll(),layer.msg("数据加载失败",{icon:5})}})}}),i={batchdel:function(){var e=a.checkStatus("LAY-user-manage"),t=e.data;return 0===t.length?layer.msg("请选择数据"):(layer.close(index),void layer.confirm("确定删除吗？",function(e){a.reload("LAY-user-manage"),layer.msg("已删除")}))},add:function(){layer.open({type:1,title:"添加营业网点",content:e("#lock-from"),maxmin:!0,area:["700px","500px"],btn:["确定","取消"],yes:function(a,i){var l=e("#LAY-wangdian-add-submit");t.on("submit(LAY-wangdian-add-submit)",function(t){var i=t.field;e.ajax({type:"get",url:layui.setter.baseUrl+"/api/Common/GetInsertGuid",async:!0,dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json"},success:function(e){e.IsSucceed?(i.Idd=e.Result,n.add(i),layer.close(a)):layer.msg("添加网点数据失败"+e,{icon:5})},error:function(e){layer.closeAll(),layer.msg("数据操作失败",{icon:5})}})}),l.trigger("click")}})}};e(".layui-btn.layuiadmin-btn-useradmin").on("click",function(){var a=e(this).data("type");i[a]?i[a].call(this):""}),a.on("tool()",function(e){var a=e.data,t=e.event;e.tr;"detail"===t?(console.info("do detail"),n.detail(a)):"del"===t?layer.confirm("真的删除行么",function(e){n["delete"](a),layer.close(e)}):"edit"===t&&(console.info(a),n.edit(a))})});
//# sourceMappingURL=../src/maps/shoufeiguanli/yingyewangdian.js.map
