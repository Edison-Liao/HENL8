/** layuiAdmin.std-v1.0.0 LPPL License By http://www.layui.com/admin/ */
 ;"use strict";layui.config({base:"../../../layuiadmin/"}).extend({index:"lib/index"}).use(["index","table","consts","common","z_treeConfig"],function(){var e=layui.$,t=layui.form,a=(layui.consts,layui.common),n=layui.table;z_treeConfig=layui.z_treeConfig,t.on("submit(DepartmentSub)",function(e){return console.log(e.field),o.server.add(e.field),!1}),n.on("tool(dectionaryTable)",function(e){var a=e.data;if(console.log(a),"del"===e.event){var n="你确定要删除该数据吗?";layer.confirm(n,{icon:3,title:"提示"},function(e){o.server.delet(a)})}else"edit"===e.event&&(o.render.openFrom(!0),t.val("DepartmentFrom",{Name:a.Name,Code:a.Code,Sort:a.Sort,open:!1,Description:"我爱layui"}))});var o={init:function(){o.server.getDictionaryData(),o.event()},baseData:{baseData:{},editFalge:!1},event:function(){e("#delet").click(function(){layer.confirm("你确定要删除该数据吗?",{btn:["确定","取消"],icon:3},function(){console.log("确认",data),organ.server.delet(data.Flag,data.Id)},function(){console.log("取消")})}),e("#showDepartment").click(function(){o.render.openFrom(!1),o.currData.clearForm()})},server:{getDictionaryData:function(e){a.ajaxFun("get","/api/Dictionary/info/business/list").then(function(e){if(a.appResult.isSucceeded(e)){console.log(e,"返回数据");var t=[{Name:"字段1",Code:"0001",Sort:1,Text:"属性1"},{Name:"字段2",Code:"0002",Sort:2,Text:"属性1"}];o.render.renderTree(e.Result),o.render.renderTable(t)}else a.appResult.loadErrorText(e)}).fail(function(e){console.log(e)})},add:function(e){var t=layui.consts.basePostData("CreateDictionaryInfo");t.data=e;var o=JSON.stringify(t);a.ajaxFun("post","/api/Dictionary/info",o).then(function(e){a.appResult.isSucceeded(e)?(layer.msg("添加成功!",{icon:6}),n.reload("LAY-user-manage")):(layer.msg("添加数据失败!",{icon:5}),a.appResult.loadErrorText(e))}).fail(function(e){console.log(e)})},eidt:function(e){var t=layui.consts.basePostData("UpdateDictionaryInfo");t.data=e;var o=JSON.stringify(t);a.ajaxFun("put","/api/Dictionary/info",o).then(function(e){a.appResult.isSucceeded(e)?(layer.msg("数据更新成功!",{icon:6}),n.reload("LAY-user-manage")):a.appResult.loadErrorText(e)}).fail(function(e){console.log(e)})},delet:function(e){var t=layui.consts.basePostData("RemoveDictionaryInfo");t.data=e;var o=JSON.stringify(t);a.ajaxFun("DELETE","/api/Dictionary/info",o).then(function(e){a.appResult.isSucceeded(e)?(layer.msg("数据删除成功!",{icon:6}),n.reload("LAY-user-manage")):(layer.msg("数据删除失败!",{icon:5}),a.appResult.loadErrorText(e))}).fail(function(e){console.log(e)})}},render:{renderTree:function(e){console.log(11),o.baseData.treeObj=layui.z_treeConfig.renderTree(e,"treeDictionary",{callback:{onClick:o.currData.treeOnClick}})},renderTable:function(e){n.render({elem:"#dectionaryTable",data:e,cols:[[{field:"Code",title:"字段编码"},{field:"Name",title:"字段名"},{field:"Sort",title:"排序",sort:!0},{title:"操作",width:150,align:"center",fixed:"right",toolbar:"#table-tool"}]]})},openFrom:function(t){o.baseData.editFalge=t,layer.open({type:1,title:o.baseData.editFalge?"编辑字典":"添加字典",content:e("#DepartmentFrom"),area:"500px",btn:["确定","取消"],yes:function(t,a){var n=e("#DepartmentSub");n.trigger("click")}})}},currData:{clearForm:function(){t.val("DepartmentFrom",{Name:"",Code:"",Sort:"",open:"",Description:""})}}};o.init()});
//# sourceMappingURL=../src/maps/platform/dictionary.js.map
